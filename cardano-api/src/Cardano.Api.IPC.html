<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE DataKinds #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE DerivingStrategies #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE FlexibleContexts #-}</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# LANGUAGE FlexibleInstances #-}</span><span>
</span><span id="line-5"></span><span class="hs-pragma">{-# LANGUAGE GADTs #-}</span><span>
</span><span id="line-6"></span><span class="hs-pragma">{-# LANGUAGE NamedFieldPuns #-}</span><span>
</span><span id="line-7"></span><span class="hs-pragma">{-# LANGUAGE ScopedTypeVariables #-}</span><span>
</span><span id="line-8"></span><span class="hs-pragma">{-# LANGUAGE TypeFamilies #-}</span><span>
</span><span id="line-9"></span><span class="hs-pragma">{-# LANGUAGE TypeOperators #-}</span><span>
</span><span id="line-10"></span><span>
</span><span id="line-11"></span><span class="hs-comment">-- The Shelley ledger uses promoted data kinds which we have to use, but we do</span><span>
</span><span id="line-12"></span><span class="hs-comment">-- not export any from this API. We also use them unticked as nature intended.</span><span>
</span><span id="line-13"></span><span class="hs-pragma">{-# OPTIONS_GHC -Wno-unticked-promoted-constructors #-}</span><span>
</span><span id="line-14"></span><span>
</span><span id="line-15"></span><span class="hs-comment">-- | Node IPC protocols</span><span>
</span><span id="line-16"></span><span class="hs-comment">--</span><span>
</span><span id="line-17"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Cardano.Api.IPC</span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-18"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Node interaction</span></span><span>
</span><span id="line-19"></span><span>    </span><span class="annot"><span class="hs-comment">-- | Operations that involve talking to a local Cardano node.</span></span><span>
</span><span id="line-20"></span><span>    </span><span class="annot"><a href="Cardano.Api.IPC.html#connectToLocalNode"><span class="hs-identifier">connectToLocalNode</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-21"></span><span>    </span><span class="annot"><a href="Cardano.Api.IPC.html#connectToLocalNodeWithVersion"><span class="hs-identifier">connectToLocalNodeWithVersion</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-22"></span><span>    </span><span class="annot"><a href="Cardano.Api.IPC.html#LocalNodeConnectInfo"><span class="hs-identifier">LocalNodeConnectInfo</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-23"></span><span>    </span><span class="annot"><a href="Cardano.Api.IPC.html#LocalNodeClientParams"><span class="hs-identifier">LocalNodeClientParams</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-24"></span><span>    </span><span class="annot"><a href="Cardano.Api.IPC.html#mkLocalNodeClientParams"><span class="hs-identifier">mkLocalNodeClientParams</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-25"></span><span>    </span><span class="annot"><a href="Cardano.Api.IPC.html#LocalNodeClientProtocols"><span class="hs-identifier">LocalNodeClientProtocols</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-26"></span><span>    </span><span class="annot"><a href="Cardano.Api.IPC.html#LocalChainSyncClient"><span class="hs-identifier">LocalChainSyncClient</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-27"></span><span>    </span><span class="annot"><a href="Cardano.Api.IPC.html#LocalNodeClientProtocolsInMode"><span class="hs-identifier">LocalNodeClientProtocolsInMode</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-28"></span><span>
</span><span id="line-29"></span><span>    </span><span class="annot"><span class="hs-comment">-- ** Modes</span></span><span>
</span><span id="line-30"></span><span>    </span><span class="annot"><span class="hs-comment">-- | TODO move to Cardano.Api</span></span><span>
</span><span id="line-31"></span><span>    </span><span class="annot"><a href="Cardano.Api.Modes.html#ConsensusModeParams"><span class="hs-identifier">ConsensusModeParams</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-32"></span><span>    </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.2/cardano-ledger-byron-1.0.0.3-96927c35476039a5cae6502ff60c8dd4cebbd488449edb876e0eb09061396e78/share/doc/html/src/Cardano.Chain.Slotting.EpochSlots.html#EpochSlots"><span class="hs-identifier">EpochSlots</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-33"></span><span>
</span><span id="line-34"></span><span class="hs-comment">--  connectToRemoteNode,</span><span>
</span><span id="line-35"></span><span>
</span><span id="line-36"></span><span>    </span><span class="annot"><span class="hs-comment">-- *** Chain sync protocol</span></span><span>
</span><span id="line-37"></span><span>    </span><span class="annot"><span class="hs-identifier">ChainSyncClient</span></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-38"></span><span>    </span><span class="annot"><span class="hs-identifier">ChainSyncClientPipelined</span></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-39"></span><span>    </span><span class="annot"><a href="Cardano.Api.Block.html#BlockInMode"><span class="hs-identifier">BlockInMode</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-40"></span><span>
</span><span id="line-41"></span><span>    </span><span class="annot"><span class="hs-comment">-- *** Local tx submission</span></span><span>
</span><span id="line-42"></span><span>    </span><span class="annot"><span class="hs-identifier">LocalTxSubmissionClient</span></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-43"></span><span>    </span><span class="annot"><a href="Cardano.Api.InMode.html#TxInMode"><span class="hs-identifier">TxInMode</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-44"></span><span>    </span><span class="annot"><a href="Cardano.Api.InMode.html#TxValidationErrorInCardanoMode"><span class="hs-identifier">TxValidationErrorInCardanoMode</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-45"></span><span>    </span><span class="annot"><a href="Cardano.Api.InMode.html#TxValidationError"><span class="hs-identifier">TxValidationError</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-46"></span><span>    </span><span class="annot"><a href="Cardano.Api.IPC.html#submitTxToNodeLocal"><span class="hs-identifier">submitTxToNodeLocal</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-47"></span><span>    </span><span class="annot"><span class="hs-identifier">SubmitResult</span></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-48"></span><span>
</span><span id="line-49"></span><span>    </span><span class="annot"><span class="hs-comment">-- *** Local state query</span></span><span>
</span><span id="line-50"></span><span>    </span><span class="annot"><span class="hs-identifier">LocalStateQueryClient</span></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-51"></span><span>    </span><span class="annot"><a href="Cardano.Api.IPC.html#AcquiringFailure"><span class="hs-identifier">AcquiringFailure</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-52"></span><span>    </span><span class="annot"><a href="Cardano.Api.Query.html#QueryInMode"><span class="hs-identifier">QueryInMode</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-53"></span><span>    </span><span class="annot"><a href="Cardano.Api.Query.html#QueryInEra"><span class="hs-identifier">QueryInEra</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-54"></span><span>    </span><span class="annot"><a href="Cardano.Api.Query.html#QueryInShelleyBasedEra"><span class="hs-identifier">QueryInShelleyBasedEra</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-55"></span><span>    </span><span class="annot"><a href="Cardano.Api.IPC.html#queryNodeLocalState"><span class="hs-identifier">queryNodeLocalState</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-56"></span><span>
</span><span id="line-57"></span><span>    </span><span class="annot"><span class="hs-comment">-- *** Local tx monitoring</span></span><span>
</span><span id="line-58"></span><span>    </span><span class="annot"><span class="hs-identifier">LocalTxMonitorClient</span></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-59"></span><span>    </span><span class="annot"><a href="Cardano.Api.IPC.html#LocalTxMonitoringQuery"><span class="hs-identifier">LocalTxMonitoringQuery</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-60"></span><span>    </span><span class="annot"><a href="Cardano.Api.IPC.html#LocalTxMonitoringResult"><span class="hs-identifier">LocalTxMonitoringResult</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-61"></span><span>    </span><span class="annot"><span class="hs-identifier">Consensus.MempoolSizeAndCapacity</span></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-62"></span><span>    </span><span class="annot"><a href="Cardano.Api.IPC.html#queryTxMonitoringLocal"><span class="hs-identifier">queryTxMonitoringLocal</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-63"></span><span>
</span><span id="line-64"></span><span>    </span><span class="annot"><a href="Cardano.Api.Query.html#EraHistory"><span class="hs-identifier">EraHistory</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-65"></span><span>    </span><span class="annot"><a href="Cardano.Api.Query.html#getProgress"><span class="hs-identifier">getProgress</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-66"></span><span>
</span><span id="line-67"></span><span>    </span><span class="annot"><span class="hs-comment">-- *** Common queries</span></span><span>
</span><span id="line-68"></span><span>    </span><span class="annot"><a href="Cardano.Api.IPC.html#getLocalChainTip"><span class="hs-identifier">getLocalChainTip</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-69"></span><span>
</span><span id="line-70"></span><span>    </span><span class="annot"><span class="hs-comment">-- *** Helpers</span></span><span>
</span><span id="line-71"></span><span>    </span><span class="hs-comment">--TODO: These should be exported via Cardano.Api.Mode</span><span>
</span><span id="line-72"></span><span>    </span><span class="annot"><a href="Cardano.Api.IPC.html#toAcquiringFailure"><span class="hs-identifier">toAcquiringFailure</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-73"></span><span>
</span><span id="line-74"></span><span>    </span><span class="annot"><span class="hs-identifier">NodeToClientVersion</span></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-75"></span><span>
</span><span id="line-76"></span><span>    </span><span class="annot"><a href="Cardano.Api.IPC.Version.html#UnsupportedNtcVersionError"><span class="hs-identifier">UnsupportedNtcVersionError</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-77"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-78"></span><span>
</span><span id="line-79"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Cardano.Api.Block.html"><span class="hs-identifier">Cardano.Api.Block</span></a></span><span>
</span><span id="line-80"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Cardano.Api.HasTypeProxy.html"><span class="hs-identifier">Cardano.Api.HasTypeProxy</span></a></span><span>
</span><span id="line-81"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Cardano.Api.InMode.html"><span class="hs-identifier">Cardano.Api.InMode</span></a></span><span>
</span><span id="line-82"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Cardano.Api.IO.html"><span class="hs-identifier">Cardano.Api.IO</span></a></span><span>
</span><span id="line-83"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Cardano.Api.IPC.Version.html"><span class="hs-identifier">Cardano.Api.IPC.Version</span></a></span><span>
</span><span id="line-84"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Cardano.Api.Modes.html"><span class="hs-identifier">Cardano.Api.Modes</span></a></span><span>
</span><span id="line-85"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Cardano.Api.NetworkId.html"><span class="hs-identifier">Cardano.Api.NetworkId</span></a></span><span>
</span><span id="line-86"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Cardano.Api.Protocol.html"><span class="hs-identifier">Cardano.Api.Protocol</span></a></span><span>
</span><span id="line-87"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Cardano.Api.Query.html"><span class="hs-identifier">Cardano.Api.Query</span></a></span><span>
</span><span id="line-88"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Cardano.Api.Tx.html"><span class="hs-identifier">Cardano.Api.Tx</span></a></span><span>
</span><span id="line-89"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Cardano.Api.TxBody.html"><span class="hs-identifier">Cardano.Api.TxBody</span></a></span><span>
</span><span id="line-90"></span><span>
</span><span id="line-91"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.2/cardano-ledger-api-1.7.0.1-b9e4b9e7249ca05d924ebc7d10a0541d577f106024072153da9d404efa8506ea/share/doc/html/src/Cardano.Ledger.Api.html"><span class="hs-identifier">Cardano.Ledger.Api</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">L</span></span><span>
</span><span id="line-92"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.2/ouroboros-consensus-0.13.0.1-8aef850169985b5372495195b20258fa7e52a46bbc5e9028955791f7b5578a90/share/doc/html/src/Ouroboros.Consensus.Block.html"><span class="hs-identifier">Ouroboros.Consensus.Block</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Consensus</span></span><span>
</span><span id="line-93"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.2/ouroboros-consensus-cardano-0.12.0.0-2682aec32be4980bdd895fcf97b73f7b333b03e47d14403c8aeca2665540d6b3/share/doc/html/src/Ouroboros.Consensus.Cardano.Block.html"><span class="hs-identifier">Ouroboros.Consensus.Cardano.Block</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Consensus</span></span><span>
</span><span id="line-94"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.2/ouroboros-consensus-cardano-0.12.0.0-2682aec32be4980bdd895fcf97b73f7b333b03e47d14403c8aeca2665540d6b3/share/doc/html/src/Ouroboros.Consensus.Cardano.CanHardFork.html"><span class="hs-identifier">Ouroboros.Consensus.Cardano.CanHardFork</span></a></span><span>
</span><span id="line-95"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.2/ouroboros-consensus-0.13.0.1-8aef850169985b5372495195b20258fa7e52a46bbc5e9028955791f7b5578a90/share/doc/html/src/Ouroboros.Consensus.Ledger.Query.html"><span class="hs-identifier">Ouroboros.Consensus.Ledger.Query</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Consensus</span></span><span>
</span><span id="line-96"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.2/ouroboros-consensus-0.13.0.1-8aef850169985b5372495195b20258fa7e52a46bbc5e9028955791f7b5578a90/share/doc/html/src/Ouroboros.Consensus.Ledger.SupportsMempool.html"><span class="hs-identifier">Ouroboros.Consensus.Ledger.SupportsMempool</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Consensus</span></span><span>
</span><span id="line-97"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.2/ouroboros-consensus-0.13.0.1-8aef850169985b5372495195b20258fa7e52a46bbc5e9028955791f7b5578a90/share/doc/html/src/Ouroboros.Consensus.Ledger.SupportsProtocol.html"><span class="hs-identifier">Ouroboros.Consensus.Ledger.SupportsProtocol</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Consensus</span></span><span>
</span><span id="line-98"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.2/ouroboros-consensus-diffusion-0.9.0.0-fcfe3e39fd7312ae137e4ab0aadf753deb784d0d56c0f1d656b111860ca46e96/share/doc/html/src/Ouroboros.Consensus.Network.NodeToClient.html"><span class="hs-identifier">Ouroboros.Consensus.Network.NodeToClient</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Consensus</span></span><span>
</span><span id="line-99"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.2/ouroboros-consensus-0.13.0.1-8aef850169985b5372495195b20258fa7e52a46bbc5e9028955791f7b5578a90/share/doc/html/src/Ouroboros.Consensus.Node.NetworkProtocolVersion.html"><span class="hs-identifier">Ouroboros.Consensus.Node.NetworkProtocolVersion</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Consensus</span></span><span>
</span><span id="line-100"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.2/ouroboros-consensus-0.13.0.1-8aef850169985b5372495195b20258fa7e52a46bbc5e9028955791f7b5578a90/share/doc/html/src/Ouroboros.Consensus.Node.ProtocolInfo.html"><span class="hs-identifier">Ouroboros.Consensus.Node.ProtocolInfo</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Consensus</span></span><span>
</span><span id="line-101"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.2/ouroboros-consensus-protocol-0.6.0.0-43d1c3829c0a6be2f7253e3554e8ee292b11d35a663bb78b349b6b67e80c8bae/share/doc/html/src/Ouroboros.Consensus.Protocol.TPraos.html"><span class="hs-identifier">Ouroboros.Consensus.Protocol.TPraos</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Consensus</span></span><span>
</span><span id="line-102"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.2/ouroboros-consensus-cardano-0.12.0.0-2682aec32be4980bdd895fcf97b73f7b333b03e47d14403c8aeca2665540d6b3/share/doc/html/src/Ouroboros.Consensus.Shelley.Ledger.Block.html"><span class="hs-identifier">Ouroboros.Consensus.Shelley.Ledger.Block</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Consensus</span></span><span>
</span><span id="line-103"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.2/ouroboros-consensus-cardano-0.12.0.0-2682aec32be4980bdd895fcf97b73f7b333b03e47d14403c8aeca2665540d6b3/share/doc/html/src/Ouroboros.Consensus.Shelley.Ledger.SupportsProtocol.html"><span class="hs-identifier">Ouroboros.Consensus.Shelley.Ledger.SupportsProtocol</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-104"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Ouroboros.Network.Block</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Net</span></span><span>
</span><span id="line-105"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Ouroboros.Network.Mux</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Net</span></span><span>
</span><span id="line-106"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Ouroboros.Network.NodeToClient</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">NodeToClientProtocols</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-107"></span><span>                   </span><span class="annot"><span class="hs-identifier">NodeToClientVersionData</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-108"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Ouroboros.Network.NodeToClient</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Net</span></span><span>
</span><span id="line-109"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Ouroboros.Network.NodeToClient.Version</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">NodeToClientVersion</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-110"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Ouroboros.Network.Protocol.ChainSync.Client</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Net.Sync</span></span><span>
</span><span id="line-111"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Ouroboros.Network.Protocol.ChainSync.ClientPipelined</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Net.SyncP</span></span><span>
</span><span id="line-112"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Ouroboros.Network.Protocol.LocalStateQuery.Client</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">LocalStateQueryClient</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-113"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Ouroboros.Network.Protocol.LocalStateQuery.Client</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Net.Query</span></span><span>
</span><span id="line-114"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Ouroboros.Network.Protocol.LocalStateQuery.Type</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">AcquireFailure</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-115"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Ouroboros.Network.Protocol.LocalStateQuery.Type</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Net.Query</span></span><span>
</span><span id="line-116"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Ouroboros.Network.Protocol.LocalTxMonitor.Client</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">LocalTxMonitorClient</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-117"></span><span>                   </span><span class="annot"><span class="hs-identifier">localTxMonitorClientPeer</span></span><span class="hs-special">)</span><span>
</span><span id="line-118"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Ouroboros.Network.Protocol.LocalTxMonitor.Client</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">CTxMon</span></span><span>
</span><span id="line-119"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Ouroboros.Network.Protocol.LocalTxMonitor.Type</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Consensus</span></span><span>
</span><span id="line-120"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Ouroboros.Network.Protocol.LocalTxSubmission.Client</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">LocalTxSubmissionClient</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-121"></span><span>                   </span><span class="annot"><span class="hs-identifier">SubmitResult</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-122"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Ouroboros.Network.Protocol.LocalTxSubmission.Client</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Net.Tx</span></span><span>
</span><span id="line-123"></span><span>
</span><span id="line-124"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Control.Concurrent.STM</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">TMVar</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Conc.Sync.html#atomically"><span class="hs-identifier">atomically</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">newEmptyTMVarIO</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">putTMVar</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">takeTMVar</span></span><span class="hs-special">,</span><span>
</span><span id="line-125"></span><span>                   </span><span class="annot"><span class="hs-identifier">tryPutTMVar</span></span><span class="hs-special">)</span><span>
</span><span id="line-126"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/Control.Monad.html"><span class="hs-identifier">Control.Monad</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/Data.Functor.html#void"><span class="hs-identifier">void</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-127"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Control.Tracer</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">nullTracer</span></span><span class="hs-special">)</span><span>
</span><span id="line-128"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Data.Aeson</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">ToJSON</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">object</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">toJSON</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-operator">(.=)</span></span><span class="hs-special">)</span><span>
</span><span id="line-129"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.ByteString.Lazy</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">LBS</span></span><span>
</span><span id="line-130"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Map.Strict</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Map</span></span><span>
</span><span id="line-131"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/Data.Void.html"><span class="hs-identifier">Data.Void</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Base.html#Void"><span class="hs-identifier">Void</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-132"></span><span>
</span><span id="line-133"></span><span class="hs-comment">-- ----------------------------------------------------------------------------</span><span>
</span><span id="line-134"></span><span class="hs-comment">-- The types for the client side of the node-to-client IPC protocols</span><span>
</span><span id="line-135"></span><span class="hs-comment">--</span><span>
</span><span id="line-136"></span><span>
</span><span id="line-137"></span><span class="hs-comment">-- | The protocols we can use with a local node. Use in conjunction with</span><span>
</span><span id="line-138"></span><span class="hs-comment">-- 'connectToLocalNode'.</span><span>
</span><span id="line-139"></span><span class="hs-comment">--</span><span>
</span><span id="line-140"></span><span class="hs-comment">-- These protocols use the types from the rest of this API. The conversion</span><span>
</span><span id="line-141"></span><span class="hs-comment">-- to\/from the types used by the underlying wire formats is handled by</span><span>
</span><span id="line-142"></span><span class="hs-comment">-- 'connectToLocalNode'.</span><span>
</span><span id="line-143"></span><span class="hs-comment">--</span><span>
</span><span id="line-144"></span><span class="hs-keyword">data</span><span> </span><span id="LocalNodeClientProtocols"><span class="annot"><a href="Cardano.Api.IPC.html#LocalNodeClientProtocols"><span class="hs-identifier hs-var">LocalNodeClientProtocols</span></a></span></span><span> </span><span id="local-6989586621681167788"><span class="annot"><a href="#local-6989586621681167788"><span class="hs-identifier hs-type">block</span></a></span></span><span> </span><span id="local-6989586621681167789"><span class="annot"><a href="#local-6989586621681167789"><span class="hs-identifier hs-type">point</span></a></span></span><span> </span><span id="local-6989586621681167790"><span class="annot"><a href="#local-6989586621681167790"><span class="hs-identifier hs-type">tip</span></a></span></span><span> </span><span id="local-6989586621681167791"><span class="annot"><a href="#local-6989586621681167791"><span class="hs-identifier hs-type">slot</span></a></span></span><span> </span><span id="local-6989586621681167792"><span class="annot"><a href="#local-6989586621681167792"><span class="hs-identifier hs-type">tx</span></a></span></span><span> </span><span id="local-6989586621681167793"><span class="annot"><a href="#local-6989586621681167793"><span class="hs-identifier hs-type">txid</span></a></span></span><span> </span><span id="local-6989586621681167794"><span class="annot"><a href="#local-6989586621681167794"><span class="hs-identifier hs-type">txerr</span></a></span></span><span> </span><span id="local-6989586621681167795"><span class="annot"><a href="#local-6989586621681167795"><span class="hs-identifier hs-type">query</span></a></span></span><span> </span><span id="local-6989586621681167796"><span class="annot"><a href="#local-6989586621681167796"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-145"></span><span>  </span><span id="LocalNodeClientProtocols"><span class="annot"><a href="Cardano.Api.IPC.html#LocalNodeClientProtocols"><span class="hs-identifier hs-var">LocalNodeClientProtocols</span></a></span></span><span>
</span><span id="line-146"></span><span>    </span><span class="hs-special">{</span><span> </span><span id="localChainSyncClient"><span class="annot"><span class="annottext">forall block point tip slot tx txid txerr (query :: * -&gt; *)
       (m :: * -&gt; *).
LocalNodeClientProtocols block point tip slot tx txid txerr query m
-&gt; LocalChainSyncClient block point tip m
</span><a href="Cardano.Api.IPC.html#localChainSyncClient"><span class="hs-identifier hs-var hs-var">localChainSyncClient</span></a></span></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.Api.IPC.html#LocalChainSyncClient"><span class="hs-identifier hs-type">LocalChainSyncClient</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681167788"><span class="hs-identifier hs-type">block</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681167789"><span class="hs-identifier hs-type">point</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681167790"><span class="hs-identifier hs-type">tip</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681167796"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-147"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="localTxSubmissionClient"><span class="annot"><span class="annottext">forall block point tip slot tx txid txerr (query :: * -&gt; *)
       (m :: * -&gt; *).
LocalNodeClientProtocols block point tip slot tx txid txerr query m
-&gt; Maybe (LocalTxSubmissionClient tx txerr m ())
</span><a href="Cardano.Api.IPC.html#localTxSubmissionClient"><span class="hs-identifier hs-var hs-var">localTxSubmissionClient</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">LocalTxSubmissionClient</span></span><span> </span><span class="annot"><a href="#local-6989586621681167792"><span class="hs-identifier hs-type">tx</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681167794"><span class="hs-identifier hs-type">txerr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681167796"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-148"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="localStateQueryClient"><span class="annot"><span class="annottext">forall block point tip slot tx txid txerr (query :: * -&gt; *)
       (m :: * -&gt; *).
LocalNodeClientProtocols block point tip slot tx txid txerr query m
-&gt; Maybe (LocalStateQueryClient block point query m ())
</span><a href="Cardano.Api.IPC.html#localStateQueryClient"><span class="hs-identifier hs-var hs-var">localStateQueryClient</span></a></span></span><span>   </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">LocalStateQueryClient</span></span><span> </span><span class="annot"><a href="#local-6989586621681167788"><span class="hs-identifier hs-type">block</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681167789"><span class="hs-identifier hs-type">point</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681167795"><span class="hs-identifier hs-type">query</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681167796"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-149"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="localTxMonitoringClient"><span class="annot"><span class="annottext">forall block point tip slot tx txid txerr (query :: * -&gt; *)
       (m :: * -&gt; *).
LocalNodeClientProtocols block point tip slot tx txid txerr query m
-&gt; Maybe (LocalTxMonitorClient txid tx slot m ())
</span><a href="Cardano.Api.IPC.html#localTxMonitoringClient"><span class="hs-identifier hs-var hs-var">localTxMonitoringClient</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">LocalTxMonitorClient</span></span><span> </span><span class="annot"><a href="#local-6989586621681167793"><span class="hs-identifier hs-type">txid</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681167792"><span class="hs-identifier hs-type">tx</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681167791"><span class="hs-identifier hs-type">slot</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681167796"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-150"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-151"></span><span>
</span><span id="line-152"></span><span class="hs-keyword">data</span><span> </span><span id="LocalChainSyncClient"><span class="annot"><a href="Cardano.Api.IPC.html#LocalChainSyncClient"><span class="hs-identifier hs-var">LocalChainSyncClient</span></a></span></span><span> </span><span id="local-6989586621681168180"><span class="annot"><a href="#local-6989586621681168180"><span class="hs-identifier hs-type">block</span></a></span></span><span> </span><span id="local-6989586621681168181"><span class="annot"><a href="#local-6989586621681168181"><span class="hs-identifier hs-type">point</span></a></span></span><span> </span><span id="local-6989586621681168182"><span class="annot"><a href="#local-6989586621681168182"><span class="hs-identifier hs-type">tip</span></a></span></span><span> </span><span id="local-6989586621681168183"><span class="annot"><a href="#local-6989586621681168183"><span class="hs-identifier hs-type">m</span></a></span></span><span>
</span><span id="line-153"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="NoLocalChainSyncClient"><span class="annot"><a href="Cardano.Api.IPC.html#NoLocalChainSyncClient"><span class="hs-identifier hs-var">NoLocalChainSyncClient</span></a></span></span><span>
</span><span id="line-154"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="LocalChainSyncClientPipelined"><span class="annot"><a href="Cardano.Api.IPC.html#LocalChainSyncClientPipelined"><span class="hs-identifier hs-var">LocalChainSyncClientPipelined</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ChainSyncClientPipelined</span></span><span> </span><span class="annot"><a href="#local-6989586621681168180"><span class="hs-identifier hs-type">block</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681168181"><span class="hs-identifier hs-type">point</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681168182"><span class="hs-identifier hs-type">tip</span></a></span><span>   </span><span class="annot"><a href="#local-6989586621681168183"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-155"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="LocalChainSyncClient"><span class="annot"><a href="Cardano.Api.IPC.html#LocalChainSyncClient"><span class="hs-identifier hs-var">LocalChainSyncClient</span></a></span></span><span>          </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ChainSyncClient</span></span><span>          </span><span class="annot"><a href="#local-6989586621681168180"><span class="hs-identifier hs-type">block</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681168181"><span class="hs-identifier hs-type">point</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681168182"><span class="hs-identifier hs-type">tip</span></a></span><span>   </span><span class="annot"><a href="#local-6989586621681168183"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-156"></span><span>
</span><span id="line-157"></span><span class="hs-comment">-- public, exported</span><span>
</span><span id="line-158"></span><span class="hs-keyword">type</span><span> </span><span id="LocalNodeClientProtocolsInMode"><span class="annot"><a href="Cardano.Api.IPC.html#LocalNodeClientProtocolsInMode"><span class="hs-identifier hs-var">LocalNodeClientProtocolsInMode</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-159"></span><span>  </span><span class="annot"><a href="Cardano.Api.IPC.html#LocalNodeClientProtocols"><span class="hs-identifier hs-type">LocalNodeClientProtocols</span></a></span><span>
</span><span id="line-160"></span><span>    </span><span class="annot"><a href="Cardano.Api.Block.html#BlockInMode"><span class="hs-identifier hs-type">BlockInMode</span></a></span><span>
</span><span id="line-161"></span><span>    </span><span class="annot"><a href="Cardano.Api.Block.html#ChainPoint"><span class="hs-identifier hs-type">ChainPoint</span></a></span><span>
</span><span id="line-162"></span><span>    </span><span class="annot"><a href="Cardano.Api.Block.html#ChainTip"><span class="hs-identifier hs-type">ChainTip</span></a></span><span>
</span><span id="line-163"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">SlotNo</span></span><span>
</span><span id="line-164"></span><span>    </span><span class="annot"><a href="Cardano.Api.InMode.html#TxInMode"><span class="hs-identifier hs-type">TxInMode</span></a></span><span>
</span><span id="line-165"></span><span>    </span><span class="annot"><a href="Cardano.Api.InMode.html#TxIdInMode"><span class="hs-identifier hs-type">TxIdInMode</span></a></span><span>
</span><span id="line-166"></span><span>    </span><span class="annot"><a href="Cardano.Api.InMode.html#TxValidationErrorInCardanoMode"><span class="hs-identifier hs-type">TxValidationErrorInCardanoMode</span></a></span><span>
</span><span id="line-167"></span><span>    </span><span class="annot"><a href="Cardano.Api.Query.html#QueryInMode"><span class="hs-identifier hs-type">QueryInMode</span></a></span><span>
</span><span id="line-168"></span><span>    </span><span class="annot"><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span>
</span><span id="line-169"></span><span>
</span><span id="line-170"></span><span class="hs-keyword">data</span><span> </span><span id="LocalNodeConnectInfo"><span class="annot"><a href="Cardano.Api.IPC.html#LocalNodeConnectInfo"><span class="hs-identifier hs-var">LocalNodeConnectInfo</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-171"></span><span>  </span><span id="LocalNodeConnectInfo"><span class="annot"><a href="Cardano.Api.IPC.html#LocalNodeConnectInfo"><span class="hs-identifier hs-var">LocalNodeConnectInfo</span></a></span></span><span>
</span><span id="line-172"></span><span>    </span><span class="hs-special">{</span><span> </span><span id="localConsensusModeParams"><span class="annot"><span class="annottext">LocalNodeConnectInfo -&gt; ConsensusModeParams
</span><a href="Cardano.Api.IPC.html#localConsensusModeParams"><span class="hs-identifier hs-var hs-var">localConsensusModeParams</span></a></span></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.Api.Modes.html#ConsensusModeParams"><span class="hs-identifier hs-type">ConsensusModeParams</span></a></span><span>
</span><span id="line-173"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="localNodeNetworkId"><span class="annot"><span class="annottext">LocalNodeConnectInfo -&gt; NetworkId
</span><a href="Cardano.Api.IPC.html#localNodeNetworkId"><span class="hs-identifier hs-var hs-var">localNodeNetworkId</span></a></span></span><span>        </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.Api.NetworkId.html#NetworkId"><span class="hs-identifier hs-type">NetworkId</span></a></span><span>
</span><span id="line-174"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="localNodeSocketPath"><span class="annot"><span class="annottext">LocalNodeConnectInfo -&gt; SocketPath
</span><a href="Cardano.Api.IPC.html#localNodeSocketPath"><span class="hs-identifier hs-var hs-var">localNodeSocketPath</span></a></span></span><span>       </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.Api.IO.Base.html#SocketPath"><span class="hs-identifier hs-type">SocketPath</span></a></span><span>
</span><span id="line-175"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-176"></span><span>
</span><span id="line-177"></span><span class="hs-comment">-- ----------------------------------------------------------------------------</span><span>
</span><span id="line-178"></span><span class="hs-comment">-- Actually connect to the node</span><span>
</span><span id="line-179"></span><span class="hs-comment">--</span><span>
</span><span id="line-180"></span><span>
</span><span id="line-181"></span><span class="hs-comment">-- | Establish a connection to a local node and execute the given set of</span><span>
</span><span id="line-182"></span><span class="hs-comment">-- protocol handlers.</span><span>
</span><span id="line-183"></span><span class="hs-comment">--</span><span>
</span><span id="line-184"></span><span class="annot"><a href="Cardano.Api.IPC.html#connectToLocalNode"><span class="hs-identifier hs-type">connectToLocalNode</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-185"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Cardano.Api.IPC.html#LocalNodeConnectInfo"><span class="hs-identifier hs-type">LocalNodeConnectInfo</span></a></span><span>
</span><span id="line-186"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cardano.Api.IPC.html#LocalNodeClientProtocolsInMode"><span class="hs-identifier hs-type">LocalNodeClientProtocolsInMode</span></a></span><span>
</span><span id="line-187"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-188"></span><span id="connectToLocalNode"><span class="annot"><span class="annottext">connectToLocalNode :: LocalNodeConnectInfo -&gt; LocalNodeClientProtocolsInMode -&gt; IO ()
</span><a href="Cardano.Api.IPC.html#connectToLocalNode"><span class="hs-identifier hs-var hs-var">connectToLocalNode</span></a></span></span><span> </span><span id="local-6989586621681168465"><span class="annot"><span class="annottext">LocalNodeConnectInfo
</span><a href="#local-6989586621681168465"><span class="hs-identifier hs-var">localNodeConnectInfo</span></a></span></span><span> </span><span id="local-6989586621681168466"><span class="annot"><span class="annottext">LocalNodeClientProtocolsInMode
</span><a href="#local-6989586621681168466"><span class="hs-identifier hs-var">handlers</span></a></span></span><span>
</span><span id="line-189"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LocalNodeConnectInfo
-&gt; (NodeToClientVersion -&gt; LocalNodeClientProtocolsInMode) -&gt; IO ()
</span><a href="Cardano.Api.IPC.html#connectToLocalNodeWithVersion"><span class="hs-identifier hs-var">connectToLocalNodeWithVersion</span></a></span><span> </span><span class="annot"><span class="annottext">LocalNodeConnectInfo
</span><a href="#local-6989586621681168465"><span class="hs-identifier hs-var">localNodeConnectInfo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LocalNodeClientProtocolsInMode
-&gt; NodeToClientVersion -&gt; LocalNodeClientProtocolsInMode
forall a b. a -&gt; b -&gt; a
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Base.html#const"><span class="hs-identifier hs-var">const</span></a></span><span> </span><span class="annot"><span class="annottext">LocalNodeClientProtocolsInMode
</span><a href="#local-6989586621681168466"><span class="hs-identifier hs-var">handlers</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-190"></span><span>
</span><span id="line-191"></span><span class="hs-comment">-- | Establish a connection to a local node and execute the given set of</span><span>
</span><span id="line-192"></span><span class="hs-comment">-- protocol handlers parameterized on the negotiated node-to-client protocol</span><span>
</span><span id="line-193"></span><span class="hs-comment">-- version.</span><span>
</span><span id="line-194"></span><span class="hs-comment">--</span><span>
</span><span id="line-195"></span><span class="annot"><a href="Cardano.Api.IPC.html#connectToLocalNodeWithVersion"><span class="hs-identifier hs-type">connectToLocalNodeWithVersion</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-196"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Cardano.Api.IPC.html#LocalNodeConnectInfo"><span class="hs-identifier hs-type">LocalNodeConnectInfo</span></a></span><span>
</span><span id="line-197"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">NodeToClientVersion</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cardano.Api.IPC.html#LocalNodeClientProtocolsInMode"><span class="hs-identifier hs-type">LocalNodeClientProtocolsInMode</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-198"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-199"></span><span id="connectToLocalNodeWithVersion"><span class="annot"><span class="annottext">connectToLocalNodeWithVersion :: LocalNodeConnectInfo
-&gt; (NodeToClientVersion -&gt; LocalNodeClientProtocolsInMode) -&gt; IO ()
</span><a href="Cardano.Api.IPC.html#connectToLocalNodeWithVersion"><span class="hs-identifier hs-var hs-var">connectToLocalNodeWithVersion</span></a></span></span><span> </span><span class="annot"><a href="Cardano.Api.IPC.html#LocalNodeConnectInfo"><span class="hs-identifier hs-type">LocalNodeConnectInfo</span></a></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-200"></span><span>                     </span><span id="local-6989586621681168468"><span class="annot"><span class="annottext">SocketPath
localNodeSocketPath :: LocalNodeConnectInfo -&gt; SocketPath
localNodeSocketPath :: SocketPath
</span><a href="Cardano.Api.IPC.html#localNodeSocketPath"><span class="hs-identifier hs-var hs-var">localNodeSocketPath</span></a></span></span><span class="hs-special">,</span><span>
</span><span id="line-201"></span><span>                     </span><span id="local-6989586621681168469"><span class="annot"><span class="annottext">NetworkId
localNodeNetworkId :: LocalNodeConnectInfo -&gt; NetworkId
localNodeNetworkId :: NetworkId
</span><a href="Cardano.Api.IPC.html#localNodeNetworkId"><span class="hs-identifier hs-var hs-var">localNodeNetworkId</span></a></span></span><span class="hs-special">,</span><span>
</span><span id="line-202"></span><span>                     </span><span id="local-6989586621681168470"><span class="annot"><span class="annottext">ConsensusModeParams
localConsensusModeParams :: LocalNodeConnectInfo -&gt; ConsensusModeParams
localConsensusModeParams :: ConsensusModeParams
</span><a href="Cardano.Api.IPC.html#localConsensusModeParams"><span class="hs-identifier hs-var hs-var">localConsensusModeParams</span></a></span></span><span>
</span><span id="line-203"></span><span>                   </span><span class="hs-special">}</span><span> </span><span id="local-6989586621681168471"><span class="annot"><span class="annottext">NodeToClientVersion -&gt; LocalNodeClientProtocolsInMode
</span><a href="#local-6989586621681168471"><span class="hs-identifier hs-var">clients</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-204"></span><span>    </span><span class="annot"><span class="annottext">(IOManager -&gt; IO ()) -&gt; IO ()
WithIOManager
</span><span class="hs-identifier hs-var">Net.withIOManager</span></span><span> </span><span class="annot"><span class="annottext">((IOManager -&gt; IO ()) -&gt; IO ()) -&gt; (IOManager -&gt; IO ()) -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621681168473"><span class="annot"><span class="annottext">IOManager
</span><a href="#local-6989586621681168473"><span class="hs-identifier hs-var">iomgr</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-205"></span><span>      </span><span class="annot"><span class="annottext">LocalSnocket
-&gt; NetworkConnectTracers LocalAddress NodeToClientVersion
-&gt; Versions
     NodeToClientVersion
     NodeToClientVersionData
     (OuroborosApplicationWithMinimalCtx
        'InitiatorMode LocalAddress ByteString IO () Void)
-&gt; FilePath
-&gt; IO ()
forall a b.
LocalSnocket
-&gt; NetworkConnectTracers LocalAddress NodeToClientVersion
-&gt; Versions
     NodeToClientVersion
     NodeToClientVersionData
     (OuroborosApplicationWithMinimalCtx
        'InitiatorMode LocalAddress ByteString IO a b)
-&gt; FilePath
-&gt; IO ()
</span><span class="hs-identifier hs-var">Net.connectTo</span></span><span>
</span><span id="line-206"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">IOManager -&gt; LocalSnocket
</span><span class="hs-identifier hs-var">Net.localSnocket</span></span><span> </span><span class="annot"><span class="annottext">IOManager
</span><a href="#local-6989586621681168473"><span class="hs-identifier hs-var">iomgr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-207"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Net.NetworkConnectTracers</span></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-208"></span><span>          </span><span class="annot"><span class="annottext">nctMuxTracer :: Tracer IO (WithMuxBearer (ConnectionId LocalAddress) MuxTrace)
</span><span class="hs-identifier hs-var">Net.nctMuxTracer</span></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracer IO (WithMuxBearer (ConnectionId LocalAddress) MuxTrace)
forall (m :: * -&gt; *) a. Applicative m =&gt; Tracer m a
</span><span class="hs-identifier hs-var">nullTracer</span></span><span class="hs-special">,</span><span>
</span><span id="line-209"></span><span>          </span><span class="annot"><span class="annottext">nctHandshakeTracer :: Tracer
  IO
  (WithMuxBearer
     (ConnectionId LocalAddress)
     (TraceSendRecv (Handshake NodeToClientVersion Term)))
</span><span class="hs-identifier hs-var">Net.nctHandshakeTracer</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracer
  IO
  (WithMuxBearer
     (ConnectionId LocalAddress)
     (TraceSendRecv (Handshake NodeToClientVersion Term)))
forall (m :: * -&gt; *) a. Applicative m =&gt; Tracer m a
</span><span class="hs-identifier hs-var">nullTracer</span></span><span>
</span><span id="line-210"></span><span>        </span><span class="hs-special">}</span><span>
</span><span id="line-211"></span><span>        </span><span class="annot"><span class="annottext">Versions
  NodeToClientVersion
  NodeToClientVersionData
  (OuroborosApplicationWithMinimalCtx
     'InitiatorMode LocalAddress ByteString IO () Void)
</span><a href="#local-6989586621681168479"><span class="hs-identifier hs-var">versionedProtocls</span></a></span><span>
</span><span id="line-212"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SocketPath -&gt; FilePath
forall content (direction :: FileDirection).
File content direction -&gt; FilePath
</span><a href="Cardano.Api.IO.Base.html#unFile"><span class="hs-identifier hs-var">unFile</span></a></span><span> </span><span class="annot"><span class="annottext">SocketPath
</span><a href="#local-6989586621681168468"><span class="hs-identifier hs-var">localNodeSocketPath</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-213"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-214"></span><span>    </span><span id="local-6989586621681168479"><span class="annot"><span class="annottext">versionedProtocls :: Versions
  NodeToClientVersion
  NodeToClientVersionData
  (OuroborosApplicationWithMinimalCtx
     'InitiatorMode LocalAddress ByteString IO () Void)
</span><a href="#local-6989586621681168479"><span class="hs-identifier hs-var hs-var">versionedProtocls</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-215"></span><span>      </span><span class="hs-comment">-- First convert from the mode-parametrised view of things to the</span><span>
</span><span id="line-216"></span><span>      </span><span class="hs-comment">-- block-parametrised view and then do the final setup for the versioned</span><span>
</span><span id="line-217"></span><span>      </span><span class="hs-comment">-- bundles of mini-protocols.</span><span>
</span><span id="line-218"></span><span>      </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">ConsensusModeParams
-&gt; (NodeToClientVersion -&gt; LocalNodeClientProtocolsInMode)
-&gt; LocalNodeClientParams
forall block.
(CardanoBlock StandardCrypto ~ block) =&gt;
ConsensusModeParams
-&gt; (NodeToClientVersion -&gt; LocalNodeClientProtocolsInMode)
-&gt; LocalNodeClientParams
</span><a href="Cardano.Api.IPC.html#mkLocalNodeClientParams"><span class="hs-identifier hs-var">mkLocalNodeClientParams</span></a></span><span> </span><span class="annot"><span class="annottext">ConsensusModeParams
</span><a href="#local-6989586621681168470"><span class="hs-identifier hs-var">localConsensusModeParams</span></a></span><span> </span><span class="annot"><span class="annottext">NodeToClientVersion -&gt; LocalNodeClientProtocolsInMode
</span><a href="#local-6989586621681168471"><span class="hs-identifier hs-var">clients</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-219"></span><span>        </span><span class="annot"><a href="Cardano.Api.IPC.html#LocalNodeClientParamsSingleBlock"><span class="hs-identifier hs-type">LocalNodeClientParamsSingleBlock</span></a></span><span> </span><span id="local-6989586621681168503"><span class="annot"><span class="annottext">ProtocolClientInfoArgs block
</span><a href="#local-6989586621681168503"><span class="hs-identifier hs-var">ptcl</span></a></span></span><span> </span><span id="local-6989586621681168504"><span class="annot"><span class="annottext">NodeToClientVersion -&gt; LocalNodeClientProtocolsForBlock block
</span><a href="#local-6989586621681168504"><span class="hs-identifier hs-var">clients'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-220"></span><span>          </span><span class="annot"><span class="annottext">NetworkId
-&gt; ProtocolClientInfoArgs block
-&gt; (NodeToClientVersion -&gt; LocalNodeClientProtocolsForBlock block)
-&gt; Versions
     NodeToClientVersion
     NodeToClientVersionData
     (OuroborosApplicationWithMinimalCtx
        'InitiatorMode LocalAddress ByteString IO () Void)
forall block.
(ShowQuery (Query block), ProtocolClient block) =&gt;
NetworkId
-&gt; ProtocolClientInfoArgs block
-&gt; (NodeToClientVersion -&gt; LocalNodeClientProtocolsForBlock block)
-&gt; Versions
     NodeToClientVersion
     NodeToClientVersionData
     (OuroborosApplicationWithMinimalCtx
        'InitiatorMode LocalAddress ByteString IO () Void)
</span><a href="Cardano.Api.IPC.html#mkVersionedProtocols"><span class="hs-identifier hs-var">mkVersionedProtocols</span></a></span><span> </span><span class="annot"><span class="annottext">NetworkId
</span><a href="#local-6989586621681168469"><span class="hs-identifier hs-var">localNodeNetworkId</span></a></span><span> </span><span class="annot"><span class="annottext">ProtocolClientInfoArgs block
</span><a href="#local-6989586621681168503"><span class="hs-identifier hs-var">ptcl</span></a></span><span> </span><span class="annot"><span class="annottext">NodeToClientVersion -&gt; LocalNodeClientProtocolsForBlock block
</span><a href="#local-6989586621681168504"><span class="hs-identifier hs-var">clients'</span></a></span><span>
</span><span id="line-221"></span><span>        </span><span class="annot"><a href="Cardano.Api.IPC.html#LocalNodeClientParamsCardano"><span class="hs-identifier hs-type">LocalNodeClientParamsCardano</span></a></span><span> </span><span id="local-6989586621681168519"><span class="annot"><span class="annottext">ProtocolClientInfoArgs block
</span><a href="#local-6989586621681168519"><span class="hs-identifier hs-var">ptcl</span></a></span></span><span> </span><span id="local-6989586621681168520"><span class="annot"><span class="annottext">NodeToClientVersion -&gt; LocalNodeClientProtocolsForBlock block
</span><a href="#local-6989586621681168520"><span class="hs-identifier hs-var">clients'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-222"></span><span>          </span><span class="annot"><span class="annottext">NetworkId
-&gt; ProtocolClientInfoArgs block
-&gt; (NodeToClientVersion -&gt; LocalNodeClientProtocolsForBlock block)
-&gt; Versions
     NodeToClientVersion
     NodeToClientVersionData
     (OuroborosApplicationWithMinimalCtx
        'InitiatorMode LocalAddress ByteString IO () Void)
forall block.
(ShowQuery (Query block), ProtocolClient block) =&gt;
NetworkId
-&gt; ProtocolClientInfoArgs block
-&gt; (NodeToClientVersion -&gt; LocalNodeClientProtocolsForBlock block)
-&gt; Versions
     NodeToClientVersion
     NodeToClientVersionData
     (OuroborosApplicationWithMinimalCtx
        'InitiatorMode LocalAddress ByteString IO () Void)
</span><a href="Cardano.Api.IPC.html#mkVersionedProtocols"><span class="hs-identifier hs-var">mkVersionedProtocols</span></a></span><span> </span><span class="annot"><span class="annottext">NetworkId
</span><a href="#local-6989586621681168469"><span class="hs-identifier hs-var">localNodeNetworkId</span></a></span><span> </span><span class="annot"><span class="annottext">ProtocolClientInfoArgs block
</span><a href="#local-6989586621681168519"><span class="hs-identifier hs-var">ptcl</span></a></span><span> </span><span class="annot"><span class="annottext">NodeToClientVersion -&gt; LocalNodeClientProtocolsForBlock block
</span><a href="#local-6989586621681168520"><span class="hs-identifier hs-var">clients'</span></a></span><span>
</span><span id="line-223"></span><span>
</span><span id="line-224"></span><span class="annot"><a href="Cardano.Api.IPC.html#mkVersionedProtocols"><span class="hs-identifier hs-type">mkVersionedProtocols</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621681167902"><span class="annot"><a href="#local-6989586621681167902"><span class="hs-identifier hs-type">block</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-225"></span><span>                        </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Consensus.ShowQuery</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.2/ouroboros-consensus-0.13.0.1-8aef850169985b5372495195b20258fa7e52a46bbc5e9028955791f7b5578a90/share/doc/html/src/Ouroboros.Consensus.Ledger.Query.html#Query"><span class="hs-identifier hs-type">Consensus.Query</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681167902"><span class="hs-identifier hs-type">block</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-226"></span><span>                        </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Api.Protocol.html#ProtocolClient"><span class="hs-identifier hs-type">ProtocolClient</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681167902"><span class="hs-identifier hs-type">block</span></a></span><span>
</span><span id="line-227"></span><span>                        </span><span class="hs-special">)</span><span>
</span><span id="line-228"></span><span>                     </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Cardano.Api.NetworkId.html#NetworkId"><span class="hs-identifier hs-type">NetworkId</span></a></span><span>
</span><span id="line-229"></span><span>                     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cardano.Api.Protocol.html#ProtocolClientInfoArgs"><span class="hs-identifier hs-type">ProtocolClientInfoArgs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681167902"><span class="hs-identifier hs-type">block</span></a></span><span>
</span><span id="line-230"></span><span>                     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">NodeToClientVersion</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cardano.Api.IPC.html#LocalNodeClientProtocolsForBlock"><span class="hs-identifier hs-type">LocalNodeClientProtocolsForBlock</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681167902"><span class="hs-identifier hs-type">block</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-231"></span><span>                     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Net.Versions</span></span><span>
</span><span id="line-232"></span><span>                          </span><span class="annot"><span class="hs-identifier hs-type">Net.NodeToClientVersion</span></span><span>
</span><span id="line-233"></span><span>                          </span><span class="annot"><span class="hs-identifier hs-type">Net.NodeToClientVersionData</span></span><span>
</span><span id="line-234"></span><span>                          </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Net.OuroborosApplicationWithMinimalCtx</span></span><span>
</span><span id="line-235"></span><span>                             </span><span class="annot"><span class="hs-identifier hs-type">Net.InitiatorMode</span></span><span>
</span><span id="line-236"></span><span>                             </span><span class="annot"><span class="hs-identifier hs-type">Net.LocalAddress</span></span><span>
</span><span id="line-237"></span><span>                             </span><span class="annot"><span class="hs-identifier hs-type">LBS.ByteString</span></span><span> </span><span class="annot"><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Base.html#Void"><span class="hs-identifier hs-type">Void</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-238"></span><span id="mkVersionedProtocols"><span class="annot"><span class="annottext">mkVersionedProtocols :: forall block.
(ShowQuery (Query block), ProtocolClient block) =&gt;
NetworkId
-&gt; ProtocolClientInfoArgs block
-&gt; (NodeToClientVersion -&gt; LocalNodeClientProtocolsForBlock block)
-&gt; Versions
     NodeToClientVersion
     NodeToClientVersionData
     (OuroborosApplicationWithMinimalCtx
        'InitiatorMode LocalAddress ByteString IO () Void)
</span><a href="Cardano.Api.IPC.html#mkVersionedProtocols"><span class="hs-identifier hs-var hs-var">mkVersionedProtocols</span></a></span></span><span> </span><span id="local-6989586621681168626"><span class="annot"><span class="annottext">NetworkId
</span><a href="#local-6989586621681168626"><span class="hs-identifier hs-var">networkid</span></a></span></span><span> </span><span id="local-6989586621681168627"><span class="annot"><span class="annottext">ProtocolClientInfoArgs block
</span><a href="#local-6989586621681168627"><span class="hs-identifier hs-var">ptcl</span></a></span></span><span> </span><span id="local-6989586621681168628"><span class="annot"><span class="annottext">NodeToClientVersion -&gt; LocalNodeClientProtocolsForBlock block
</span><a href="#local-6989586621681168628"><span class="hs-identifier hs-var">unversionedClients</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-239"></span><span>     </span><span class="hs-comment">--TODO: really we should construct specific combinations of</span><span>
</span><span id="line-240"></span><span>     </span><span class="hs-comment">-- protocols for the versions we know about, with different protocol</span><span>
</span><span id="line-241"></span><span>     </span><span class="hs-comment">-- versions taking different sets of typed client protocols.</span><span>
</span><span id="line-242"></span><span>    </span><span class="annot"><span class="annottext">((NodeToClientVersion, BlockNodeToClientVersion block)
 -&gt; Versions
      NodeToClientVersion
      NodeToClientVersionData
      (OuroborosApplicationWithMinimalCtx
         'InitiatorMode LocalAddress ByteString IO () Void))
-&gt; [(NodeToClientVersion, BlockNodeToClientVersion block)]
-&gt; Versions
     NodeToClientVersion
     NodeToClientVersionData
     (OuroborosApplicationWithMinimalCtx
        'InitiatorMode LocalAddress ByteString IO () Void)
forall vNum (f :: * -&gt; *) x extra r.
(Ord vNum, Foldable f, HasCallStack) =&gt;
(x -&gt; Versions vNum extra r) -&gt; f x -&gt; Versions vNum extra r
</span><span class="hs-identifier hs-var">Net.foldMapVersions</span></span><span>
</span><span id="line-243"></span><span>      </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621681168630"><span class="annot"><span class="annottext">NodeToClientVersion
</span><a href="#local-6989586621681168630"><span class="hs-identifier hs-var">ptclVersion</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681168631"><span class="annot"><span class="annottext">BlockNodeToClientVersion block
</span><a href="#local-6989586621681168631"><span class="hs-identifier hs-var">ptclBlockVersion</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-244"></span><span>          </span><span class="annot"><span class="annottext">NodeToClientVersion
-&gt; NodeToClientVersionData
-&gt; NodeToClientProtocols
     'InitiatorMode LocalAddress ByteString IO () Void
-&gt; Versions
     NodeToClientVersion
     NodeToClientVersionData
     (OuroborosApplicationWithMinimalCtx
        'InitiatorMode LocalAddress ByteString IO () Void)
forall (appType :: MuxMode) bytes (m :: * -&gt; *) a b.
NodeToClientVersion
-&gt; NodeToClientVersionData
-&gt; NodeToClientProtocols appType LocalAddress bytes m a b
-&gt; Versions
     NodeToClientVersion
     NodeToClientVersionData
     (OuroborosApplicationWithMinimalCtx
        appType LocalAddress bytes m a b)
</span><span class="hs-identifier hs-var">Net.versionedNodeToClientProtocols</span></span><span>
</span><span id="line-245"></span><span>            </span><span class="annot"><span class="annottext">NodeToClientVersion
</span><a href="#local-6989586621681168630"><span class="hs-identifier hs-var">ptclVersion</span></a></span><span>
</span><span id="line-246"></span><span>            </span><span class="annot"><span class="hs-identifier hs-type">NodeToClientVersionData</span></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-247"></span><span>              </span><span class="annot"><span class="annottext">networkMagic :: NetworkMagic
</span><span class="hs-identifier hs-var">networkMagic</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NetworkId -&gt; NetworkMagic
</span><a href="Cardano.Api.NetworkId.html#toNetworkMagic"><span class="hs-identifier hs-var">toNetworkMagic</span></a></span><span> </span><span class="annot"><span class="annottext">NetworkId
</span><a href="#local-6989586621681168626"><span class="hs-identifier hs-var">networkid</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-248"></span><span>              </span><span class="annot"><span class="annottext">query :: Bool
</span><span class="hs-identifier hs-var">query</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#False"><span class="hs-identifier hs-var">False</span></a></span><span>
</span><span id="line-249"></span><span>            </span><span class="hs-special">}</span><span>
</span><span id="line-250"></span><span>            </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LocalNodeClientProtocolsForBlock block
-&gt; BlockNodeToClientVersion block
-&gt; NodeToClientVersion
-&gt; NodeToClientProtocols
     'InitiatorMode LocalAddress ByteString IO () Void
</span><a href="#local-6989586621681168637"><span class="hs-identifier hs-var">protocols</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NodeToClientVersion -&gt; LocalNodeClientProtocolsForBlock block
</span><a href="#local-6989586621681168628"><span class="hs-identifier hs-var">unversionedClients</span></a></span><span> </span><span class="annot"><span class="annottext">NodeToClientVersion
</span><a href="#local-6989586621681168630"><span class="hs-identifier hs-var">ptclVersion</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">BlockNodeToClientVersion block
</span><a href="#local-6989586621681168631"><span class="hs-identifier hs-var">ptclBlockVersion</span></a></span><span> </span><span class="annot"><span class="annottext">NodeToClientVersion
</span><a href="#local-6989586621681168630"><span class="hs-identifier hs-var">ptclVersion</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-251"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Map NodeToClientVersion (BlockNodeToClientVersion block)
-&gt; [(NodeToClientVersion, BlockNodeToClientVersion block)]
forall k a. Map k a -&gt; [(k, a)]
</span><span class="hs-identifier hs-var">Map.toList</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy block
-&gt; Map NodeToClientVersion (BlockNodeToClientVersion block)
forall blk.
SupportedNetworkProtocolVersion blk =&gt;
Proxy blk -&gt; Map NodeToClientVersion (BlockNodeToClientVersion blk)
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.2/ouroboros-consensus-0.13.0.1-8aef850169985b5372495195b20258fa7e52a46bbc5e9028955791f7b5578a90/share/doc/html/src/Ouroboros.Consensus.Node.NetworkProtocolVersion.html#supportedNodeToClientVersions"><span class="hs-identifier hs-var">Consensus.supportedNodeToClientVersions</span></a></span><span> </span><span class="annot"><span class="annottext">Proxy block
</span><a href="#local-6989586621681168640"><span class="hs-identifier hs-var">proxy</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-252"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-253"></span><span>    </span><span class="annot"><a href="#local-6989586621681168640"><span class="hs-identifier hs-type">proxy</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/Data.Proxy.html#Proxy"><span class="hs-identifier hs-type">Proxy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681167902"><span class="hs-identifier hs-type">block</span></a></span><span>
</span><span id="line-254"></span><span>    </span><span id="local-6989586621681168640"><span class="annot"><span class="annottext">proxy :: Proxy block
</span><a href="#local-6989586621681168640"><span class="hs-identifier hs-var hs-var">proxy</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Proxy block
forall {k} (t :: k). Proxy t
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/Data.Proxy.html#Proxy"><span class="hs-identifier hs-var">Proxy</span></a></span><span>
</span><span id="line-255"></span><span>
</span><span id="line-256"></span><span>    </span><span class="annot"><a href="#local-6989586621681168637"><span class="hs-identifier hs-type">protocols</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.Api.IPC.html#LocalNodeClientProtocolsForBlock"><span class="hs-identifier hs-type">LocalNodeClientProtocolsForBlock</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681167902"><span class="hs-identifier hs-type">block</span></a></span><span>
</span><span id="line-257"></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.2/ouroboros-consensus-0.13.0.1-8aef850169985b5372495195b20258fa7e52a46bbc5e9028955791f7b5578a90/share/doc/html/src/Ouroboros.Consensus.Node.NetworkProtocolVersion.html#BlockNodeToClientVersion"><span class="hs-identifier hs-type">Consensus.BlockNodeToClientVersion</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681167902"><span class="hs-identifier hs-type">block</span></a></span><span>
</span><span id="line-258"></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">NodeToClientVersion</span></span><span>
</span><span id="line-259"></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">NodeToClientProtocols</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Net.InitiatorMode</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Net.LocalAddress</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">LBS.ByteString</span></span><span> </span><span class="annot"><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Base.html#Void"><span class="hs-identifier hs-type">Void</span></a></span><span>
</span><span id="line-260"></span><span>    </span><span id="local-6989586621681168637"><span class="annot"><span class="annottext">protocols :: LocalNodeClientProtocolsForBlock block
-&gt; BlockNodeToClientVersion block
-&gt; NodeToClientVersion
-&gt; NodeToClientProtocols
     'InitiatorMode LocalAddress ByteString IO () Void
</span><a href="#local-6989586621681168637"><span class="hs-identifier hs-var hs-var">protocols</span></a></span></span><span>
</span><span id="line-261"></span><span>      </span><span class="annot"><a href="Cardano.Api.IPC.html#LocalNodeClientProtocolsForBlock"><span class="hs-identifier hs-type">LocalNodeClientProtocolsForBlock</span></a></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-262"></span><span>        </span><span id="local-6989586621681168643"><span class="annot"><span class="annottext">LocalChainSyncClient block (Point block) (Tip block) IO
localChainSyncClientForBlock :: LocalChainSyncClient block (Point block) (Tip block) IO
localChainSyncClientForBlock :: forall block.
LocalNodeClientProtocolsForBlock block
-&gt; LocalChainSyncClient block (Point block) (Tip block) IO
</span><a href="#local-6989586621681168643"><span class="hs-identifier hs-var hs-var">localChainSyncClientForBlock</span></a></span></span><span class="hs-special">,</span><span>
</span><span id="line-263"></span><span>        </span><span id="local-6989586621681168645"><span class="annot"><span class="annottext">Maybe
  (LocalTxSubmissionClient (GenTx block) (ApplyTxErr block) IO ())
localTxSubmissionClientForBlock :: Maybe
  (LocalTxSubmissionClient (GenTx block) (ApplyTxErr block) IO ())
localTxSubmissionClientForBlock :: forall block.
LocalNodeClientProtocolsForBlock block
-&gt; Maybe
     (LocalTxSubmissionClient (GenTx block) (ApplyTxErr block) IO ())
</span><a href="#local-6989586621681168645"><span class="hs-identifier hs-var hs-var">localTxSubmissionClientForBlock</span></a></span></span><span class="hs-special">,</span><span>
</span><span id="line-264"></span><span>        </span><span id="local-6989586621681168647"><span class="annot"><span class="annottext">Maybe
  (LocalStateQueryClient block (Point block) (Query block) IO ())
localStateQueryClientForBlock :: Maybe
  (LocalStateQueryClient block (Point block) (Query block) IO ())
localStateQueryClientForBlock :: forall block.
LocalNodeClientProtocolsForBlock block
-&gt; Maybe
     (LocalStateQueryClient block (Point block) (Query block) IO ())
</span><a href="#local-6989586621681168647"><span class="hs-identifier hs-var hs-var">localStateQueryClientForBlock</span></a></span></span><span class="hs-special">,</span><span>
</span><span id="line-265"></span><span>        </span><span id="local-6989586621681168649"><span class="annot"><span class="annottext">Maybe
  (LocalTxMonitorClient (GenTxId block) (GenTx block) SlotNo IO ())
localTxMonitoringClientForBlock :: Maybe
  (LocalTxMonitorClient (GenTxId block) (GenTx block) SlotNo IO ())
localTxMonitoringClientForBlock :: forall block.
LocalNodeClientProtocolsForBlock block
-&gt; Maybe
     (LocalTxMonitorClient
        (TxId (GenTx block)) (GenTx block) SlotNo IO ())
</span><a href="#local-6989586621681168649"><span class="hs-identifier hs-var hs-var">localTxMonitoringClientForBlock</span></a></span></span><span>
</span><span id="line-266"></span><span>      </span><span class="hs-special">}</span><span>
</span><span id="line-267"></span><span>      </span><span id="local-6989586621681168651"><span class="annot"><span class="annottext">BlockNodeToClientVersion block
</span><a href="#local-6989586621681168651"><span class="hs-identifier hs-var">ptclBlockVersion</span></a></span></span><span>
</span><span id="line-268"></span><span>      </span><span id="local-6989586621681168652"><span class="annot"><span class="annottext">NodeToClientVersion
</span><a href="#local-6989586621681168652"><span class="hs-identifier hs-var">ptclVersion</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-269"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">NodeToClientProtocols</span></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-270"></span><span>          </span><span class="annot"><span class="annottext">localChainSyncProtocol :: RunMiniProtocolWithMinimalCtx
  'InitiatorMode LocalAddress ByteString IO () Void
</span><span class="hs-identifier hs-var">localChainSyncProtocol</span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-271"></span><span>            </span><span class="annot"><span class="annottext">MiniProtocolCb
  (MinimalInitiatorContext LocalAddress) ByteString IO ()
-&gt; RunMiniProtocolWithMinimalCtx
     'InitiatorMode LocalAddress ByteString IO () Void
forall initiatorCtx bytes (m :: * -&gt; *) a responderCtx.
MiniProtocolCb initiatorCtx bytes m a
-&gt; RunMiniProtocol
     'InitiatorMode initiatorCtx responderCtx bytes m a Void
</span><span class="hs-identifier hs-var">Net.InitiatorProtocolOnly</span></span><span> </span><span class="annot"><span class="annottext">(MiniProtocolCb
   (MinimalInitiatorContext LocalAddress) ByteString IO ()
 -&gt; RunMiniProtocolWithMinimalCtx
      'InitiatorMode LocalAddress ByteString IO () Void)
-&gt; MiniProtocolCb
     (MinimalInitiatorContext LocalAddress) ByteString IO ()
-&gt; RunMiniProtocolWithMinimalCtx
     'InitiatorMode LocalAddress ByteString IO () Void
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">LocalChainSyncClient block (Point block) (Tip block) IO
</span><a href="#local-6989586621681168643"><span class="hs-identifier hs-var">localChainSyncClientForBlock</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-272"></span><span>              </span><span class="annot"><span class="annottext">LocalChainSyncClient block (Point block) (Tip block) IO
</span><a href="Cardano.Api.IPC.html#NoLocalChainSyncClient"><span class="hs-identifier hs-var">NoLocalChainSyncClient</span></a></span><span>
</span><span id="line-273"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(MinimalInitiatorContext LocalAddress
 -&gt; (Tracer
       IO (TraceSendRecv (ChainSync block (Point block) (Tip block))),
     Codec
       (ChainSync block (Point block) (Tip block))
       DeserialiseFailure
       IO
       ByteString,
     Peer
       (ChainSync block (Point block) (Tip block))
       'AsClient
       'StIdle
       IO
       ()))
-&gt; MiniProtocolCb
     (MinimalInitiatorContext LocalAddress) ByteString IO ()
forall (pr :: PeerRole) ps (st :: ps) failure bytes ctx
       (m :: * -&gt; *) a.
(MonadThrow m, Show failure,
 forall (st' :: ps). Show (ClientHasAgency st'),
 forall (st' :: ps). Show (ServerHasAgency st'), ShowProxy ps) =&gt;
(ctx
 -&gt; (Tracer m (TraceSendRecv ps), Codec ps failure m bytes,
     Peer ps pr st m a))
-&gt; MiniProtocolCb ctx bytes m a
</span><span class="hs-identifier hs-var">Net.mkMiniProtocolCbFromPeer</span></span><span> </span><span class="annot"><span class="annottext">((MinimalInitiatorContext LocalAddress
  -&gt; (Tracer
        IO (TraceSendRecv (ChainSync block (Point block) (Tip block))),
      Codec
        (ChainSync block (Point block) (Tip block))
        DeserialiseFailure
        IO
        ByteString,
      Peer
        (ChainSync block (Point block) (Tip block))
        'AsClient
        'StIdle
        IO
        ()))
 -&gt; MiniProtocolCb
      (MinimalInitiatorContext LocalAddress) ByteString IO ())
-&gt; (MinimalInitiatorContext LocalAddress
    -&gt; (Tracer
          IO (TraceSendRecv (ChainSync block (Point block) (Tip block))),
        Codec
          (ChainSync block (Point block) (Tip block))
          DeserialiseFailure
          IO
          ByteString,
        Peer
          (ChainSync block (Point block) (Tip block))
          'AsClient
          'StIdle
          IO
          ()))
-&gt; MiniProtocolCb
     (MinimalInitiatorContext LocalAddress) ByteString IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">(Tracer
   IO (TraceSendRecv (ChainSync block (Point block) (Tip block))),
 Codec
   (ChainSync block (Point block) (Tip block))
   DeserialiseFailure
   IO
   ByteString,
 Peer
   (ChainSync block (Point block) (Tip block))
   'AsClient
   'StIdle
   IO
   ())
-&gt; MinimalInitiatorContext LocalAddress
-&gt; (Tracer
      IO (TraceSendRecv (ChainSync block (Point block) (Tip block))),
    Codec
      (ChainSync block (Point block) (Tip block))
      DeserialiseFailure
      IO
      ByteString,
    Peer
      (ChainSync block (Point block) (Tip block))
      'AsClient
      'StIdle
      IO
      ())
forall a b. a -&gt; b -&gt; a
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Base.html#const"><span class="hs-identifier hs-var">const</span></a></span><span>
</span><span id="line-274"></span><span>                   </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Tracer
  IO (TraceSendRecv (ChainSync block (Point block) (Tip block)))
forall (m :: * -&gt; *) a. Applicative m =&gt; Tracer m a
</span><span class="hs-identifier hs-var">nullTracer</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Codec
  (ChainSync block (Point block) (Tip block))
  DeserialiseFailure
  IO
  ByteString
</span><a href="#local-6989586621681168657"><span class="hs-identifier hs-var">cChainSyncCodec</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Peer
  (ChainSync block (Point block) (Tip block)) 'AsClient 'StIdle IO ()
forall header point tip (m :: * -&gt; *) a.
MonadDelay m =&gt;
Peer (ChainSync header point tip) 'AsClient 'StIdle m a
</span><span class="hs-identifier hs-var">Net.chainSyncPeerNull</span></span><span class="hs-special">)</span><span>
</span><span id="line-275"></span><span>              </span><span class="annot"><a href="Cardano.Api.IPC.html#LocalChainSyncClient"><span class="hs-identifier hs-type">LocalChainSyncClient</span></a></span><span> </span><span id="local-6989586621681168659"><span class="annot"><span class="annottext">ChainSyncClient block (Point block) (Tip block) IO ()
</span><a href="#local-6989586621681168659"><span class="hs-identifier hs-var">client</span></a></span></span><span>
</span><span id="line-276"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(MinimalInitiatorContext LocalAddress
 -&gt; (Tracer
       IO (TraceSendRecv (ChainSync block (Point block) (Tip block))),
     Codec
       (ChainSync block (Point block) (Tip block))
       DeserialiseFailure
       IO
       ByteString,
     Peer
       (ChainSync block (Point block) (Tip block))
       'AsClient
       'StIdle
       IO
       ()))
-&gt; MiniProtocolCb
     (MinimalInitiatorContext LocalAddress) ByteString IO ()
forall (pr :: PeerRole) ps (st :: ps) failure bytes ctx
       (m :: * -&gt; *) a.
(MonadThrow m, Show failure,
 forall (st' :: ps). Show (ClientHasAgency st'),
 forall (st' :: ps). Show (ServerHasAgency st'), ShowProxy ps) =&gt;
(ctx
 -&gt; (Tracer m (TraceSendRecv ps), Codec ps failure m bytes,
     Peer ps pr st m a))
-&gt; MiniProtocolCb ctx bytes m a
</span><span class="hs-identifier hs-var">Net.mkMiniProtocolCbFromPeer</span></span><span> </span><span class="annot"><span class="annottext">((MinimalInitiatorContext LocalAddress
  -&gt; (Tracer
        IO (TraceSendRecv (ChainSync block (Point block) (Tip block))),
      Codec
        (ChainSync block (Point block) (Tip block))
        DeserialiseFailure
        IO
        ByteString,
      Peer
        (ChainSync block (Point block) (Tip block))
        'AsClient
        'StIdle
        IO
        ()))
 -&gt; MiniProtocolCb
      (MinimalInitiatorContext LocalAddress) ByteString IO ())
-&gt; (MinimalInitiatorContext LocalAddress
    -&gt; (Tracer
          IO (TraceSendRecv (ChainSync block (Point block) (Tip block))),
        Codec
          (ChainSync block (Point block) (Tip block))
          DeserialiseFailure
          IO
          ByteString,
        Peer
          (ChainSync block (Point block) (Tip block))
          'AsClient
          'StIdle
          IO
          ()))
-&gt; MiniProtocolCb
     (MinimalInitiatorContext LocalAddress) ByteString IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">(Tracer
   IO (TraceSendRecv (ChainSync block (Point block) (Tip block))),
 Codec
   (ChainSync block (Point block) (Tip block))
   DeserialiseFailure
   IO
   ByteString,
 Peer
   (ChainSync block (Point block) (Tip block))
   'AsClient
   'StIdle
   IO
   ())
-&gt; MinimalInitiatorContext LocalAddress
-&gt; (Tracer
      IO (TraceSendRecv (ChainSync block (Point block) (Tip block))),
    Codec
      (ChainSync block (Point block) (Tip block))
      DeserialiseFailure
      IO
      ByteString,
    Peer
      (ChainSync block (Point block) (Tip block))
      'AsClient
      'StIdle
      IO
      ())
forall a b. a -&gt; b -&gt; a
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Base.html#const"><span class="hs-identifier hs-var">const</span></a></span><span>
</span><span id="line-277"></span><span>                   </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Tracer
  IO (TraceSendRecv (ChainSync block (Point block) (Tip block)))
forall (m :: * -&gt; *) a. Applicative m =&gt; Tracer m a
</span><span class="hs-identifier hs-var">nullTracer</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Codec
  (ChainSync block (Point block) (Tip block))
  DeserialiseFailure
  IO
  ByteString
</span><a href="#local-6989586621681168657"><span class="hs-identifier hs-var">cChainSyncCodec</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ChainSyncClient block (Point block) (Tip block) IO ()
-&gt; Peer
     (ChainSync block (Point block) (Tip block)) 'AsClient 'StIdle IO ()
forall header point tip (m :: * -&gt; *) a.
Monad m =&gt;
ChainSyncClient header point tip m a
-&gt; Peer (ChainSync header point tip) 'AsClient 'StIdle m a
</span><span class="hs-identifier hs-var">Net.Sync.chainSyncClientPeer</span></span><span> </span><span class="annot"><span class="annottext">ChainSyncClient block (Point block) (Tip block) IO ()
</span><a href="#local-6989586621681168659"><span class="hs-identifier hs-var">client</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-278"></span><span>              </span><span class="annot"><a href="Cardano.Api.IPC.html#LocalChainSyncClientPipelined"><span class="hs-identifier hs-type">LocalChainSyncClientPipelined</span></a></span><span> </span><span id="local-6989586621681168661"><span class="annot"><span class="annottext">ChainSyncClientPipelined block (Point block) (Tip block) IO ()
</span><a href="#local-6989586621681168661"><span class="hs-identifier hs-var">clientPipelined</span></a></span></span><span>
</span><span id="line-279"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(MinimalInitiatorContext LocalAddress
 -&gt; (Tracer
       IO (TraceSendRecv (ChainSync block (Point block) (Tip block))),
     Codec
       (ChainSync block (Point block) (Tip block))
       DeserialiseFailure
       IO
       ByteString,
     PeerPipelined
       (ChainSync block (Point block) (Tip block))
       'AsClient
       'StIdle
       IO
       ()))
-&gt; MiniProtocolCb
     (MinimalInitiatorContext LocalAddress) ByteString IO ()
forall (pr :: PeerRole) ps (st :: ps) failure ctx bytes
       (m :: * -&gt; *) a.
(MonadAsync m, MonadThrow m, Show failure,
 forall (st' :: ps). Show (ClientHasAgency st'),
 forall (st' :: ps). Show (ServerHasAgency st'), ShowProxy ps) =&gt;
(ctx
 -&gt; (Tracer m (TraceSendRecv ps), Codec ps failure m bytes,
     PeerPipelined ps pr st m a))
-&gt; MiniProtocolCb ctx bytes m a
</span><span class="hs-identifier hs-var">Net.mkMiniProtocolCbFromPeerPipelined</span></span><span> </span><span class="annot"><span class="annottext">((MinimalInitiatorContext LocalAddress
  -&gt; (Tracer
        IO (TraceSendRecv (ChainSync block (Point block) (Tip block))),
      Codec
        (ChainSync block (Point block) (Tip block))
        DeserialiseFailure
        IO
        ByteString,
      PeerPipelined
        (ChainSync block (Point block) (Tip block))
        'AsClient
        'StIdle
        IO
        ()))
 -&gt; MiniProtocolCb
      (MinimalInitiatorContext LocalAddress) ByteString IO ())
-&gt; (MinimalInitiatorContext LocalAddress
    -&gt; (Tracer
          IO (TraceSendRecv (ChainSync block (Point block) (Tip block))),
        Codec
          (ChainSync block (Point block) (Tip block))
          DeserialiseFailure
          IO
          ByteString,
        PeerPipelined
          (ChainSync block (Point block) (Tip block))
          'AsClient
          'StIdle
          IO
          ()))
-&gt; MiniProtocolCb
     (MinimalInitiatorContext LocalAddress) ByteString IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">(Tracer
   IO (TraceSendRecv (ChainSync block (Point block) (Tip block))),
 Codec
   (ChainSync block (Point block) (Tip block))
   DeserialiseFailure
   IO
   ByteString,
 PeerPipelined
   (ChainSync block (Point block) (Tip block))
   'AsClient
   'StIdle
   IO
   ())
-&gt; MinimalInitiatorContext LocalAddress
-&gt; (Tracer
      IO (TraceSendRecv (ChainSync block (Point block) (Tip block))),
    Codec
      (ChainSync block (Point block) (Tip block))
      DeserialiseFailure
      IO
      ByteString,
    PeerPipelined
      (ChainSync block (Point block) (Tip block))
      'AsClient
      'StIdle
      IO
      ())
forall a b. a -&gt; b -&gt; a
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Base.html#const"><span class="hs-identifier hs-var">const</span></a></span><span>
</span><span id="line-280"></span><span>                   </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Tracer
  IO (TraceSendRecv (ChainSync block (Point block) (Tip block)))
forall (m :: * -&gt; *) a. Applicative m =&gt; Tracer m a
</span><span class="hs-identifier hs-var">nullTracer</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Codec
  (ChainSync block (Point block) (Tip block))
  DeserialiseFailure
  IO
  ByteString
</span><a href="#local-6989586621681168657"><span class="hs-identifier hs-var">cChainSyncCodec</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ChainSyncClientPipelined block (Point block) (Tip block) IO ()
-&gt; PeerPipelined
     (ChainSync block (Point block) (Tip block)) 'AsClient 'StIdle IO ()
forall header point tip (m :: * -&gt; *) a.
Monad m =&gt;
ChainSyncClientPipelined header point tip m a
-&gt; PeerPipelined (ChainSync header point tip) 'AsClient 'StIdle m a
</span><span class="hs-identifier hs-var">Net.SyncP.chainSyncClientPeerPipelined</span></span><span> </span><span class="annot"><span class="annottext">ChainSyncClientPipelined block (Point block) (Tip block) IO ()
</span><a href="#local-6989586621681168661"><span class="hs-identifier hs-var">clientPipelined</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-281"></span><span>
</span><span id="line-282"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">localTxSubmissionProtocol :: RunMiniProtocolWithMinimalCtx
  'InitiatorMode LocalAddress ByteString IO () Void
</span><span class="hs-identifier hs-var">localTxSubmissionProtocol</span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-283"></span><span>            </span><span class="annot"><span class="annottext">MiniProtocolCb
  (MinimalInitiatorContext LocalAddress) ByteString IO ()
-&gt; RunMiniProtocolWithMinimalCtx
     'InitiatorMode LocalAddress ByteString IO () Void
forall initiatorCtx bytes (m :: * -&gt; *) a responderCtx.
MiniProtocolCb initiatorCtx bytes m a
-&gt; RunMiniProtocol
     'InitiatorMode initiatorCtx responderCtx bytes m a Void
</span><span class="hs-identifier hs-var">Net.InitiatorProtocolOnly</span></span><span> </span><span class="annot"><span class="annottext">(MiniProtocolCb
   (MinimalInitiatorContext LocalAddress) ByteString IO ()
 -&gt; RunMiniProtocolWithMinimalCtx
      'InitiatorMode LocalAddress ByteString IO () Void)
-&gt; MiniProtocolCb
     (MinimalInitiatorContext LocalAddress) ByteString IO ()
-&gt; RunMiniProtocolWithMinimalCtx
     'InitiatorMode LocalAddress ByteString IO () Void
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-284"></span><span>              </span><span class="annot"><span class="annottext">(MinimalInitiatorContext LocalAddress
 -&gt; (Tracer
       IO
       (TraceSendRecv
          (LocalTxSubmission (GenTx block) (ApplyTxErr block))),
     Codec
       (LocalTxSubmission (GenTx block) (ApplyTxErr block))
       DeserialiseFailure
       IO
       ByteString,
     Peer
       (LocalTxSubmission (GenTx block) (ApplyTxErr block))
       'AsClient
       'StIdle
       IO
       ()))
-&gt; MiniProtocolCb
     (MinimalInitiatorContext LocalAddress) ByteString IO ()
forall (pr :: PeerRole) ps (st :: ps) failure bytes ctx
       (m :: * -&gt; *) a.
(MonadThrow m, Show failure,
 forall (st' :: ps). Show (ClientHasAgency st'),
 forall (st' :: ps). Show (ServerHasAgency st'), ShowProxy ps) =&gt;
(ctx
 -&gt; (Tracer m (TraceSendRecv ps), Codec ps failure m bytes,
     Peer ps pr st m a))
-&gt; MiniProtocolCb ctx bytes m a
</span><span class="hs-identifier hs-var">Net.mkMiniProtocolCbFromPeer</span></span><span> </span><span class="annot"><span class="annottext">((MinimalInitiatorContext LocalAddress
  -&gt; (Tracer
        IO
        (TraceSendRecv
           (LocalTxSubmission (GenTx block) (ApplyTxErr block))),
      Codec
        (LocalTxSubmission (GenTx block) (ApplyTxErr block))
        DeserialiseFailure
        IO
        ByteString,
      Peer
        (LocalTxSubmission (GenTx block) (ApplyTxErr block))
        'AsClient
        'StIdle
        IO
        ()))
 -&gt; MiniProtocolCb
      (MinimalInitiatorContext LocalAddress) ByteString IO ())
-&gt; (MinimalInitiatorContext LocalAddress
    -&gt; (Tracer
          IO
          (TraceSendRecv
             (LocalTxSubmission (GenTx block) (ApplyTxErr block))),
        Codec
          (LocalTxSubmission (GenTx block) (ApplyTxErr block))
          DeserialiseFailure
          IO
          ByteString,
        Peer
          (LocalTxSubmission (GenTx block) (ApplyTxErr block))
          'AsClient
          'StIdle
          IO
          ()))
-&gt; MiniProtocolCb
     (MinimalInitiatorContext LocalAddress) ByteString IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">(Tracer
   IO
   (TraceSendRecv
      (LocalTxSubmission (GenTx block) (ApplyTxErr block))),
 Codec
   (LocalTxSubmission (GenTx block) (ApplyTxErr block))
   DeserialiseFailure
   IO
   ByteString,
 Peer
   (LocalTxSubmission (GenTx block) (ApplyTxErr block))
   'AsClient
   'StIdle
   IO
   ())
-&gt; MinimalInitiatorContext LocalAddress
-&gt; (Tracer
      IO
      (TraceSendRecv
         (LocalTxSubmission (GenTx block) (ApplyTxErr block))),
    Codec
      (LocalTxSubmission (GenTx block) (ApplyTxErr block))
      DeserialiseFailure
      IO
      ByteString,
    Peer
      (LocalTxSubmission (GenTx block) (ApplyTxErr block))
      'AsClient
      'StIdle
      IO
      ())
forall a b. a -&gt; b -&gt; a
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Base.html#const"><span class="hs-identifier hs-var">const</span></a></span><span>
</span><span id="line-285"></span><span>                </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">Tracer
  IO
  (TraceSendRecv
     (LocalTxSubmission (GenTx block) (ApplyTxErr block)))
forall (m :: * -&gt; *) a. Applicative m =&gt; Tracer m a
</span><span class="hs-identifier hs-var">nullTracer</span></span><span>
</span><span id="line-286"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Codec
  (LocalTxSubmission (GenTx block) (ApplyTxErr block))
  DeserialiseFailure
  IO
  ByteString
</span><a href="#local-6989586621681168665"><span class="hs-identifier hs-var">cTxSubmissionCodec</span></a></span><span>
</span><span id="line-287"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Peer
  (LocalTxSubmission (GenTx block) (ApplyTxErr block))
  'AsClient
  'StIdle
  IO
  ()
-&gt; (LocalTxSubmissionClient (GenTx block) (ApplyTxErr block) IO ()
    -&gt; Peer
         (LocalTxSubmission (GenTx block) (ApplyTxErr block))
         'AsClient
         'StIdle
         IO
         ())
-&gt; Maybe
     (LocalTxSubmissionClient (GenTx block) (ApplyTxErr block) IO ())
-&gt; Peer
     (LocalTxSubmission (GenTx block) (ApplyTxErr block))
     'AsClient
     'StIdle
     IO
     ()
forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/Data.Maybe.html#maybe"><span class="hs-identifier hs-var">maybe</span></a></span><span> </span><span class="annot"><span class="annottext">Peer
  (LocalTxSubmission (GenTx block) (ApplyTxErr block))
  'AsClient
  'StIdle
  IO
  ()
forall tx reject (m :: * -&gt; *) a.
MonadDelay m =&gt;
Peer (LocalTxSubmission tx reject) 'AsClient 'StIdle m a
</span><span class="hs-identifier hs-var">Net.localTxSubmissionPeerNull</span></span><span>
</span><span id="line-288"></span><span>                        </span><span class="annot"><span class="annottext">LocalTxSubmissionClient (GenTx block) (ApplyTxErr block) IO ()
-&gt; Peer
     (LocalTxSubmission (GenTx block) (ApplyTxErr block))
     'AsClient
     'StIdle
     IO
     ()
forall tx reject (m :: * -&gt; *) a.
Monad m =&gt;
LocalTxSubmissionClient tx reject m a
-&gt; Peer (LocalTxSubmission tx reject) 'AsClient 'StIdle m a
</span><span class="hs-identifier hs-var">Net.Tx.localTxSubmissionClientPeer</span></span><span>
</span><span id="line-289"></span><span>                        </span><span class="annot"><span class="annottext">Maybe
  (LocalTxSubmissionClient (GenTx block) (ApplyTxErr block) IO ())
</span><a href="#local-6989586621681168645"><span class="hs-identifier hs-var">localTxSubmissionClientForBlock</span></a></span><span>
</span><span id="line-290"></span><span>                </span><span class="hs-special">)</span><span>
</span><span id="line-291"></span><span>
</span><span id="line-292"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">localStateQueryProtocol :: RunMiniProtocolWithMinimalCtx
  'InitiatorMode LocalAddress ByteString IO () Void
</span><span class="hs-identifier hs-var">localStateQueryProtocol</span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-293"></span><span>            </span><span class="annot"><span class="annottext">MiniProtocolCb
  (MinimalInitiatorContext LocalAddress) ByteString IO ()
-&gt; RunMiniProtocolWithMinimalCtx
     'InitiatorMode LocalAddress ByteString IO () Void
forall initiatorCtx bytes (m :: * -&gt; *) a responderCtx.
MiniProtocolCb initiatorCtx bytes m a
-&gt; RunMiniProtocol
     'InitiatorMode initiatorCtx responderCtx bytes m a Void
</span><span class="hs-identifier hs-var">Net.InitiatorProtocolOnly</span></span><span> </span><span class="annot"><span class="annottext">(MiniProtocolCb
   (MinimalInitiatorContext LocalAddress) ByteString IO ()
 -&gt; RunMiniProtocolWithMinimalCtx
      'InitiatorMode LocalAddress ByteString IO () Void)
-&gt; MiniProtocolCb
     (MinimalInitiatorContext LocalAddress) ByteString IO ()
-&gt; RunMiniProtocolWithMinimalCtx
     'InitiatorMode LocalAddress ByteString IO () Void
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-294"></span><span>              </span><span class="annot"><span class="annottext">(MinimalInitiatorContext LocalAddress
 -&gt; (Tracer
       IO
       (TraceSendRecv
          (LocalStateQuery block (Point block) (Query block))),
     Codec
       (LocalStateQuery block (Point block) (Query block))
       DeserialiseFailure
       IO
       ByteString,
     Peer
       (LocalStateQuery block (Point block) (Query block))
       'AsClient
       'StIdle
       IO
       ()))
-&gt; MiniProtocolCb
     (MinimalInitiatorContext LocalAddress) ByteString IO ()
forall (pr :: PeerRole) ps (st :: ps) failure bytes ctx
       (m :: * -&gt; *) a.
(MonadThrow m, Show failure,
 forall (st' :: ps). Show (ClientHasAgency st'),
 forall (st' :: ps). Show (ServerHasAgency st'), ShowProxy ps) =&gt;
(ctx
 -&gt; (Tracer m (TraceSendRecv ps), Codec ps failure m bytes,
     Peer ps pr st m a))
-&gt; MiniProtocolCb ctx bytes m a
</span><span class="hs-identifier hs-var">Net.mkMiniProtocolCbFromPeer</span></span><span> </span><span class="annot"><span class="annottext">((MinimalInitiatorContext LocalAddress
  -&gt; (Tracer
        IO
        (TraceSendRecv
           (LocalStateQuery block (Point block) (Query block))),
      Codec
        (LocalStateQuery block (Point block) (Query block))
        DeserialiseFailure
        IO
        ByteString,
      Peer
        (LocalStateQuery block (Point block) (Query block))
        'AsClient
        'StIdle
        IO
        ()))
 -&gt; MiniProtocolCb
      (MinimalInitiatorContext LocalAddress) ByteString IO ())
-&gt; (MinimalInitiatorContext LocalAddress
    -&gt; (Tracer
          IO
          (TraceSendRecv
             (LocalStateQuery block (Point block) (Query block))),
        Codec
          (LocalStateQuery block (Point block) (Query block))
          DeserialiseFailure
          IO
          ByteString,
        Peer
          (LocalStateQuery block (Point block) (Query block))
          'AsClient
          'StIdle
          IO
          ()))
-&gt; MiniProtocolCb
     (MinimalInitiatorContext LocalAddress) ByteString IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">(Tracer
   IO
   (TraceSendRecv
      (LocalStateQuery block (Point block) (Query block))),
 Codec
   (LocalStateQuery block (Point block) (Query block))
   DeserialiseFailure
   IO
   ByteString,
 Peer
   (LocalStateQuery block (Point block) (Query block))
   'AsClient
   'StIdle
   IO
   ())
-&gt; MinimalInitiatorContext LocalAddress
-&gt; (Tracer
      IO
      (TraceSendRecv
         (LocalStateQuery block (Point block) (Query block))),
    Codec
      (LocalStateQuery block (Point block) (Query block))
      DeserialiseFailure
      IO
      ByteString,
    Peer
      (LocalStateQuery block (Point block) (Query block))
      'AsClient
      'StIdle
      IO
      ())
forall a b. a -&gt; b -&gt; a
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Base.html#const"><span class="hs-identifier hs-var">const</span></a></span><span>
</span><span id="line-295"></span><span>                </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">Tracer
  IO
  (TraceSendRecv (LocalStateQuery block (Point block) (Query block)))
forall (m :: * -&gt; *) a. Applicative m =&gt; Tracer m a
</span><span class="hs-identifier hs-var">nullTracer</span></span><span>
</span><span id="line-296"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Codec
  (LocalStateQuery block (Point block) (Query block))
  DeserialiseFailure
  IO
  ByteString
</span><a href="#local-6989586621681168670"><span class="hs-identifier hs-var">cStateQueryCodec</span></a></span><span>
</span><span id="line-297"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Peer
  (LocalStateQuery block (Point block) (Query block))
  'AsClient
  'StIdle
  IO
  ()
-&gt; (LocalStateQueryClient block (Point block) (Query block) IO ()
    -&gt; Peer
         (LocalStateQuery block (Point block) (Query block))
         'AsClient
         'StIdle
         IO
         ())
-&gt; Maybe
     (LocalStateQueryClient block (Point block) (Query block) IO ())
-&gt; Peer
     (LocalStateQuery block (Point block) (Query block))
     'AsClient
     'StIdle
     IO
     ()
forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/Data.Maybe.html#maybe"><span class="hs-identifier hs-var">maybe</span></a></span><span> </span><span class="annot"><span class="annottext">Peer
  (LocalStateQuery block (Point block) (Query block))
  'AsClient
  'StIdle
  IO
  ()
forall block point (query :: * -&gt; *) (m :: * -&gt; *) a.
MonadDelay m =&gt;
Peer (LocalStateQuery block point query) 'AsClient 'StIdle m a
</span><span class="hs-identifier hs-var">Net.localStateQueryPeerNull</span></span><span>
</span><span id="line-298"></span><span>                        </span><span class="annot"><span class="annottext">LocalStateQueryClient block (Point block) (Query block) IO ()
-&gt; Peer
     (LocalStateQuery block (Point block) (Query block))
     'AsClient
     'StIdle
     IO
     ()
forall block point (query :: * -&gt; *) (m :: * -&gt; *) a.
Monad m =&gt;
LocalStateQueryClient block point query m a
-&gt; Peer (LocalStateQuery block point query) 'AsClient 'StIdle m a
</span><span class="hs-identifier hs-var">Net.Query.localStateQueryClientPeer</span></span><span>
</span><span id="line-299"></span><span>                        </span><span class="annot"><span class="annottext">Maybe
  (LocalStateQueryClient block (Point block) (Query block) IO ())
</span><a href="#local-6989586621681168647"><span class="hs-identifier hs-var">localStateQueryClientForBlock</span></a></span><span>
</span><span id="line-300"></span><span>                </span><span class="hs-special">)</span><span>
</span><span id="line-301"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">localTxMonitorProtocol :: RunMiniProtocolWithMinimalCtx
  'InitiatorMode LocalAddress ByteString IO () Void
</span><span class="hs-identifier hs-var">localTxMonitorProtocol</span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-302"></span><span>            </span><span class="annot"><span class="annottext">MiniProtocolCb
  (MinimalInitiatorContext LocalAddress) ByteString IO ()
-&gt; RunMiniProtocolWithMinimalCtx
     'InitiatorMode LocalAddress ByteString IO () Void
forall initiatorCtx bytes (m :: * -&gt; *) a responderCtx.
MiniProtocolCb initiatorCtx bytes m a
-&gt; RunMiniProtocol
     'InitiatorMode initiatorCtx responderCtx bytes m a Void
</span><span class="hs-identifier hs-var">Net.InitiatorProtocolOnly</span></span><span> </span><span class="annot"><span class="annottext">(MiniProtocolCb
   (MinimalInitiatorContext LocalAddress) ByteString IO ()
 -&gt; RunMiniProtocolWithMinimalCtx
      'InitiatorMode LocalAddress ByteString IO () Void)
-&gt; MiniProtocolCb
     (MinimalInitiatorContext LocalAddress) ByteString IO ()
-&gt; RunMiniProtocolWithMinimalCtx
     'InitiatorMode LocalAddress ByteString IO () Void
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-303"></span><span>              </span><span class="annot"><span class="annottext">(MinimalInitiatorContext LocalAddress
 -&gt; (Tracer
       IO
       (TraceSendRecv
          (LocalTxMonitor (GenTxId block) (GenTx block) SlotNo)),
     Codec
       (LocalTxMonitor (GenTxId block) (GenTx block) SlotNo)
       DeserialiseFailure
       IO
       ByteString,
     Peer
       (LocalTxMonitor (GenTxId block) (GenTx block) SlotNo)
       'AsClient
       'StIdle
       IO
       ()))
-&gt; MiniProtocolCb
     (MinimalInitiatorContext LocalAddress) ByteString IO ()
forall (pr :: PeerRole) ps (st :: ps) failure bytes ctx
       (m :: * -&gt; *) a.
(MonadThrow m, Show failure,
 forall (st' :: ps). Show (ClientHasAgency st'),
 forall (st' :: ps). Show (ServerHasAgency st'), ShowProxy ps) =&gt;
(ctx
 -&gt; (Tracer m (TraceSendRecv ps), Codec ps failure m bytes,
     Peer ps pr st m a))
-&gt; MiniProtocolCb ctx bytes m a
</span><span class="hs-identifier hs-var">Net.mkMiniProtocolCbFromPeer</span></span><span> </span><span class="annot"><span class="annottext">((MinimalInitiatorContext LocalAddress
  -&gt; (Tracer
        IO
        (TraceSendRecv
           (LocalTxMonitor (GenTxId block) (GenTx block) SlotNo)),
      Codec
        (LocalTxMonitor (GenTxId block) (GenTx block) SlotNo)
        DeserialiseFailure
        IO
        ByteString,
      Peer
        (LocalTxMonitor (GenTxId block) (GenTx block) SlotNo)
        'AsClient
        'StIdle
        IO
        ()))
 -&gt; MiniProtocolCb
      (MinimalInitiatorContext LocalAddress) ByteString IO ())
-&gt; (MinimalInitiatorContext LocalAddress
    -&gt; (Tracer
          IO
          (TraceSendRecv
             (LocalTxMonitor (GenTxId block) (GenTx block) SlotNo)),
        Codec
          (LocalTxMonitor (GenTxId block) (GenTx block) SlotNo)
          DeserialiseFailure
          IO
          ByteString,
        Peer
          (LocalTxMonitor (GenTxId block) (GenTx block) SlotNo)
          'AsClient
          'StIdle
          IO
          ()))
-&gt; MiniProtocolCb
     (MinimalInitiatorContext LocalAddress) ByteString IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">(Tracer
   IO
   (TraceSendRecv
      (LocalTxMonitor (GenTxId block) (GenTx block) SlotNo)),
 Codec
   (LocalTxMonitor (GenTxId block) (GenTx block) SlotNo)
   DeserialiseFailure
   IO
   ByteString,
 Peer
   (LocalTxMonitor (GenTxId block) (GenTx block) SlotNo)
   'AsClient
   'StIdle
   IO
   ())
-&gt; MinimalInitiatorContext LocalAddress
-&gt; (Tracer
      IO
      (TraceSendRecv
         (LocalTxMonitor (GenTxId block) (GenTx block) SlotNo)),
    Codec
      (LocalTxMonitor (GenTxId block) (GenTx block) SlotNo)
      DeserialiseFailure
      IO
      ByteString,
    Peer
      (LocalTxMonitor (GenTxId block) (GenTx block) SlotNo)
      'AsClient
      'StIdle
      IO
      ())
forall a b. a -&gt; b -&gt; a
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Base.html#const"><span class="hs-identifier hs-var">const</span></a></span><span>
</span><span id="line-304"></span><span>                </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">Tracer
  IO
  (TraceSendRecv
     (LocalTxMonitor (GenTxId block) (GenTx block) SlotNo))
forall (m :: * -&gt; *) a. Applicative m =&gt; Tracer m a
</span><span class="hs-identifier hs-var">nullTracer</span></span><span>
</span><span id="line-305"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Codec
  (LocalTxMonitor (GenTxId block) (GenTx block) SlotNo)
  DeserialiseFailure
  IO
  ByteString
</span><a href="#local-6989586621681168674"><span class="hs-identifier hs-var">cTxMonitorCodec</span></a></span><span>
</span><span id="line-306"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Peer
  (LocalTxMonitor (GenTxId block) (GenTx block) SlotNo)
  'AsClient
  'StIdle
  IO
  ()
-&gt; (LocalTxMonitorClient (GenTxId block) (GenTx block) SlotNo IO ()
    -&gt; Peer
         (LocalTxMonitor (GenTxId block) (GenTx block) SlotNo)
         'AsClient
         'StIdle
         IO
         ())
-&gt; Maybe
     (LocalTxMonitorClient (GenTxId block) (GenTx block) SlotNo IO ())
-&gt; Peer
     (LocalTxMonitor (GenTxId block) (GenTx block) SlotNo)
     'AsClient
     'StIdle
     IO
     ()
forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/Data.Maybe.html#maybe"><span class="hs-identifier hs-var">maybe</span></a></span><span> </span><span class="annot"><span class="annottext">Peer
  (LocalTxMonitor (GenTxId block) (GenTx block) SlotNo)
  'AsClient
  'StIdle
  IO
  ()
forall txid tx slot (m :: * -&gt; *) a.
MonadDelay m =&gt;
Peer (LocalTxMonitor txid tx slot) 'AsClient 'StIdle m a
</span><span class="hs-identifier hs-var">Net.localTxMonitorPeerNull</span></span><span>
</span><span id="line-307"></span><span>                        </span><span class="annot"><span class="annottext">LocalTxMonitorClient (GenTxId block) (GenTx block) SlotNo IO ()
-&gt; Peer
     (LocalTxMonitor (GenTxId block) (GenTx block) SlotNo)
     'AsClient
     'StIdle
     IO
     ()
forall txid tx slot (m :: * -&gt; *) a.
Monad m =&gt;
LocalTxMonitorClient txid tx slot m a
-&gt; Peer (LocalTxMonitor txid tx slot) 'AsClient 'StIdle m a
</span><span class="hs-identifier hs-var">localTxMonitorClientPeer</span></span><span>
</span><span id="line-308"></span><span>                        </span><span class="annot"><span class="annottext">Maybe
  (LocalTxMonitorClient (GenTxId block) (GenTx block) SlotNo IO ())
</span><a href="#local-6989586621681168649"><span class="hs-identifier hs-var">localTxMonitoringClientForBlock</span></a></span><span>
</span><span id="line-309"></span><span>                </span><span class="hs-special">)</span><span>
</span><span id="line-310"></span><span>        </span><span class="hs-special">}</span><span>
</span><span id="line-311"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-312"></span><span>        </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.2/ouroboros-consensus-diffusion-0.9.0.0-fcfe3e39fd7312ae137e4ab0aadf753deb784d0d56c0f1d656b111860ca46e96/share/doc/html/src/Ouroboros.Consensus.Network.NodeToClient.html#Codecs"><span class="hs-identifier hs-type">Consensus.Codecs</span></a></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-313"></span><span>          </span><span id="local-6989586621681168657"><span class="annot"><span class="annottext">Codec
  (ChainSync block (Point block) (Tip block))
  DeserialiseFailure
  IO
  ByteString
cChainSyncCodec :: Codec
  (ChainSync block (Point block) (Tip block))
  DeserialiseFailure
  IO
  ByteString
cChainSyncCodec :: forall blk serialisedBlk e (m :: * -&gt; *) bCS bTX bSQ bTM.
Codecs' blk serialisedBlk e m bCS bTX bSQ bTM
-&gt; Codec (ChainSync serialisedBlk (Point blk) (Tip blk)) e m bCS
</span><a href="#local-6989586621681168657"><span class="hs-identifier hs-var hs-var">Consensus.cChainSyncCodec</span></a></span></span><span class="hs-special">,</span><span>
</span><span id="line-314"></span><span>          </span><span id="local-6989586621681168674"><span class="annot"><span class="annottext">Codec
  (LocalTxMonitor (GenTxId block) (GenTx block) SlotNo)
  DeserialiseFailure
  IO
  ByteString
cTxMonitorCodec :: Codec
  (LocalTxMonitor (GenTxId block) (GenTx block) SlotNo)
  DeserialiseFailure
  IO
  ByteString
cTxMonitorCodec :: forall blk serialisedBlk e (m :: * -&gt; *) bCS bTX bSQ bTM.
Codecs' blk serialisedBlk e m bCS bTX bSQ bTM
-&gt; Codec (LocalTxMonitor (GenTxId blk) (GenTx blk) SlotNo) e m bTM
</span><a href="#local-6989586621681168674"><span class="hs-identifier hs-var hs-var">Consensus.cTxMonitorCodec</span></a></span></span><span class="hs-special">,</span><span>
</span><span id="line-315"></span><span>          </span><span id="local-6989586621681168665"><span class="annot"><span class="annottext">Codec
  (LocalTxSubmission (GenTx block) (ApplyTxErr block))
  DeserialiseFailure
  IO
  ByteString
cTxSubmissionCodec :: Codec
  (LocalTxSubmission (GenTx block) (ApplyTxErr block))
  DeserialiseFailure
  IO
  ByteString
cTxSubmissionCodec :: forall blk serialisedBlk e (m :: * -&gt; *) bCS bTX bSQ bTM.
Codecs' blk serialisedBlk e m bCS bTX bSQ bTM
-&gt; Codec (LocalTxSubmission (GenTx blk) (ApplyTxErr blk)) e m bTX
</span><a href="#local-6989586621681168665"><span class="hs-identifier hs-var hs-var">Consensus.cTxSubmissionCodec</span></a></span></span><span class="hs-special">,</span><span>
</span><span id="line-316"></span><span>          </span><span id="local-6989586621681168670"><span class="annot"><span class="annottext">Codec
  (LocalStateQuery block (Point block) (Query block))
  DeserialiseFailure
  IO
  ByteString
cStateQueryCodec :: Codec
  (LocalStateQuery block (Point block) (Query block))
  DeserialiseFailure
  IO
  ByteString
cStateQueryCodec :: forall blk serialisedBlk e (m :: * -&gt; *) bCS bTX bSQ bTM.
Codecs' blk serialisedBlk e m bCS bTX bSQ bTM
-&gt; Codec (LocalStateQuery blk (Point blk) (Query blk)) e m bSQ
</span><a href="#local-6989586621681168670"><span class="hs-identifier hs-var hs-var">Consensus.cStateQueryCodec</span></a></span></span><span>
</span><span id="line-317"></span><span>        </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CodecConfig block
-&gt; BlockNodeToClientVersion block
-&gt; NodeToClientVersion
-&gt; Codecs'
     block
     block
     DeserialiseFailure
     IO
     ByteString
     ByteString
     ByteString
     ByteString
forall (m :: * -&gt; *) blk.
(MonadST m, SerialiseNodeToClientConstraints blk,
 ShowQuery (BlockQuery blk), StandardHash blk,
 Serialise (HeaderHash blk)) =&gt;
CodecConfig blk
-&gt; BlockNodeToClientVersion blk
-&gt; NodeToClientVersion
-&gt; ClientCodecs blk m
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.2/ouroboros-consensus-diffusion-0.9.0.0-fcfe3e39fd7312ae137e4ab0aadf753deb784d0d56c0f1d656b111860ca46e96/share/doc/html/src/Ouroboros.Consensus.Network.NodeToClient.html#clientCodecs"><span class="hs-identifier hs-var">Consensus.clientCodecs</span></a></span><span> </span><span class="annot"><span class="annottext">CodecConfig block
</span><a href="#local-6989586621681168682"><span class="hs-identifier hs-var">codecConfig</span></a></span><span> </span><span class="annot"><span class="annottext">BlockNodeToClientVersion block
</span><a href="#local-6989586621681168651"><span class="hs-identifier hs-var">ptclBlockVersion</span></a></span><span> </span><span class="annot"><span class="annottext">NodeToClientVersion
</span><a href="#local-6989586621681168652"><span class="hs-identifier hs-var">ptclVersion</span></a></span><span>
</span><span id="line-318"></span><span>
</span><span id="line-319"></span><span>    </span><span class="annot"><a href="#local-6989586621681168682"><span class="hs-identifier hs-type">codecConfig</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.2/ouroboros-consensus-0.13.0.1-8aef850169985b5372495195b20258fa7e52a46bbc5e9028955791f7b5578a90/share/doc/html/src/Ouroboros.Consensus.Block.Abstract.html#CodecConfig"><span class="hs-identifier hs-type">Consensus.CodecConfig</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681167902"><span class="hs-identifier hs-type">block</span></a></span><span>
</span><span id="line-320"></span><span>    </span><span id="local-6989586621681168682"><span class="annot"><span class="annottext">codecConfig :: CodecConfig block
</span><a href="#local-6989586621681168682"><span class="hs-identifier hs-var hs-var">codecConfig</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ProtocolClientInfo block -&gt; CodecConfig block
forall b. ProtocolClientInfo b -&gt; CodecConfig b
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.2/ouroboros-consensus-0.13.0.1-8aef850169985b5372495195b20258fa7e52a46bbc5e9028955791f7b5578a90/share/doc/html/src/Ouroboros.Consensus.Node.ProtocolInfo.html#pClientInfoCodecConfig"><span class="hs-identifier hs-var">Consensus.pClientInfoCodecConfig</span></a></span><span>
</span><span id="line-321"></span><span>                    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ProtocolClientInfoArgs block -&gt; ProtocolClientInfo block
forall blk.
ProtocolClient blk =&gt;
ProtocolClientInfoArgs blk -&gt; ProtocolClientInfo blk
</span><a href="Cardano.Api.Protocol.html#protocolClientInfo"><span class="hs-identifier hs-var">protocolClientInfo</span></a></span><span> </span><span class="annot"><span class="annottext">ProtocolClientInfoArgs block
</span><a href="#local-6989586621681168627"><span class="hs-identifier hs-var">ptcl</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-322"></span><span>
</span><span id="line-323"></span><span>
</span><span id="line-324"></span><span class="hs-comment">-- | This type defines the boundary between the mode-parametrised style used in</span><span>
</span><span id="line-325"></span><span class="hs-comment">-- this API and the block-parametrised style used by the underlying network</span><span>
</span><span id="line-326"></span><span class="hs-comment">-- and consensus libraries.</span><span>
</span><span id="line-327"></span><span class="hs-comment">--</span><span>
</span><span id="line-328"></span><span class="hs-comment">-- This interface itself is in the block-parametrised style, with the block</span><span>
</span><span id="line-329"></span><span class="hs-comment">-- type itself being an hidden\/existential type.</span><span>
</span><span id="line-330"></span><span class="hs-comment">--</span><span>
</span><span id="line-331"></span><span class="hs-comment">-- It bundles together all the necessary class instances, the consensus</span><span>
</span><span id="line-332"></span><span class="hs-comment">-- protocol client identifier, and the set of client side mini-protocol</span><span>
</span><span id="line-333"></span><span class="hs-comment">-- handlers for the node-to-client protocol.</span><span>
</span><span id="line-334"></span><span class="hs-comment">--</span><span>
</span><span id="line-335"></span><span class="hs-keyword">data</span><span> </span><span id="LocalNodeClientParams"><span class="annot"><a href="Cardano.Api.IPC.html#LocalNodeClientParams"><span class="hs-identifier hs-var">LocalNodeClientParams</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-336"></span><span>     </span><span id="local-6989586621681168685"><span id="LocalNodeClientParamsSingleBlock"><span class="annot"><a href="Cardano.Api.IPC.html#LocalNodeClientParamsSingleBlock"><span class="hs-identifier hs-var">LocalNodeClientParamsSingleBlock</span></a></span></span><span>
</span><span id="line-337"></span><span>       </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Api.Protocol.html#ProtocolClient"><span class="hs-identifier hs-type">ProtocolClient</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681168685"><span class="hs-identifier hs-type">block</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-338"></span><span>           </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.2/ouroboros-consensus-0.13.0.1-8aef850169985b5372495195b20258fa7e52a46bbc5e9028955791f7b5578a90/share/doc/html/src/Ouroboros.Consensus.Ledger.SupportsProtocol.html#LedgerSupportsProtocol"><span class="hs-identifier hs-type">Consensus.LedgerSupportsProtocol</span></a></span><span>
</span><span id="line-339"></span><span>           </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.2/ouroboros-consensus-cardano-0.12.0.0-2682aec32be4980bdd895fcf97b73f7b333b03e47d14403c8aeca2665540d6b3/share/doc/html/src/Ouroboros.Consensus.Shelley.Ledger.Block.html#ShelleyBlock"><span class="hs-identifier hs-type">Consensus.ShelleyBlock</span></a></span><span>
</span><span id="line-340"></span><span>              </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.2/ouroboros-consensus-protocol-0.6.0.0-43d1c3829c0a6be2f7253e3554e8ee292b11d35a663bb78b349b6b67e80c8bae/share/doc/html/src/Ouroboros.Consensus.Protocol.TPraos.html#TPraos"><span class="hs-identifier hs-type">Consensus.TPraos</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.2/cardano-ledger-core-1.9.0.0-f4f4585fab77826fe9b38152ea2d70a70689b9295e11fe009b7dd265663dcd0f/share/doc/html/src/Cardano.Ledger.Crypto.html#StandardCrypto"><span class="hs-identifier hs-type">Consensus.StandardCrypto</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-341"></span><span>              </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.2/cardano-ledger-shelley-1.8.0.0-c7f1e5a49680d470d470c55898ca17eab94949e706f31de6d487ba1f265facce/share/doc/html/src/Cardano.Ledger.Shelley.Era.html#ShelleyEra"><span class="hs-identifier hs-type">Consensus.ShelleyEra</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.2/cardano-ledger-core-1.9.0.0-f4f4585fab77826fe9b38152ea2d70a70689b9295e11fe009b7dd265663dcd0f/share/doc/html/src/Cardano.Ledger.Crypto.html#StandardCrypto"><span class="hs-identifier hs-type">Consensus.StandardCrypto</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-342"></span><span>
</span><span id="line-343"></span><span>           </span><span class="hs-special">)</span><span>
</span><span id="line-344"></span><span>       </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Cardano.Api.Protocol.html#ProtocolClientInfoArgs"><span class="hs-identifier hs-type">ProtocolClientInfoArgs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681168685"><span class="hs-identifier hs-type">block</span></a></span><span>
</span><span id="line-345"></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">NodeToClientVersion</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cardano.Api.IPC.html#LocalNodeClientProtocolsForBlock"><span class="hs-identifier hs-type">LocalNodeClientProtocolsForBlock</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681168685"><span class="hs-identifier hs-type">block</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-346"></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cardano.Api.IPC.html#LocalNodeClientParams"><span class="hs-identifier hs-type">LocalNodeClientParams</span></a></span></span><span>
</span><span id="line-347"></span><span>
</span><span id="line-348"></span><span>     </span><span id="local-6989586621681168686"><span id="LocalNodeClientParamsCardano"><span class="annot"><a href="Cardano.Api.IPC.html#LocalNodeClientParamsCardano"><span class="hs-identifier hs-var">LocalNodeClientParamsCardano</span></a></span></span><span>
</span><span id="line-349"></span><span>      </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Api.Protocol.html#ProtocolClient"><span class="hs-identifier hs-type">ProtocolClient</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681168686"><span class="hs-identifier hs-type">block</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.2/ouroboros-consensus-cardano-0.12.0.0-2682aec32be4980bdd895fcf97b73f7b333b03e47d14403c8aeca2665540d6b3/share/doc/html/src/Ouroboros.Consensus.Cardano.CanHardFork.html#CardanoHardForkConstraints"><span class="hs-identifier hs-type">CardanoHardForkConstraints</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Api.Modes.html#ConsensusCryptoForBlock"><span class="hs-identifier hs-type">ConsensusCryptoForBlock</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681168686"><span class="hs-identifier hs-type">block</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-350"></span><span>      </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Cardano.Api.Protocol.html#ProtocolClientInfoArgs"><span class="hs-identifier hs-type">ProtocolClientInfoArgs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681168686"><span class="hs-identifier hs-type">block</span></a></span><span>
</span><span id="line-351"></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">NodeToClientVersion</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cardano.Api.IPC.html#LocalNodeClientProtocolsForBlock"><span class="hs-identifier hs-type">LocalNodeClientProtocolsForBlock</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681168686"><span class="hs-identifier hs-type">block</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-352"></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cardano.Api.IPC.html#LocalNodeClientParams"><span class="hs-identifier hs-type">LocalNodeClientParams</span></a></span></span><span>
</span><span id="line-353"></span><span>
</span><span id="line-354"></span><span class="hs-keyword">data</span><span> </span><span id="LocalNodeClientProtocolsForBlock"><span class="annot"><a href="Cardano.Api.IPC.html#LocalNodeClientProtocolsForBlock"><span class="hs-identifier hs-var">LocalNodeClientProtocolsForBlock</span></a></span></span><span> </span><span id="local-6989586621681167988"><span class="annot"><a href="#local-6989586621681167988"><span class="hs-identifier hs-type">block</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-355"></span><span>     </span><span id="LocalNodeClientProtocolsForBlock"><span class="annot"><a href="Cardano.Api.IPC.html#LocalNodeClientProtocolsForBlock"><span class="hs-identifier hs-var">LocalNodeClientProtocolsForBlock</span></a></span></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-356"></span><span>       </span><span id="localChainSyncClientForBlock"><span class="annot"><span class="annottext">forall block.
LocalNodeClientProtocolsForBlock block
-&gt; LocalChainSyncClient block (Point block) (Tip block) IO
</span><a href="Cardano.Api.IPC.html#localChainSyncClientForBlock"><span class="hs-identifier hs-var hs-var">localChainSyncClientForBlock</span></a></span></span><span>
</span><span id="line-357"></span><span>         </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.Api.IPC.html#LocalChainSyncClient"><span class="hs-identifier hs-type">LocalChainSyncClient</span></a></span><span>  </span><span class="annot"><a href="#local-6989586621681167988"><span class="hs-identifier hs-type">block</span></a></span><span>
</span><span id="line-358"></span><span>                                  </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Consensus.Point</span></span><span> </span><span class="annot"><a href="#local-6989586621681167988"><span class="hs-identifier hs-type">block</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-359"></span><span>                                  </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Net.Tip</span></span><span>         </span><span class="annot"><a href="#local-6989586621681167988"><span class="hs-identifier hs-type">block</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-360"></span><span>                                   </span><span class="annot"><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span>
</span><span id="line-361"></span><span>
</span><span id="line-362"></span><span>     </span><span class="hs-special">,</span><span> </span><span id="localStateQueryClientForBlock"><span class="annot"><span class="annottext">forall block.
LocalNodeClientProtocolsForBlock block
-&gt; Maybe
     (LocalStateQueryClient block (Point block) (Query block) IO ())
</span><a href="Cardano.Api.IPC.html#localStateQueryClientForBlock"><span class="hs-identifier hs-var hs-var">localStateQueryClientForBlock</span></a></span></span><span>
</span><span id="line-363"></span><span>         </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">LocalStateQueryClient</span></span><span>  </span><span class="annot"><a href="#local-6989586621681167988"><span class="hs-identifier hs-type">block</span></a></span><span>
</span><span id="line-364"></span><span>                                         </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Consensus.Point</span></span><span> </span><span class="annot"><a href="#local-6989586621681167988"><span class="hs-identifier hs-type">block</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-365"></span><span>                                         </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.2/ouroboros-consensus-0.13.0.1-8aef850169985b5372495195b20258fa7e52a46bbc5e9028955791f7b5578a90/share/doc/html/src/Ouroboros.Consensus.Ledger.Query.html#Query"><span class="hs-identifier hs-type">Consensus.Query</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681167988"><span class="hs-identifier hs-type">block</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-366"></span><span>                                          </span><span class="annot"><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-367"></span><span>
</span><span id="line-368"></span><span>     </span><span class="hs-special">,</span><span> </span><span id="localTxSubmissionClientForBlock"><span class="annot"><span class="annottext">forall block.
LocalNodeClientProtocolsForBlock block
-&gt; Maybe
     (LocalTxSubmissionClient (GenTx block) (ApplyTxErr block) IO ())
</span><a href="Cardano.Api.IPC.html#localTxSubmissionClientForBlock"><span class="hs-identifier hs-var hs-var">localTxSubmissionClientForBlock</span></a></span></span><span>
</span><span id="line-369"></span><span>         </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">LocalTxSubmissionClient</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.2/ouroboros-consensus-0.13.0.1-8aef850169985b5372495195b20258fa7e52a46bbc5e9028955791f7b5578a90/share/doc/html/src/Ouroboros.Consensus.Ledger.SupportsMempool.html#GenTx"><span class="hs-identifier hs-type">Consensus.GenTx</span></a></span><span>      </span><span class="annot"><a href="#local-6989586621681167988"><span class="hs-identifier hs-type">block</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-370"></span><span>                                           </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.2/ouroboros-consensus-0.13.0.1-8aef850169985b5372495195b20258fa7e52a46bbc5e9028955791f7b5578a90/share/doc/html/src/Ouroboros.Consensus.Ledger.SupportsMempool.html#ApplyTxErr"><span class="hs-identifier hs-type">Consensus.ApplyTxErr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681167988"><span class="hs-identifier hs-type">block</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-371"></span><span>                                            </span><span class="annot"><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-372"></span><span>     </span><span class="hs-special">,</span><span> </span><span id="localTxMonitoringClientForBlock"><span class="annot"><span class="annottext">forall block.
LocalNodeClientProtocolsForBlock block
-&gt; Maybe
     (LocalTxMonitorClient
        (TxId (GenTx block)) (GenTx block) SlotNo IO ())
</span><a href="Cardano.Api.IPC.html#localTxMonitoringClientForBlock"><span class="hs-identifier hs-var hs-var">localTxMonitoringClientForBlock</span></a></span></span><span>
</span><span id="line-373"></span><span>         </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">LocalTxMonitorClient</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.2/ouroboros-consensus-0.13.0.1-8aef850169985b5372495195b20258fa7e52a46bbc5e9028955791f7b5578a90/share/doc/html/src/Ouroboros.Consensus.Ledger.SupportsMempool.html#TxId"><span class="hs-identifier hs-type">Consensus.TxId</span></a></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.2/ouroboros-consensus-0.13.0.1-8aef850169985b5372495195b20258fa7e52a46bbc5e9028955791f7b5578a90/share/doc/html/src/Ouroboros.Consensus.Ledger.SupportsMempool.html#GenTx"><span class="hs-identifier hs-type">Consensus.GenTx</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681167988"><span class="hs-identifier hs-type">block</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-374"></span><span>                                        </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.2/ouroboros-consensus-0.13.0.1-8aef850169985b5372495195b20258fa7e52a46bbc5e9028955791f7b5578a90/share/doc/html/src/Ouroboros.Consensus.Ledger.SupportsMempool.html#GenTx"><span class="hs-identifier hs-type">Consensus.GenTx</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681167988"><span class="hs-identifier hs-type">block</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-375"></span><span>                                        </span><span class="annot"><span class="hs-identifier hs-type">SlotNo</span></span><span> </span><span class="annot"><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-376"></span><span>     </span><span class="hs-special">}</span><span>
</span><span id="line-377"></span><span>
</span><span id="line-378"></span><span>
</span><span id="line-379"></span><span class="hs-comment">-- | Convert from the mode-parametrised style to the block-parametrised style.</span><span>
</span><span id="line-380"></span><span class="hs-comment">--</span><span>
</span><span id="line-381"></span><span class="annot"><a href="Cardano.Api.IPC.html#mkLocalNodeClientParams"><span class="hs-identifier hs-type">mkLocalNodeClientParams</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621681167876"><span class="annot"><a href="#local-6989586621681167876"><span class="hs-identifier hs-type">block</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-382"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.2/ouroboros-consensus-cardano-0.12.0.0-2682aec32be4980bdd895fcf97b73f7b333b03e47d14403c8aeca2665540d6b3/share/doc/html/src/Ouroboros.Consensus.Cardano.Block.html#CardanoBlock"><span class="hs-identifier hs-type">Consensus.CardanoBlock</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.2/cardano-ledger-core-1.9.0.0-f4f4585fab77826fe9b38152ea2d70a70689b9295e11fe009b7dd265663dcd0f/share/doc/html/src/Cardano.Ledger.Crypto.html#StandardCrypto"><span class="hs-identifier hs-type">L.StandardCrypto</span></a></span><span> </span><span class="annot"><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#~"><span class="hs-operator hs-type">~</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681167876"><span class="hs-identifier hs-type">block</span></a></span><span>
</span><span id="line-383"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Cardano.Api.Modes.html#ConsensusModeParams"><span class="hs-identifier hs-type">ConsensusModeParams</span></a></span><span>
</span><span id="line-384"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">NodeToClientVersion</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cardano.Api.IPC.html#LocalNodeClientProtocolsInMode"><span class="hs-identifier hs-type">LocalNodeClientProtocolsInMode</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-385"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cardano.Api.IPC.html#LocalNodeClientParams"><span class="hs-identifier hs-type">LocalNodeClientParams</span></a></span><span>
</span><span id="line-386"></span><span id="mkLocalNodeClientParams"><span class="annot"><span class="annottext">mkLocalNodeClientParams :: forall block.
(CardanoBlock StandardCrypto ~ block) =&gt;
ConsensusModeParams
-&gt; (NodeToClientVersion -&gt; LocalNodeClientProtocolsInMode)
-&gt; LocalNodeClientParams
</span><a href="Cardano.Api.IPC.html#mkLocalNodeClientParams"><span class="hs-identifier hs-var hs-var">mkLocalNodeClientParams</span></a></span></span><span> </span><span id="local-6989586621681168754"><span class="annot"><span class="annottext">ConsensusModeParams
</span><a href="#local-6989586621681168754"><span class="hs-identifier hs-var">modeparams</span></a></span></span><span> </span><span id="local-6989586621681168755"><span class="annot"><span class="annottext">NodeToClientVersion -&gt; LocalNodeClientProtocolsInMode
</span><a href="#local-6989586621681168755"><span class="hs-identifier hs-var">clients</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-387"></span><span>    </span><span class="hs-comment">-- For each of the possible consensus modes we pick the concrete block type</span><span>
</span><span id="line-388"></span><span>    </span><span class="hs-comment">-- (by picking the appropriate 'ProtocolClient' value).</span><span>
</span><span id="line-389"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-390"></span><span>    </span><span class="hs-comment">-- Though it is not immediately visible, this point where we use</span><span>
</span><span id="line-391"></span><span>    </span><span class="hs-comment">-- 'LocalNodeClientParams' is also where we pick up the necessary class</span><span>
</span><span id="line-392"></span><span>    </span><span class="hs-comment">-- instances. This works because in each case we have a monomorphic block</span><span>
</span><span id="line-393"></span><span>    </span><span class="hs-comment">-- type and the instances are all in scope. This is why the use of</span><span>
</span><span id="line-394"></span><span>    </span><span class="hs-comment">-- LocalNodeClientParams is repeated within each branch of the case:</span><span>
</span><span id="line-395"></span><span>    </span><span class="hs-comment">-- because it is only within each branch that the GADT match makes the</span><span>
</span><span id="line-396"></span><span>    </span><span class="hs-comment">-- block type monomorphic.</span><span>
</span><span id="line-397"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-398"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">ConsensusModeParams
</span><a href="#local-6989586621681168754"><span class="hs-identifier hs-var">modeparams</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-399"></span><span>      </span><span class="annot"><a href="Cardano.Api.Modes.html#CardanoModeParams"><span class="hs-identifier hs-type">CardanoModeParams</span></a></span><span> </span><span id="local-6989586621681168757"><span class="annot"><span class="annottext">EpochSlots
</span><a href="#local-6989586621681168757"><span class="hs-identifier hs-var">epochSlots</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-400"></span><span>       </span><span class="annot"><span class="annottext">ProtocolClientInfoArgs (CardanoBlock StandardCrypto)
-&gt; (NodeToClientVersion
    -&gt; LocalNodeClientProtocolsForBlock (CardanoBlock StandardCrypto))
-&gt; LocalNodeClientParams
forall block.
(ProtocolClient block,
 CardanoHardForkConstraints (ConsensusCryptoForBlock block)) =&gt;
ProtocolClientInfoArgs block
-&gt; (NodeToClientVersion -&gt; LocalNodeClientProtocolsForBlock block)
-&gt; LocalNodeClientParams
</span><a href="Cardano.Api.IPC.html#LocalNodeClientParamsCardano"><span class="hs-identifier hs-var">LocalNodeClientParamsCardano</span></a></span><span>
</span><span id="line-401"></span><span>         </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EpochSlots -&gt; ProtocolClientInfoArgs (CardanoBlock StandardCrypto)
</span><a href="Cardano.Api.Protocol.html#ProtocolClientInfoArgsCardano"><span class="hs-identifier hs-var">ProtocolClientInfoArgsCardano</span></a></span><span> </span><span class="annot"><span class="annottext">EpochSlots
</span><a href="#local-6989586621681168757"><span class="hs-identifier hs-var">epochSlots</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-402"></span><span>         </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LocalNodeClientProtocolsInMode
-&gt; LocalNodeClientProtocolsForBlock (CardanoBlock StandardCrypto)
forall block.
(CardanoBlock StandardCrypto ~ block) =&gt;
LocalNodeClientProtocolsInMode
-&gt; LocalNodeClientProtocolsForBlock block
</span><a href="Cardano.Api.IPC.html#convLocalNodeClientProtocols"><span class="hs-identifier hs-var">convLocalNodeClientProtocols</span></a></span><span> </span><span class="annot"><span class="annottext">(LocalNodeClientProtocolsInMode
 -&gt; LocalNodeClientProtocolsForBlock (CardanoBlock StandardCrypto))
-&gt; (NodeToClientVersion -&gt; LocalNodeClientProtocolsInMode)
-&gt; NodeToClientVersion
-&gt; LocalNodeClientProtocolsForBlock (CardanoBlock StandardCrypto)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">NodeToClientVersion -&gt; LocalNodeClientProtocolsInMode
</span><a href="#local-6989586621681168755"><span class="hs-identifier hs-var">clients</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-403"></span><span>
</span><span id="line-404"></span><span>
</span><span id="line-405"></span><span id="local-6989586621681168168"><span class="annot"><a href="Cardano.Api.IPC.html#convLocalNodeClientProtocols"><span class="hs-identifier hs-type">convLocalNodeClientProtocols</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-406"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.2/ouroboros-consensus-cardano-0.12.0.0-2682aec32be4980bdd895fcf97b73f7b333b03e47d14403c8aeca2665540d6b3/share/doc/html/src/Ouroboros.Consensus.Cardano.Block.html#CardanoBlock"><span class="hs-identifier hs-type">Consensus.CardanoBlock</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.2/cardano-ledger-core-1.9.0.0-f4f4585fab77826fe9b38152ea2d70a70689b9295e11fe009b7dd265663dcd0f/share/doc/html/src/Cardano.Ledger.Crypto.html#StandardCrypto"><span class="hs-identifier hs-type">L.StandardCrypto</span></a></span><span> </span><span class="annot"><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#~"><span class="hs-operator hs-type">~</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681168168"><span class="hs-identifier hs-type">block</span></a></span><span>
</span><span id="line-407"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Cardano.Api.IPC.html#LocalNodeClientProtocolsInMode"><span class="hs-identifier hs-type">LocalNodeClientProtocolsInMode</span></a></span><span>
</span><span id="line-408"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cardano.Api.IPC.html#LocalNodeClientProtocolsForBlock"><span class="hs-identifier hs-type">LocalNodeClientProtocolsForBlock</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681168168"><span class="hs-identifier hs-type">block</span></a></span></span><span>
</span><span id="line-409"></span><span id="convLocalNodeClientProtocols"><span class="annot"><span class="annottext">convLocalNodeClientProtocols :: forall block.
(CardanoBlock StandardCrypto ~ block) =&gt;
LocalNodeClientProtocolsInMode
-&gt; LocalNodeClientProtocolsForBlock block
</span><a href="Cardano.Api.IPC.html#convLocalNodeClientProtocols"><span class="hs-identifier hs-var hs-var">convLocalNodeClientProtocols</span></a></span></span><span>
</span><span id="line-410"></span><span>    </span><span class="annot"><a href="Cardano.Api.IPC.html#LocalNodeClientProtocols"><span class="hs-identifier hs-type">LocalNodeClientProtocols</span></a></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-411"></span><span>      </span><span id="local-6989586621681168779"><span class="annot"><span class="annottext">LocalChainSyncClient BlockInMode ChainPoint ChainTip IO
localChainSyncClient :: forall block point tip slot tx txid txerr (query :: * -&gt; *)
       (m :: * -&gt; *).
LocalNodeClientProtocols block point tip slot tx txid txerr query m
-&gt; LocalChainSyncClient block point tip m
localChainSyncClient :: LocalChainSyncClient BlockInMode ChainPoint ChainTip IO
</span><a href="Cardano.Api.IPC.html#localChainSyncClient"><span class="hs-identifier hs-var hs-var">localChainSyncClient</span></a></span></span><span class="hs-special">,</span><span>
</span><span id="line-412"></span><span>      </span><span id="local-6989586621681168780"><span class="annot"><span class="annottext">Maybe
  (LocalTxSubmissionClient
     TxInMode TxValidationErrorInCardanoMode IO ())
localTxSubmissionClient :: forall block point tip slot tx txid txerr (query :: * -&gt; *)
       (m :: * -&gt; *).
LocalNodeClientProtocols block point tip slot tx txid txerr query m
-&gt; Maybe (LocalTxSubmissionClient tx txerr m ())
localTxSubmissionClient :: Maybe
  (LocalTxSubmissionClient
     TxInMode TxValidationErrorInCardanoMode IO ())
</span><a href="Cardano.Api.IPC.html#localTxSubmissionClient"><span class="hs-identifier hs-var hs-var">localTxSubmissionClient</span></a></span></span><span class="hs-special">,</span><span>
</span><span id="line-413"></span><span>      </span><span id="local-6989586621681168781"><span class="annot"><span class="annottext">Maybe
  (LocalStateQueryClient BlockInMode ChainPoint QueryInMode IO ())
localStateQueryClient :: forall block point tip slot tx txid txerr (query :: * -&gt; *)
       (m :: * -&gt; *).
LocalNodeClientProtocols block point tip slot tx txid txerr query m
-&gt; Maybe (LocalStateQueryClient block point query m ())
localStateQueryClient :: Maybe
  (LocalStateQueryClient BlockInMode ChainPoint QueryInMode IO ())
</span><a href="Cardano.Api.IPC.html#localStateQueryClient"><span class="hs-identifier hs-var hs-var">localStateQueryClient</span></a></span></span><span class="hs-special">,</span><span>
</span><span id="line-414"></span><span>      </span><span id="local-6989586621681168782"><span class="annot"><span class="annottext">Maybe (LocalTxMonitorClient TxIdInMode TxInMode SlotNo IO ())
localTxMonitoringClient :: forall block point tip slot tx txid txerr (query :: * -&gt; *)
       (m :: * -&gt; *).
LocalNodeClientProtocols block point tip slot tx txid txerr query m
-&gt; Maybe (LocalTxMonitorClient txid tx slot m ())
localTxMonitoringClient :: Maybe (LocalTxMonitorClient TxIdInMode TxInMode SlotNo IO ())
</span><a href="Cardano.Api.IPC.html#localTxMonitoringClient"><span class="hs-identifier hs-var hs-var">localTxMonitoringClient</span></a></span></span><span>
</span><span id="line-415"></span><span>    </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-416"></span><span>    </span><span class="annot"><a href="Cardano.Api.IPC.html#LocalNodeClientProtocolsForBlock"><span class="hs-identifier hs-type">LocalNodeClientProtocolsForBlock</span></a></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-417"></span><span>      </span><span class="annot"><span class="annottext">localChainSyncClientForBlock :: LocalChainSyncClient block (Point block) (Tip block) IO
</span><a href="Cardano.Api.IPC.html#localChainSyncClientForBlock"><span class="hs-identifier hs-var">localChainSyncClientForBlock</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">LocalChainSyncClient BlockInMode ChainPoint ChainTip IO
</span><a href="#local-6989586621681168779"><span class="hs-identifier hs-var">localChainSyncClient</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-418"></span><span>        </span><span class="annot"><span class="annottext">LocalChainSyncClient BlockInMode ChainPoint ChainTip IO
</span><a href="Cardano.Api.IPC.html#NoLocalChainSyncClient"><span class="hs-identifier hs-var">NoLocalChainSyncClient</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LocalChainSyncClient block (Point block) (Tip block) IO
forall block point tip (m :: * -&gt; *).
LocalChainSyncClient block point tip m
</span><a href="Cardano.Api.IPC.html#NoLocalChainSyncClient"><span class="hs-identifier hs-var">NoLocalChainSyncClient</span></a></span><span>
</span><span id="line-419"></span><span>        </span><span class="annot"><a href="Cardano.Api.IPC.html#LocalChainSyncClientPipelined"><span class="hs-identifier hs-type">LocalChainSyncClientPipelined</span></a></span><span> </span><span id="local-6989586621681168783"><span class="annot"><span class="annottext">ChainSyncClientPipelined BlockInMode ChainPoint ChainTip IO ()
</span><a href="#local-6989586621681168783"><span class="hs-identifier hs-var">clientPipelined</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ChainSyncClientPipelined block (Point block) (Tip block) IO ()
-&gt; LocalChainSyncClient block (Point block) (Tip block) IO
forall block point tip (m :: * -&gt; *).
ChainSyncClientPipelined block point tip m ()
-&gt; LocalChainSyncClient block point tip m
</span><a href="Cardano.Api.IPC.html#LocalChainSyncClientPipelined"><span class="hs-identifier hs-var">LocalChainSyncClientPipelined</span></a></span><span> </span><span class="annot"><span class="annottext">(ChainSyncClientPipelined block (Point block) (Tip block) IO ()
 -&gt; LocalChainSyncClient block (Point block) (Tip block) IO)
-&gt; ChainSyncClientPipelined block (Point block) (Tip block) IO ()
-&gt; LocalChainSyncClient block (Point block) (Tip block) IO
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ChainSyncClientPipelined BlockInMode ChainPoint ChainTip IO ()
-&gt; ChainSyncClientPipelined block (Point block) (Tip block) IO ()
forall block (m :: * -&gt; *) a.
(CardanoBlock StandardCrypto ~ block, Functor m) =&gt;
ChainSyncClientPipelined BlockInMode ChainPoint ChainTip m a
-&gt; ChainSyncClientPipelined block (Point block) (Tip block) m a
</span><a href="Cardano.Api.IPC.html#convLocalChainSyncClientPipelined"><span class="hs-identifier hs-var">convLocalChainSyncClientPipelined</span></a></span><span> </span><span class="annot"><span class="annottext">ChainSyncClientPipelined BlockInMode ChainPoint ChainTip IO ()
</span><a href="#local-6989586621681168783"><span class="hs-identifier hs-var">clientPipelined</span></a></span><span>
</span><span id="line-420"></span><span>        </span><span class="annot"><a href="Cardano.Api.IPC.html#LocalChainSyncClient"><span class="hs-identifier hs-type">LocalChainSyncClient</span></a></span><span> </span><span id="local-6989586621681168785"><span class="annot"><span class="annottext">ChainSyncClient BlockInMode ChainPoint ChainTip IO ()
</span><a href="#local-6989586621681168785"><span class="hs-identifier hs-var">client</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ChainSyncClient block (Point block) (Tip block) IO ()
-&gt; LocalChainSyncClient block (Point block) (Tip block) IO
forall block point tip (m :: * -&gt; *).
ChainSyncClient block point tip m ()
-&gt; LocalChainSyncClient block point tip m
</span><a href="Cardano.Api.IPC.html#LocalChainSyncClient"><span class="hs-identifier hs-var">LocalChainSyncClient</span></a></span><span> </span><span class="annot"><span class="annottext">(ChainSyncClient block (Point block) (Tip block) IO ()
 -&gt; LocalChainSyncClient block (Point block) (Tip block) IO)
-&gt; ChainSyncClient block (Point block) (Tip block) IO ()
-&gt; LocalChainSyncClient block (Point block) (Tip block) IO
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ChainSyncClient BlockInMode ChainPoint ChainTip IO ()
-&gt; ChainSyncClient block (Point block) (Tip block) IO ()
forall block (m :: * -&gt; *) a.
(CardanoBlock StandardCrypto ~ block, Functor m) =&gt;
ChainSyncClient BlockInMode ChainPoint ChainTip m a
-&gt; ChainSyncClient block (Point block) (Tip block) m a
</span><a href="Cardano.Api.IPC.html#convLocalChainSyncClient"><span class="hs-identifier hs-var">convLocalChainSyncClient</span></a></span><span> </span><span class="annot"><span class="annottext">ChainSyncClient BlockInMode ChainPoint ChainTip IO ()
</span><a href="#local-6989586621681168785"><span class="hs-identifier hs-var">client</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-421"></span><span>
</span><span id="line-422"></span><span>      </span><span class="annot"><span class="annottext">localTxSubmissionClientForBlock :: Maybe
  (LocalTxSubmissionClient (GenTx block) (ApplyTxErr block) IO ())
</span><a href="Cardano.Api.IPC.html#localTxSubmissionClientForBlock"><span class="hs-identifier hs-var">localTxSubmissionClientForBlock</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LocalTxSubmissionClient
  TxInMode TxValidationErrorInCardanoMode IO ()
-&gt; LocalTxSubmissionClient
     (GenTx (CardanoBlock StandardCrypto))
     (ApplyTxErr (CardanoBlock StandardCrypto))
     IO
     ()
LocalTxSubmissionClient
  TxInMode TxValidationErrorInCardanoMode IO ()
-&gt; LocalTxSubmissionClient
     (GenTx (CardanoBlock StandardCrypto))
     (HardForkApplyTxErr
        (ByronBlock : CardanoShelleyEras StandardCrypto))
     IO
     ()
forall block (m :: * -&gt; *) a.
(CardanoBlock StandardCrypto ~ block, Functor m) =&gt;
LocalTxSubmissionClient TxInMode TxValidationErrorInCardanoMode m a
-&gt; LocalTxSubmissionClient (GenTx block) (ApplyTxErr block) m a
</span><a href="Cardano.Api.IPC.html#convLocalTxSubmissionClient"><span class="hs-identifier hs-var">convLocalTxSubmissionClient</span></a></span><span> </span><span class="annot"><span class="annottext">(LocalTxSubmissionClient
   TxInMode TxValidationErrorInCardanoMode IO ()
 -&gt; LocalTxSubmissionClient
      (GenTx (CardanoBlock StandardCrypto))
      (HardForkApplyTxErr
         (ByronBlock : CardanoShelleyEras StandardCrypto))
      IO
      ())
-&gt; Maybe
     (LocalTxSubmissionClient
        TxInMode TxValidationErrorInCardanoMode IO ())
-&gt; Maybe
     (LocalTxSubmissionClient
        (GenTx (CardanoBlock StandardCrypto))
        (HardForkApplyTxErr
           (ByronBlock : CardanoShelleyEras StandardCrypto))
        IO
        ())
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe
  (LocalTxSubmissionClient
     TxInMode TxValidationErrorInCardanoMode IO ())
</span><a href="#local-6989586621681168780"><span class="hs-identifier hs-var">localTxSubmissionClient</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-423"></span><span>      </span><span class="annot"><span class="annottext">localStateQueryClientForBlock :: Maybe
  (LocalStateQueryClient block (Point block) (Query block) IO ())
</span><a href="Cardano.Api.IPC.html#localStateQueryClientForBlock"><span class="hs-identifier hs-var">localStateQueryClientForBlock</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LocalStateQueryClient BlockInMode ChainPoint QueryInMode IO ()
-&gt; LocalStateQueryClient block (Point block) (Query block) IO ()
forall block (m :: * -&gt; *) a.
(CardanoBlock StandardCrypto ~ block, Functor m) =&gt;
LocalStateQueryClient BlockInMode ChainPoint QueryInMode m a
-&gt; LocalStateQueryClient block (Point block) (Query block) m a
</span><a href="Cardano.Api.IPC.html#convLocalStateQueryClient"><span class="hs-identifier hs-var">convLocalStateQueryClient</span></a></span><span>   </span><span class="annot"><span class="annottext">(LocalStateQueryClient BlockInMode ChainPoint QueryInMode IO ()
 -&gt; LocalStateQueryClient block (Point block) (Query block) IO ())
-&gt; Maybe
     (LocalStateQueryClient BlockInMode ChainPoint QueryInMode IO ())
-&gt; Maybe
     (LocalStateQueryClient block (Point block) (Query block) IO ())
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe
  (LocalStateQueryClient BlockInMode ChainPoint QueryInMode IO ())
</span><a href="#local-6989586621681168781"><span class="hs-identifier hs-var">localStateQueryClient</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-424"></span><span>      </span><span class="annot"><span class="annottext">localTxMonitoringClientForBlock :: Maybe
  (LocalTxMonitorClient
     (TxId (GenTx block)) (GenTx block) SlotNo IO ())
</span><a href="Cardano.Api.IPC.html#localTxMonitoringClientForBlock"><span class="hs-identifier hs-var">localTxMonitoringClientForBlock</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LocalTxMonitorClient TxIdInMode TxInMode SlotNo IO ()
-&gt; LocalTxMonitorClient
     (TxId (GenTx block)) (GenTx block) SlotNo IO ()
forall block (m :: * -&gt; *) a.
(CardanoBlock StandardCrypto ~ block, Functor m) =&gt;
LocalTxMonitorClient TxIdInMode TxInMode SlotNo m a
-&gt; LocalTxMonitorClient
     (TxId (GenTx block)) (GenTx block) SlotNo m a
</span><a href="Cardano.Api.IPC.html#convLocalTxMonitoringClient"><span class="hs-identifier hs-var">convLocalTxMonitoringClient</span></a></span><span> </span><span class="annot"><span class="annottext">(LocalTxMonitorClient TxIdInMode TxInMode SlotNo IO ()
 -&gt; LocalTxMonitorClient
      (TxId (GenTx block)) (GenTx block) SlotNo IO ())
-&gt; Maybe (LocalTxMonitorClient TxIdInMode TxInMode SlotNo IO ())
-&gt; Maybe
     (LocalTxMonitorClient
        (TxId (GenTx block)) (GenTx block) SlotNo IO ())
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (LocalTxMonitorClient TxIdInMode TxInMode SlotNo IO ())
</span><a href="#local-6989586621681168782"><span class="hs-identifier hs-var">localTxMonitoringClient</span></a></span><span>
</span><span id="line-425"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-426"></span><span>
</span><span id="line-427"></span><span class="annot"><a href="Cardano.Api.IPC.html#convLocalTxMonitoringClient"><span class="hs-identifier hs-type">convLocalTxMonitoringClient</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621681168202"><span class="annot"><a href="#local-6989586621681168202"><span class="hs-identifier hs-type">block</span></a></span></span><span> </span><span id="local-6989586621681168203"><span class="annot"><a href="#local-6989586621681168203"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span id="local-6989586621681168204"><span class="annot"><a href="#local-6989586621681168204"><span class="hs-identifier hs-type">a</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-428"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.2/ouroboros-consensus-cardano-0.12.0.0-2682aec32be4980bdd895fcf97b73f7b333b03e47d14403c8aeca2665540d6b3/share/doc/html/src/Ouroboros.Consensus.Cardano.Block.html#CardanoBlock"><span class="hs-identifier hs-type">Consensus.CardanoBlock</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.2/cardano-ledger-core-1.9.0.0-f4f4585fab77826fe9b38152ea2d70a70689b9295e11fe009b7dd265663dcd0f/share/doc/html/src/Cardano.Ledger.Crypto.html#StandardCrypto"><span class="hs-identifier hs-type">L.StandardCrypto</span></a></span><span> </span><span class="annot"><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#~"><span class="hs-operator hs-type">~</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681168202"><span class="hs-identifier hs-type">block</span></a></span><span>
</span><span id="line-429"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Base.html#Functor"><span class="hs-identifier hs-type">Functor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681168203"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-430"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">LocalTxMonitorClient</span></span><span> </span><span class="annot"><a href="Cardano.Api.InMode.html#TxIdInMode"><span class="hs-identifier hs-type">TxIdInMode</span></a></span><span> </span><span class="annot"><a href="Cardano.Api.InMode.html#TxInMode"><span class="hs-identifier hs-type">TxInMode</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">SlotNo</span></span><span> </span><span class="annot"><a href="#local-6989586621681168203"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681168204"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-431"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">LocalTxMonitorClient</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.2/ouroboros-consensus-0.13.0.1-8aef850169985b5372495195b20258fa7e52a46bbc5e9028955791f7b5578a90/share/doc/html/src/Ouroboros.Consensus.Ledger.SupportsMempool.html#TxId"><span class="hs-identifier hs-type">Consensus.TxId</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.2/ouroboros-consensus-0.13.0.1-8aef850169985b5372495195b20258fa7e52a46bbc5e9028955791f7b5578a90/share/doc/html/src/Ouroboros.Consensus.Ledger.SupportsMempool.html#GenTx"><span class="hs-identifier hs-type">Consensus.GenTx</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681168202"><span class="hs-identifier hs-type">block</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.2/ouroboros-consensus-0.13.0.1-8aef850169985b5372495195b20258fa7e52a46bbc5e9028955791f7b5578a90/share/doc/html/src/Ouroboros.Consensus.Ledger.SupportsMempool.html#GenTx"><span class="hs-identifier hs-type">Consensus.GenTx</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681168202"><span class="hs-identifier hs-type">block</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-identifier hs-type">SlotNo</span></span><span> </span><span class="annot"><a href="#local-6989586621681168203"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681168204"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-432"></span><span id="convLocalTxMonitoringClient"><span class="annot"><span class="annottext">convLocalTxMonitoringClient :: forall block (m :: * -&gt; *) a.
(CardanoBlock StandardCrypto ~ block, Functor m) =&gt;
LocalTxMonitorClient TxIdInMode TxInMode SlotNo m a
-&gt; LocalTxMonitorClient
     (TxId (GenTx block)) (GenTx block) SlotNo m a
</span><a href="Cardano.Api.IPC.html#convLocalTxMonitoringClient"><span class="hs-identifier hs-var hs-var">convLocalTxMonitoringClient</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-433"></span><span>  </span><span class="annot"><span class="annottext">(TxIdInMode -&gt; TxId (GenTx block))
-&gt; (GenTx block -&gt; TxInMode)
-&gt; LocalTxMonitorClient TxIdInMode TxInMode SlotNo m a
-&gt; LocalTxMonitorClient
     (TxId (GenTx block)) (GenTx block) SlotNo m a
forall txid txid' tx tx' (m :: * -&gt; *) a.
Functor m =&gt;
(txid -&gt; txid')
-&gt; (tx' -&gt; tx)
-&gt; LocalTxMonitorClient txid tx SlotNo m a
-&gt; LocalTxMonitorClient txid' tx' SlotNo m a
</span><a href="Cardano.Api.IPC.html#mapLocalTxMonitoringClient"><span class="hs-identifier hs-var">mapLocalTxMonitoringClient</span></a></span><span>
</span><span id="line-434"></span><span>    </span><span class="annot"><span class="annottext">TxIdInMode -&gt; TxId (GenTx block)
forall block.
(CardanoBlock StandardCrypto ~ block) =&gt;
TxIdInMode -&gt; TxId (GenTx block)
</span><a href="Cardano.Api.InMode.html#toConsensusTxId"><span class="hs-identifier hs-var">toConsensusTxId</span></a></span><span>
</span><span id="line-435"></span><span>    </span><span class="annot"><span class="annottext">GenTx block -&gt; TxInMode
forall block.
(CardanoBlock StandardCrypto ~ block) =&gt;
GenTx block -&gt; TxInMode
</span><a href="Cardano.Api.InMode.html#fromConsensusGenTx"><span class="hs-identifier hs-var">fromConsensusGenTx</span></a></span><span>
</span><span id="line-436"></span><span>
</span><span id="line-437"></span><span class="annot"><a href="Cardano.Api.IPC.html#convLocalChainSyncClient"><span class="hs-identifier hs-type">convLocalChainSyncClient</span></a></span><span>
</span><span id="line-438"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621681168187"><span class="annot"><a href="#local-6989586621681168187"><span class="hs-identifier hs-type">block</span></a></span></span><span> </span><span id="local-6989586621681168188"><span class="annot"><a href="#local-6989586621681168188"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span id="local-6989586621681168189"><span class="annot"><a href="#local-6989586621681168189"><span class="hs-identifier hs-type">a</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-439"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.2/ouroboros-consensus-cardano-0.12.0.0-2682aec32be4980bdd895fcf97b73f7b333b03e47d14403c8aeca2665540d6b3/share/doc/html/src/Ouroboros.Consensus.Cardano.Block.html#CardanoBlock"><span class="hs-identifier hs-type">Consensus.CardanoBlock</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.2/cardano-ledger-core-1.9.0.0-f4f4585fab77826fe9b38152ea2d70a70689b9295e11fe009b7dd265663dcd0f/share/doc/html/src/Cardano.Ledger.Crypto.html#StandardCrypto"><span class="hs-identifier hs-type">L.StandardCrypto</span></a></span><span> </span><span class="annot"><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#~"><span class="hs-operator hs-type">~</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681168187"><span class="hs-identifier hs-type">block</span></a></span><span>
</span><span id="line-440"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Base.html#Functor"><span class="hs-identifier hs-type">Functor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681168188"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-441"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ChainSyncClient</span></span><span> </span><span class="annot"><a href="Cardano.Api.Block.html#BlockInMode"><span class="hs-identifier hs-type">BlockInMode</span></a></span><span> </span><span class="annot"><a href="Cardano.Api.Block.html#ChainPoint"><span class="hs-identifier hs-type">ChainPoint</span></a></span><span> </span><span class="annot"><a href="Cardano.Api.Block.html#ChainTip"><span class="hs-identifier hs-type">ChainTip</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681168188"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681168189"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-442"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ChainSyncClient</span></span><span> </span><span class="annot"><a href="#local-6989586621681168187"><span class="hs-identifier hs-type">block</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Net.Point</span></span><span> </span><span class="annot"><a href="#local-6989586621681168187"><span class="hs-identifier hs-type">block</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Net.Tip</span></span><span> </span><span class="annot"><a href="#local-6989586621681168187"><span class="hs-identifier hs-type">block</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621681168188"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681168189"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-443"></span><span id="convLocalChainSyncClient"><span class="annot"><span class="annottext">convLocalChainSyncClient :: forall block (m :: * -&gt; *) a.
(CardanoBlock StandardCrypto ~ block, Functor m) =&gt;
ChainSyncClient BlockInMode ChainPoint ChainTip m a
-&gt; ChainSyncClient block (Point block) (Tip block) m a
</span><a href="Cardano.Api.IPC.html#convLocalChainSyncClient"><span class="hs-identifier hs-var hs-var">convLocalChainSyncClient</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-444"></span><span>    </span><span class="annot"><span class="annottext">(ChainPoint -&gt; Point block)
-&gt; (Point block -&gt; ChainPoint)
-&gt; (block -&gt; BlockInMode)
-&gt; (Tip block -&gt; ChainTip)
-&gt; ChainSyncClient BlockInMode ChainPoint ChainTip m a
-&gt; ChainSyncClient block (Point block) (Tip block) m a
forall header header' point point' tip tip' (m :: * -&gt; *) a.
Functor m =&gt;
(point -&gt; point')
-&gt; (point' -&gt; point)
-&gt; (header' -&gt; header)
-&gt; (tip' -&gt; tip)
-&gt; ChainSyncClient header point tip m a
-&gt; ChainSyncClient header' point' tip' m a
</span><span class="hs-identifier hs-var">Net.Sync.mapChainSyncClient</span></span><span>
</span><span id="line-445"></span><span>      </span><span class="annot"><span class="annottext">ChainPoint -&gt; Point block
forall block (xs :: [*]).
(HeaderHash block ~ OneEraHash xs) =&gt;
ChainPoint -&gt; Point block
</span><a href="Cardano.Api.Block.html#toConsensusPointHF"><span class="hs-identifier hs-var">toConsensusPointHF</span></a></span><span>
</span><span id="line-446"></span><span>      </span><span class="annot"><span class="annottext">Point block -&gt; ChainPoint
forall block (xs :: [*]).
(HeaderHash block ~ OneEraHash xs) =&gt;
Point block -&gt; ChainPoint
</span><a href="Cardano.Api.Block.html#fromConsensusPointHF"><span class="hs-identifier hs-var">fromConsensusPointHF</span></a></span><span>
</span><span id="line-447"></span><span>      </span><span class="annot"><span class="annottext">block -&gt; BlockInMode
forall block.
(CardanoBlock StandardCrypto ~ block) =&gt;
block -&gt; BlockInMode
</span><a href="Cardano.Api.Block.html#fromConsensusBlock"><span class="hs-identifier hs-var">fromConsensusBlock</span></a></span><span>
</span><span id="line-448"></span><span>      </span><span class="annot"><span class="annottext">Tip block -&gt; ChainTip
forall block.
(CardanoBlock StandardCrypto ~ block) =&gt;
Tip block -&gt; ChainTip
</span><a href="Cardano.Api.Block.html#fromConsensusTip"><span class="hs-identifier hs-var">fromConsensusTip</span></a></span><span>
</span><span id="line-449"></span><span>
</span><span id="line-450"></span><span class="annot"><a href="Cardano.Api.IPC.html#convLocalChainSyncClientPipelined"><span class="hs-identifier hs-type">convLocalChainSyncClientPipelined</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621681168184"><span class="annot"><a href="#local-6989586621681168184"><span class="hs-identifier hs-type">block</span></a></span></span><span> </span><span id="local-6989586621681168185"><span class="annot"><a href="#local-6989586621681168185"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span id="local-6989586621681168186"><span class="annot"><a href="#local-6989586621681168186"><span class="hs-identifier hs-type">a</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-451"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.2/ouroboros-consensus-cardano-0.12.0.0-2682aec32be4980bdd895fcf97b73f7b333b03e47d14403c8aeca2665540d6b3/share/doc/html/src/Ouroboros.Consensus.Cardano.Block.html#CardanoBlock"><span class="hs-identifier hs-type">Consensus.CardanoBlock</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.2/cardano-ledger-core-1.9.0.0-f4f4585fab77826fe9b38152ea2d70a70689b9295e11fe009b7dd265663dcd0f/share/doc/html/src/Cardano.Ledger.Crypto.html#StandardCrypto"><span class="hs-identifier hs-type">L.StandardCrypto</span></a></span><span> </span><span class="annot"><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#~"><span class="hs-operator hs-type">~</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681168184"><span class="hs-identifier hs-type">block</span></a></span><span>
</span><span id="line-452"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Base.html#Functor"><span class="hs-identifier hs-type">Functor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681168185"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-453"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ChainSyncClientPipelined</span></span><span> </span><span class="annot"><a href="Cardano.Api.Block.html#BlockInMode"><span class="hs-identifier hs-type">BlockInMode</span></a></span><span> </span><span class="annot"><a href="Cardano.Api.Block.html#ChainPoint"><span class="hs-identifier hs-type">ChainPoint</span></a></span><span> </span><span class="annot"><a href="Cardano.Api.Block.html#ChainTip"><span class="hs-identifier hs-type">ChainTip</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681168185"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681168186"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-454"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ChainSyncClientPipelined</span></span><span> </span><span class="annot"><a href="#local-6989586621681168184"><span class="hs-identifier hs-type">block</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Net.Point</span></span><span> </span><span class="annot"><a href="#local-6989586621681168184"><span class="hs-identifier hs-type">block</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Net.Tip</span></span><span> </span><span class="annot"><a href="#local-6989586621681168184"><span class="hs-identifier hs-type">block</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621681168185"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681168186"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-455"></span><span id="convLocalChainSyncClientPipelined"><span class="annot"><span class="annottext">convLocalChainSyncClientPipelined :: forall block (m :: * -&gt; *) a.
(CardanoBlock StandardCrypto ~ block, Functor m) =&gt;
ChainSyncClientPipelined BlockInMode ChainPoint ChainTip m a
-&gt; ChainSyncClientPipelined block (Point block) (Tip block) m a
</span><a href="Cardano.Api.IPC.html#convLocalChainSyncClientPipelined"><span class="hs-identifier hs-var hs-var">convLocalChainSyncClientPipelined</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-456"></span><span>  </span><span class="annot"><span class="annottext">(ChainPoint -&gt; Point block)
-&gt; (Point block -&gt; ChainPoint)
-&gt; (block -&gt; BlockInMode)
-&gt; (Tip block -&gt; ChainTip)
-&gt; ChainSyncClientPipelined BlockInMode ChainPoint ChainTip m a
-&gt; ChainSyncClientPipelined block (Point block) (Tip block) m a
forall header header' point point' tip tip' (m :: * -&gt; *) a.
Functor m =&gt;
(point -&gt; point')
-&gt; (point' -&gt; point)
-&gt; (header' -&gt; header)
-&gt; (tip' -&gt; tip)
-&gt; ChainSyncClientPipelined header point tip m a
-&gt; ChainSyncClientPipelined header' point' tip' m a
</span><span class="hs-identifier hs-var">mapChainSyncClientPipelined</span></span><span>
</span><span id="line-457"></span><span>    </span><span class="annot"><span class="annottext">ChainPoint -&gt; Point block
forall block (xs :: [*]).
(HeaderHash block ~ OneEraHash xs) =&gt;
ChainPoint -&gt; Point block
</span><a href="Cardano.Api.Block.html#toConsensusPointHF"><span class="hs-identifier hs-var">toConsensusPointHF</span></a></span><span>
</span><span id="line-458"></span><span>    </span><span class="annot"><span class="annottext">Point block -&gt; ChainPoint
forall block (xs :: [*]).
(HeaderHash block ~ OneEraHash xs) =&gt;
Point block -&gt; ChainPoint
</span><a href="Cardano.Api.Block.html#fromConsensusPointHF"><span class="hs-identifier hs-var">fromConsensusPointHF</span></a></span><span>
</span><span id="line-459"></span><span>    </span><span class="annot"><span class="annottext">block -&gt; BlockInMode
forall block.
(CardanoBlock StandardCrypto ~ block) =&gt;
block -&gt; BlockInMode
</span><a href="Cardano.Api.Block.html#fromConsensusBlock"><span class="hs-identifier hs-var">fromConsensusBlock</span></a></span><span>
</span><span id="line-460"></span><span>    </span><span class="annot"><span class="annottext">Tip block -&gt; ChainTip
forall block.
(CardanoBlock StandardCrypto ~ block) =&gt;
Tip block -&gt; ChainTip
</span><a href="Cardano.Api.Block.html#fromConsensusTip"><span class="hs-identifier hs-var">fromConsensusTip</span></a></span><span>
</span><span id="line-461"></span><span>
</span><span id="line-462"></span><span class="annot"><a href="Cardano.Api.IPC.html#convLocalTxSubmissionClient"><span class="hs-identifier hs-type">convLocalTxSubmissionClient</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621681168193"><span class="annot"><a href="#local-6989586621681168193"><span class="hs-identifier hs-type">block</span></a></span></span><span> </span><span id="local-6989586621681168194"><span class="annot"><a href="#local-6989586621681168194"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span id="local-6989586621681168195"><span class="annot"><a href="#local-6989586621681168195"><span class="hs-identifier hs-type">a</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-463"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.2/ouroboros-consensus-cardano-0.12.0.0-2682aec32be4980bdd895fcf97b73f7b333b03e47d14403c8aeca2665540d6b3/share/doc/html/src/Ouroboros.Consensus.Cardano.Block.html#CardanoBlock"><span class="hs-identifier hs-type">Consensus.CardanoBlock</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.2/cardano-ledger-core-1.9.0.0-f4f4585fab77826fe9b38152ea2d70a70689b9295e11fe009b7dd265663dcd0f/share/doc/html/src/Cardano.Ledger.Crypto.html#StandardCrypto"><span class="hs-identifier hs-type">L.StandardCrypto</span></a></span><span> </span><span class="annot"><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#~"><span class="hs-operator hs-type">~</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681168193"><span class="hs-identifier hs-type">block</span></a></span><span>
</span><span id="line-464"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Base.html#Functor"><span class="hs-identifier hs-type">Functor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681168194"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-465"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">LocalTxSubmissionClient</span></span><span> </span><span class="annot"><a href="Cardano.Api.InMode.html#TxInMode"><span class="hs-identifier hs-type">TxInMode</span></a></span><span> </span><span class="annot"><a href="Cardano.Api.InMode.html#TxValidationErrorInCardanoMode"><span class="hs-identifier hs-type">TxValidationErrorInCardanoMode</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681168194"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681168195"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-466"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">LocalTxSubmissionClient</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.2/ouroboros-consensus-0.13.0.1-8aef850169985b5372495195b20258fa7e52a46bbc5e9028955791f7b5578a90/share/doc/html/src/Ouroboros.Consensus.Ledger.SupportsMempool.html#GenTx"><span class="hs-identifier hs-type">Consensus.GenTx</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681168193"><span class="hs-identifier hs-type">block</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.2/ouroboros-consensus-0.13.0.1-8aef850169985b5372495195b20258fa7e52a46bbc5e9028955791f7b5578a90/share/doc/html/src/Ouroboros.Consensus.Ledger.SupportsMempool.html#ApplyTxErr"><span class="hs-identifier hs-type">Consensus.ApplyTxErr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681168193"><span class="hs-identifier hs-type">block</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621681168194"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681168195"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-467"></span><span id="convLocalTxSubmissionClient"><span class="annot"><span class="annottext">convLocalTxSubmissionClient :: forall block (m :: * -&gt; *) a.
(CardanoBlock StandardCrypto ~ block, Functor m) =&gt;
LocalTxSubmissionClient TxInMode TxValidationErrorInCardanoMode m a
-&gt; LocalTxSubmissionClient (GenTx block) (ApplyTxErr block) m a
</span><a href="Cardano.Api.IPC.html#convLocalTxSubmissionClient"><span class="hs-identifier hs-var hs-var">convLocalTxSubmissionClient</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-468"></span><span>  </span><span class="annot"><span class="annottext">(TxInMode -&gt; GenTx block)
-&gt; (HardForkApplyTxErr
      (ByronBlock : CardanoShelleyEras StandardCrypto)
    -&gt; TxValidationErrorInCardanoMode)
-&gt; LocalTxSubmissionClient
     TxInMode TxValidationErrorInCardanoMode m a
-&gt; LocalTxSubmissionClient
     (GenTx block)
     (HardForkApplyTxErr
        (ByronBlock : CardanoShelleyEras StandardCrypto))
     m
     a
forall tx tx' reject reject' (m :: * -&gt; *) a.
Functor m =&gt;
(tx -&gt; tx')
-&gt; (reject' -&gt; reject)
-&gt; LocalTxSubmissionClient tx reject m a
-&gt; LocalTxSubmissionClient tx' reject' m a
</span><span class="hs-identifier hs-var">Net.Tx.mapLocalTxSubmissionClient</span></span><span> </span><span class="annot"><span class="annottext">TxInMode -&gt; GenTx block
forall block.
(CardanoBlock StandardCrypto ~ block) =&gt;
TxInMode -&gt; GenTx block
</span><a href="Cardano.Api.InMode.html#toConsensusGenTx"><span class="hs-identifier hs-var">toConsensusGenTx</span></a></span><span> </span><span class="annot"><span class="annottext">ApplyTxErr (CardanoBlock StandardCrypto)
-&gt; TxValidationErrorInCardanoMode
HardForkApplyTxErr (ByronBlock : CardanoShelleyEras StandardCrypto)
-&gt; TxValidationErrorInCardanoMode
forall block.
(CardanoBlock StandardCrypto ~ block) =&gt;
ApplyTxErr block -&gt; TxValidationErrorInCardanoMode
</span><a href="Cardano.Api.InMode.html#fromConsensusApplyTxErr"><span class="hs-identifier hs-var">fromConsensusApplyTxErr</span></a></span><span>
</span><span id="line-469"></span><span>
</span><span id="line-470"></span><span class="annot"><a href="Cardano.Api.IPC.html#convLocalStateQueryClient"><span class="hs-identifier hs-type">convLocalStateQueryClient</span></a></span><span>
</span><span id="line-471"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621681168199"><span class="annot"><a href="#local-6989586621681168199"><span class="hs-identifier hs-type">block</span></a></span></span><span> </span><span id="local-6989586621681168200"><span class="annot"><a href="#local-6989586621681168200"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span id="local-6989586621681168201"><span class="annot"><a href="#local-6989586621681168201"><span class="hs-identifier hs-type">a</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-472"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.2/ouroboros-consensus-cardano-0.12.0.0-2682aec32be4980bdd895fcf97b73f7b333b03e47d14403c8aeca2665540d6b3/share/doc/html/src/Ouroboros.Consensus.Cardano.Block.html#CardanoBlock"><span class="hs-identifier hs-type">Consensus.CardanoBlock</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.2/cardano-ledger-core-1.9.0.0-f4f4585fab77826fe9b38152ea2d70a70689b9295e11fe009b7dd265663dcd0f/share/doc/html/src/Cardano.Ledger.Crypto.html#StandardCrypto"><span class="hs-identifier hs-type">L.StandardCrypto</span></a></span><span> </span><span class="annot"><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#~"><span class="hs-operator hs-type">~</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681168199"><span class="hs-identifier hs-type">block</span></a></span><span>
</span><span id="line-473"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Base.html#Functor"><span class="hs-identifier hs-type">Functor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681168200"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-474"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">LocalStateQueryClient</span></span><span> </span><span class="annot"><a href="Cardano.Api.Block.html#BlockInMode"><span class="hs-identifier hs-type">BlockInMode</span></a></span><span> </span><span class="annot"><a href="Cardano.Api.Block.html#ChainPoint"><span class="hs-identifier hs-type">ChainPoint</span></a></span><span> </span><span class="annot"><a href="Cardano.Api.Query.html#QueryInMode"><span class="hs-identifier hs-type">QueryInMode</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681168200"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681168201"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-475"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">LocalStateQueryClient</span></span><span> </span><span class="annot"><a href="#local-6989586621681168199"><span class="hs-identifier hs-type">block</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Consensus.Point</span></span><span> </span><span class="annot"><a href="#local-6989586621681168199"><span class="hs-identifier hs-type">block</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.2/ouroboros-consensus-0.13.0.1-8aef850169985b5372495195b20258fa7e52a46bbc5e9028955791f7b5578a90/share/doc/html/src/Ouroboros.Consensus.Ledger.Query.html#Query"><span class="hs-identifier hs-type">Consensus.Query</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681168199"><span class="hs-identifier hs-type">block</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621681168200"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681168201"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-476"></span><span id="convLocalStateQueryClient"><span class="annot"><span class="annottext">convLocalStateQueryClient :: forall block (m :: * -&gt; *) a.
(CardanoBlock StandardCrypto ~ block, Functor m) =&gt;
LocalStateQueryClient BlockInMode ChainPoint QueryInMode m a
-&gt; LocalStateQueryClient block (Point block) (Query block) m a
</span><a href="Cardano.Api.IPC.html#convLocalStateQueryClient"><span class="hs-identifier hs-var hs-var">convLocalStateQueryClient</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-477"></span><span>    </span><span class="annot"><span class="annottext">(ChainPoint -&gt; Point block)
-&gt; (forall result. QueryInMode result -&gt; Some (Query block))
-&gt; (forall result result'.
    QueryInMode result -&gt; Query block result' -&gt; result' -&gt; result)
-&gt; LocalStateQueryClient BlockInMode ChainPoint QueryInMode m a
-&gt; LocalStateQueryClient block (Point block) (Query block) m a
forall block block' point point' (query :: * -&gt; *)
       (query' :: * -&gt; *) (m :: * -&gt; *) a.
Functor m =&gt;
(point -&gt; point')
-&gt; (forall result. query result -&gt; Some query')
-&gt; (forall result result'.
    query result -&gt; query' result' -&gt; result' -&gt; result)
-&gt; LocalStateQueryClient block point query m a
-&gt; LocalStateQueryClient block' point' query' m a
</span><span class="hs-identifier hs-var">Net.Query.mapLocalStateQueryClient</span></span><span>
</span><span id="line-478"></span><span>      </span><span class="annot"><span class="annottext">ChainPoint -&gt; Point block
forall block (xs :: [*]).
(HeaderHash block ~ OneEraHash xs) =&gt;
ChainPoint -&gt; Point block
</span><a href="Cardano.Api.Block.html#toConsensusPointHF"><span class="hs-identifier hs-var">toConsensusPointHF</span></a></span><span>
</span><span id="line-479"></span><span>      </span><span class="annot"><span class="annottext">QueryInMode result -&gt; Some (Query block)
forall result. QueryInMode result -&gt; Some (Query block)
forall block result.
(CardanoBlock StandardCrypto ~ block) =&gt;
QueryInMode result -&gt; Some (Query block)
</span><a href="Cardano.Api.Query.html#toConsensusQuery"><span class="hs-identifier hs-var">toConsensusQuery</span></a></span><span>
</span><span id="line-480"></span><span>      </span><span class="annot"><span class="annottext">QueryInMode result -&gt; Query block result' -&gt; result' -&gt; result
forall result result'.
QueryInMode result -&gt; Query block result' -&gt; result' -&gt; result
forall block result result'.
(HasCallStack, CardanoBlock StandardCrypto ~ block) =&gt;
QueryInMode result -&gt; Query block result' -&gt; result' -&gt; result
</span><a href="Cardano.Api.Query.html#fromConsensusQueryResult"><span class="hs-identifier hs-var">fromConsensusQueryResult</span></a></span><span>
</span><span id="line-481"></span><span>
</span><span id="line-482"></span><span class="hs-comment">--TODO: Move to consensus</span><span>
</span><span id="line-483"></span><span class="annot"><a href="Cardano.Api.IPC.html#mapLocalTxMonitoringClient"><span class="hs-identifier hs-type">mapLocalTxMonitoringClient</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621681168209"><span class="annot"><a href="#local-6989586621681168209"><span class="hs-identifier hs-type">txid</span></a></span></span><span> </span><span id="local-6989586621681168210"><span class="annot"><a href="#local-6989586621681168210"><span class="hs-identifier hs-type">txid'</span></a></span></span><span> </span><span id="local-6989586621681168212"><span class="annot"><a href="#local-6989586621681168212"><span class="hs-identifier hs-type">tx</span></a></span></span><span> </span><span id="local-6989586621681168211"><span class="annot"><a href="#local-6989586621681168211"><span class="hs-identifier hs-type">tx'</span></a></span></span><span> </span><span id="local-6989586621681168208"><span class="annot"><a href="#local-6989586621681168208"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span id="local-6989586621681168213"><span class="annot"><a href="#local-6989586621681168213"><span class="hs-identifier hs-type">a</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-484"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Base.html#Functor"><span class="hs-identifier hs-type">Functor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681168208"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-485"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681168209"><span class="hs-identifier hs-type">txid</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681168210"><span class="hs-identifier hs-type">txid'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-486"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681168211"><span class="hs-identifier hs-type">tx'</span></a></span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681168212"><span class="hs-identifier hs-type">tx</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-487"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">LocalTxMonitorClient</span></span><span> </span><span class="annot"><a href="#local-6989586621681168209"><span class="hs-identifier hs-type">txid</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681168212"><span class="hs-identifier hs-type">tx</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">SlotNo</span></span><span> </span><span class="annot"><a href="#local-6989586621681168208"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681168213"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-488"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">LocalTxMonitorClient</span></span><span> </span><span class="annot"><a href="#local-6989586621681168210"><span class="hs-identifier hs-type">txid'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681168211"><span class="hs-identifier hs-type">tx'</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">SlotNo</span></span><span> </span><span class="annot"><a href="#local-6989586621681168208"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681168213"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-489"></span><span id="mapLocalTxMonitoringClient"><span class="annot"><span class="annottext">mapLocalTxMonitoringClient :: forall txid txid' tx tx' (m :: * -&gt; *) a.
Functor m =&gt;
(txid -&gt; txid')
-&gt; (tx' -&gt; tx)
-&gt; LocalTxMonitorClient txid tx SlotNo m a
-&gt; LocalTxMonitorClient txid' tx' SlotNo m a
</span><a href="Cardano.Api.IPC.html#mapLocalTxMonitoringClient"><span class="hs-identifier hs-var hs-var">mapLocalTxMonitoringClient</span></a></span></span><span> </span><span id="local-6989586621681168872"><span class="annot"><span class="annottext">txid -&gt; txid'
</span><a href="#local-6989586621681168872"><span class="hs-identifier hs-var">convTxid</span></a></span></span><span> </span><span id="local-6989586621681168873"><span class="annot"><span class="annottext">tx' -&gt; tx
</span><a href="#local-6989586621681168873"><span class="hs-identifier hs-var">convTx</span></a></span></span><span> </span><span id="local-6989586621681168874"><span class="annot"><span class="annottext">LocalTxMonitorClient txid tx SlotNo m a
</span><a href="#local-6989586621681168874"><span class="hs-identifier hs-var">ltxmc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-490"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span class="annot"><span class="hs-identifier hs-type">LocalTxMonitorClient</span></span><span> </span><span id="local-6989586621681168876"><span class="annot"><span class="annottext">m (ClientStIdle txid tx SlotNo m a)
</span><a href="#local-6989586621681168876"><span class="hs-identifier hs-var">idleEff</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LocalTxMonitorClient txid tx SlotNo m a
</span><a href="#local-6989586621681168874"><span class="hs-identifier hs-var">ltxmc</span></a></span><span>
</span><span id="line-491"></span><span>  </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">m (ClientStIdle txid' tx' SlotNo m a)
-&gt; LocalTxMonitorClient txid' tx' SlotNo m a
forall txid tx slot (m :: * -&gt; *) a.
m (ClientStIdle txid tx slot m a)
-&gt; LocalTxMonitorClient txid tx slot m a
</span><span class="hs-identifier hs-var">LocalTxMonitorClient</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(ClientStIdle txid tx SlotNo m a
 -&gt; ClientStIdle txid' tx' SlotNo m a)
-&gt; m (ClientStIdle txid tx SlotNo m a)
-&gt; m (ClientStIdle txid' tx' SlotNo m a)
forall a b. (a -&gt; b) -&gt; m a -&gt; m b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Base.html#fmap"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">ClientStIdle txid tx SlotNo m a
-&gt; ClientStIdle txid' tx' SlotNo m a
</span><a href="#local-6989586621681168877"><span class="hs-identifier hs-var">convClientStateIdle</span></a></span><span> </span><span class="annot"><span class="annottext">m (ClientStIdle txid tx SlotNo m a)
</span><a href="#local-6989586621681168876"><span class="hs-identifier hs-var">idleEff</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-492"></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-493"></span><span>   </span><span class="annot"><a href="#local-6989586621681168877"><span class="hs-identifier hs-type">convClientStateIdle</span></a></span><span>
</span><span id="line-494"></span><span>     </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">CTxMon.ClientStIdle</span></span><span> </span><span class="annot"><a href="#local-6989586621681168209"><span class="hs-identifier hs-type">txid</span></a></span><span>  </span><span class="annot"><a href="#local-6989586621681168212"><span class="hs-identifier hs-type">tx</span></a></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">SlotNo</span></span><span> </span><span class="annot"><a href="#local-6989586621681168208"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681168213"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-495"></span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">CTxMon.ClientStIdle</span></span><span> </span><span class="annot"><a href="#local-6989586621681168210"><span class="hs-identifier hs-type">txid'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681168211"><span class="hs-identifier hs-type">tx'</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">SlotNo</span></span><span> </span><span class="annot"><a href="#local-6989586621681168208"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681168213"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-496"></span><span>   </span><span id="local-6989586621681168877"><span class="annot"><span class="annottext">convClientStateIdle :: ClientStIdle txid tx SlotNo m a
-&gt; ClientStIdle txid' tx' SlotNo m a
</span><a href="#local-6989586621681168877"><span class="hs-identifier hs-var hs-var">convClientStateIdle</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">CTxMon.SendMsgAcquire</span></span><span> </span><span id="local-6989586621681168879"><span class="annot"><span class="annottext">SlotNo -&gt; m (ClientStAcquired txid tx SlotNo m a)
</span><a href="#local-6989586621681168879"><span class="hs-identifier hs-var">f</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-497"></span><span>     </span><span class="annot"><span class="annottext">(SlotNo -&gt; m (ClientStAcquired txid' tx' SlotNo m a))
-&gt; ClientStIdle txid' tx' SlotNo m a
forall slot (m :: * -&gt; *) txid tx a.
(slot -&gt; m (ClientStAcquired txid tx slot m a))
-&gt; ClientStIdle txid tx slot m a
</span><span class="hs-identifier hs-var">CTxMon.SendMsgAcquire</span></span><span> </span><span class="annot"><span class="annottext">((SlotNo -&gt; m (ClientStAcquired txid' tx' SlotNo m a))
 -&gt; ClientStIdle txid' tx' SlotNo m a)
-&gt; (SlotNo -&gt; m (ClientStAcquired txid' tx' SlotNo m a))
-&gt; ClientStIdle txid' tx' SlotNo m a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(m (ClientStAcquired txid tx SlotNo m a)
 -&gt; m (ClientStAcquired txid' tx' SlotNo m a))
-&gt; (SlotNo -&gt; m (ClientStAcquired txid tx SlotNo m a))
-&gt; SlotNo
-&gt; m (ClientStAcquired txid' tx' SlotNo m a)
forall a b. (a -&gt; b) -&gt; (SlotNo -&gt; a) -&gt; SlotNo -&gt; b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Base.html#fmap"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">((m (ClientStAcquired txid tx SlotNo m a)
  -&gt; m (ClientStAcquired txid' tx' SlotNo m a))
 -&gt; (SlotNo -&gt; m (ClientStAcquired txid tx SlotNo m a))
 -&gt; SlotNo
 -&gt; m (ClientStAcquired txid' tx' SlotNo m a))
-&gt; ((ClientStAcquired txid tx SlotNo m a
     -&gt; ClientStAcquired txid' tx' SlotNo m a)
    -&gt; m (ClientStAcquired txid tx SlotNo m a)
    -&gt; m (ClientStAcquired txid' tx' SlotNo m a))
-&gt; (ClientStAcquired txid tx SlotNo m a
    -&gt; ClientStAcquired txid' tx' SlotNo m a)
-&gt; (SlotNo -&gt; m (ClientStAcquired txid tx SlotNo m a))
-&gt; SlotNo
-&gt; m (ClientStAcquired txid' tx' SlotNo m a)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(ClientStAcquired txid tx SlotNo m a
 -&gt; ClientStAcquired txid' tx' SlotNo m a)
-&gt; m (ClientStAcquired txid tx SlotNo m a)
-&gt; m (ClientStAcquired txid' tx' SlotNo m a)
forall a b. (a -&gt; b) -&gt; m a -&gt; m b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Base.html#fmap"><span class="hs-identifier hs-var">fmap</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">ClientStAcquired txid tx SlotNo m a
-&gt; ClientStAcquired txid' tx' SlotNo m a
</span><a href="#local-6989586621681168880"><span class="hs-identifier hs-var">convClientStateAcquired</span></a></span><span> </span><span class="annot"><span class="annottext">SlotNo -&gt; m (ClientStAcquired txid tx SlotNo m a)
</span><a href="#local-6989586621681168879"><span class="hs-identifier hs-var">f</span></a></span><span>
</span><span id="line-498"></span><span>   </span><span class="annot"><a href="#local-6989586621681168877"><span class="hs-identifier hs-var">convClientStateIdle</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">CTxMon.SendMsgDone</span></span><span> </span><span id="local-6989586621681168882"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681168882"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a -&gt; ClientStIdle txid' tx' SlotNo m a
forall a txid tx slot (m :: * -&gt; *).
a -&gt; ClientStIdle txid tx slot m a
</span><span class="hs-identifier hs-var">CTxMon.SendMsgDone</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681168882"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-499"></span><span>
</span><span id="line-500"></span><span>   </span><span class="annot"><a href="#local-6989586621681168880"><span class="hs-identifier hs-type">convClientStateAcquired</span></a></span><span>
</span><span id="line-501"></span><span>     </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">CTxMon.ClientStAcquired</span></span><span> </span><span class="annot"><a href="#local-6989586621681168209"><span class="hs-identifier hs-type">txid</span></a></span><span>  </span><span class="annot"><a href="#local-6989586621681168212"><span class="hs-identifier hs-type">tx</span></a></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">SlotNo</span></span><span> </span><span class="annot"><a href="#local-6989586621681168208"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681168213"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-502"></span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">CTxMon.ClientStAcquired</span></span><span> </span><span class="annot"><a href="#local-6989586621681168210"><span class="hs-identifier hs-type">txid'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681168211"><span class="hs-identifier hs-type">tx'</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">SlotNo</span></span><span> </span><span class="annot"><a href="#local-6989586621681168208"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681168213"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-503"></span><span>   </span><span id="local-6989586621681168880"><span class="annot"><span class="annottext">convClientStateAcquired :: ClientStAcquired txid tx SlotNo m a
-&gt; ClientStAcquired txid' tx' SlotNo m a
</span><a href="#local-6989586621681168880"><span class="hs-identifier hs-var hs-var">convClientStateAcquired</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">CTxMon.SendMsgNextTx</span></span><span> </span><span id="local-6989586621681168884"><span class="annot"><span class="annottext">Maybe tx -&gt; m (ClientStAcquired txid tx SlotNo m a)
</span><a href="#local-6989586621681168884"><span class="hs-identifier hs-var">f</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-504"></span><span>     </span><span class="annot"><span class="annottext">(Maybe tx' -&gt; m (ClientStAcquired txid' tx' SlotNo m a))
-&gt; ClientStAcquired txid' tx' SlotNo m a
forall tx (m :: * -&gt; *) txid slot a.
(Maybe tx -&gt; m (ClientStAcquired txid tx slot m a))
-&gt; ClientStAcquired txid tx slot m a
</span><span class="hs-identifier hs-var">CTxMon.SendMsgNextTx</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621681168885"><span class="annot"><span class="annottext">Maybe tx'
</span><a href="#local-6989586621681168885"><span class="hs-identifier hs-var">mTx</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ClientStAcquired txid tx SlotNo m a
-&gt; ClientStAcquired txid' tx' SlotNo m a
</span><a href="#local-6989586621681168880"><span class="hs-identifier hs-var">convClientStateAcquired</span></a></span><span> </span><span class="annot"><span class="annottext">(ClientStAcquired txid tx SlotNo m a
 -&gt; ClientStAcquired txid' tx' SlotNo m a)
-&gt; m (ClientStAcquired txid tx SlotNo m a)
-&gt; m (ClientStAcquired txid' tx' SlotNo m a)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe tx -&gt; m (ClientStAcquired txid tx SlotNo m a)
</span><a href="#local-6989586621681168884"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">tx' -&gt; tx
</span><a href="#local-6989586621681168873"><span class="hs-identifier hs-var">convTx</span></a></span><span> </span><span class="annot"><span class="annottext">(tx' -&gt; tx) -&gt; Maybe tx' -&gt; Maybe tx
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe tx'
</span><a href="#local-6989586621681168885"><span class="hs-identifier hs-var">mTx</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-505"></span><span>   </span><span class="annot"><a href="#local-6989586621681168880"><span class="hs-identifier hs-var">convClientStateAcquired</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">CTxMon.SendMsgHasTx</span></span><span> </span><span id="local-6989586621681168887"><span class="annot"><span class="annottext">txid
</span><a href="#local-6989586621681168887"><span class="hs-identifier hs-var">txid</span></a></span></span><span> </span><span id="local-6989586621681168888"><span class="annot"><span class="annottext">Bool -&gt; m (ClientStAcquired txid tx SlotNo m a)
</span><a href="#local-6989586621681168888"><span class="hs-identifier hs-var">f</span></a></span></span><span class="hs-special">)</span><span class="hs-glyph">=</span><span>
</span><span id="line-506"></span><span>     </span><span class="annot"><span class="annottext">txid'
-&gt; (Bool -&gt; m (ClientStAcquired txid' tx' SlotNo m a))
-&gt; ClientStAcquired txid' tx' SlotNo m a
forall txid (m :: * -&gt; *) tx slot a.
txid
-&gt; (Bool -&gt; m (ClientStAcquired txid tx slot m a))
-&gt; ClientStAcquired txid tx slot m a
</span><span class="hs-identifier hs-var">CTxMon.SendMsgHasTx</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">txid -&gt; txid'
</span><a href="#local-6989586621681168872"><span class="hs-identifier hs-var">convTxid</span></a></span><span> </span><span class="annot"><span class="annottext">txid
</span><a href="#local-6989586621681168887"><span class="hs-identifier hs-var">txid</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">(m (ClientStAcquired txid tx SlotNo m a)
 -&gt; m (ClientStAcquired txid' tx' SlotNo m a))
-&gt; (Bool -&gt; m (ClientStAcquired txid tx SlotNo m a))
-&gt; Bool
-&gt; m (ClientStAcquired txid' tx' SlotNo m a)
forall a b. (a -&gt; b) -&gt; (Bool -&gt; a) -&gt; Bool -&gt; b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Base.html#fmap"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">((m (ClientStAcquired txid tx SlotNo m a)
  -&gt; m (ClientStAcquired txid' tx' SlotNo m a))
 -&gt; (Bool -&gt; m (ClientStAcquired txid tx SlotNo m a))
 -&gt; Bool
 -&gt; m (ClientStAcquired txid' tx' SlotNo m a))
-&gt; ((ClientStAcquired txid tx SlotNo m a
     -&gt; ClientStAcquired txid' tx' SlotNo m a)
    -&gt; m (ClientStAcquired txid tx SlotNo m a)
    -&gt; m (ClientStAcquired txid' tx' SlotNo m a))
-&gt; (ClientStAcquired txid tx SlotNo m a
    -&gt; ClientStAcquired txid' tx' SlotNo m a)
-&gt; (Bool -&gt; m (ClientStAcquired txid tx SlotNo m a))
-&gt; Bool
-&gt; m (ClientStAcquired txid' tx' SlotNo m a)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(ClientStAcquired txid tx SlotNo m a
 -&gt; ClientStAcquired txid' tx' SlotNo m a)
-&gt; m (ClientStAcquired txid tx SlotNo m a)
-&gt; m (ClientStAcquired txid' tx' SlotNo m a)
forall a b. (a -&gt; b) -&gt; m a -&gt; m b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Base.html#fmap"><span class="hs-identifier hs-var">fmap</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">ClientStAcquired txid tx SlotNo m a
-&gt; ClientStAcquired txid' tx' SlotNo m a
</span><a href="#local-6989586621681168880"><span class="hs-identifier hs-var">convClientStateAcquired</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; m (ClientStAcquired txid tx SlotNo m a)
</span><a href="#local-6989586621681168888"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-507"></span><span>   </span><span class="annot"><a href="#local-6989586621681168880"><span class="hs-identifier hs-var">convClientStateAcquired</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">CTxMon.SendMsgGetSizes</span></span><span> </span><span id="local-6989586621681168890"><span class="annot"><span class="annottext">MempoolSizeAndCapacity -&gt; m (ClientStAcquired txid tx SlotNo m a)
</span><a href="#local-6989586621681168890"><span class="hs-identifier hs-var">f</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-508"></span><span>     </span><span class="annot"><span class="annottext">(MempoolSizeAndCapacity
 -&gt; m (ClientStAcquired txid' tx' SlotNo m a))
-&gt; ClientStAcquired txid' tx' SlotNo m a
forall (m :: * -&gt; *) txid tx slot a.
(MempoolSizeAndCapacity -&gt; m (ClientStAcquired txid tx slot m a))
-&gt; ClientStAcquired txid tx slot m a
</span><span class="hs-identifier hs-var">CTxMon.SendMsgGetSizes</span></span><span> </span><span class="annot"><span class="annottext">((MempoolSizeAndCapacity
  -&gt; m (ClientStAcquired txid' tx' SlotNo m a))
 -&gt; ClientStAcquired txid' tx' SlotNo m a)
-&gt; (MempoolSizeAndCapacity
    -&gt; m (ClientStAcquired txid' tx' SlotNo m a))
-&gt; ClientStAcquired txid' tx' SlotNo m a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(m (ClientStAcquired txid tx SlotNo m a)
 -&gt; m (ClientStAcquired txid' tx' SlotNo m a))
-&gt; (MempoolSizeAndCapacity
    -&gt; m (ClientStAcquired txid tx SlotNo m a))
-&gt; MempoolSizeAndCapacity
-&gt; m (ClientStAcquired txid' tx' SlotNo m a)
forall a b.
(a -&gt; b)
-&gt; (MempoolSizeAndCapacity -&gt; a) -&gt; MempoolSizeAndCapacity -&gt; b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Base.html#fmap"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">((m (ClientStAcquired txid tx SlotNo m a)
  -&gt; m (ClientStAcquired txid' tx' SlotNo m a))
 -&gt; (MempoolSizeAndCapacity
     -&gt; m (ClientStAcquired txid tx SlotNo m a))
 -&gt; MempoolSizeAndCapacity
 -&gt; m (ClientStAcquired txid' tx' SlotNo m a))
-&gt; ((ClientStAcquired txid tx SlotNo m a
     -&gt; ClientStAcquired txid' tx' SlotNo m a)
    -&gt; m (ClientStAcquired txid tx SlotNo m a)
    -&gt; m (ClientStAcquired txid' tx' SlotNo m a))
-&gt; (ClientStAcquired txid tx SlotNo m a
    -&gt; ClientStAcquired txid' tx' SlotNo m a)
-&gt; (MempoolSizeAndCapacity
    -&gt; m (ClientStAcquired txid tx SlotNo m a))
-&gt; MempoolSizeAndCapacity
-&gt; m (ClientStAcquired txid' tx' SlotNo m a)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(ClientStAcquired txid tx SlotNo m a
 -&gt; ClientStAcquired txid' tx' SlotNo m a)
-&gt; m (ClientStAcquired txid tx SlotNo m a)
-&gt; m (ClientStAcquired txid' tx' SlotNo m a)
forall a b. (a -&gt; b) -&gt; m a -&gt; m b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Base.html#fmap"><span class="hs-identifier hs-var">fmap</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">ClientStAcquired txid tx SlotNo m a
-&gt; ClientStAcquired txid' tx' SlotNo m a
</span><a href="#local-6989586621681168880"><span class="hs-identifier hs-var">convClientStateAcquired</span></a></span><span> </span><span class="annot"><span class="annottext">MempoolSizeAndCapacity -&gt; m (ClientStAcquired txid tx SlotNo m a)
</span><a href="#local-6989586621681168890"><span class="hs-identifier hs-var">f</span></a></span><span>
</span><span id="line-509"></span><span>   </span><span class="annot"><a href="#local-6989586621681168880"><span class="hs-identifier hs-var">convClientStateAcquired</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">CTxMon.SendMsgAwaitAcquire</span></span><span> </span><span id="local-6989586621681168892"><span class="annot"><span class="annottext">SlotNo -&gt; m (ClientStAcquired txid tx SlotNo m a)
</span><a href="#local-6989586621681168892"><span class="hs-identifier hs-var">f</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-510"></span><span>     </span><span class="annot"><span class="annottext">(SlotNo -&gt; m (ClientStAcquired txid' tx' SlotNo m a))
-&gt; ClientStAcquired txid' tx' SlotNo m a
forall slot (m :: * -&gt; *) txid tx a.
(slot -&gt; m (ClientStAcquired txid tx slot m a))
-&gt; ClientStAcquired txid tx slot m a
</span><span class="hs-identifier hs-var">CTxMon.SendMsgAwaitAcquire</span></span><span> </span><span class="annot"><span class="annottext">((SlotNo -&gt; m (ClientStAcquired txid' tx' SlotNo m a))
 -&gt; ClientStAcquired txid' tx' SlotNo m a)
-&gt; (SlotNo -&gt; m (ClientStAcquired txid' tx' SlotNo m a))
-&gt; ClientStAcquired txid' tx' SlotNo m a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(m (ClientStAcquired txid tx SlotNo m a)
 -&gt; m (ClientStAcquired txid' tx' SlotNo m a))
-&gt; (SlotNo -&gt; m (ClientStAcquired txid tx SlotNo m a))
-&gt; SlotNo
-&gt; m (ClientStAcquired txid' tx' SlotNo m a)
forall a b. (a -&gt; b) -&gt; (SlotNo -&gt; a) -&gt; SlotNo -&gt; b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Base.html#fmap"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">((m (ClientStAcquired txid tx SlotNo m a)
  -&gt; m (ClientStAcquired txid' tx' SlotNo m a))
 -&gt; (SlotNo -&gt; m (ClientStAcquired txid tx SlotNo m a))
 -&gt; SlotNo
 -&gt; m (ClientStAcquired txid' tx' SlotNo m a))
-&gt; ((ClientStAcquired txid tx SlotNo m a
     -&gt; ClientStAcquired txid' tx' SlotNo m a)
    -&gt; m (ClientStAcquired txid tx SlotNo m a)
    -&gt; m (ClientStAcquired txid' tx' SlotNo m a))
-&gt; (ClientStAcquired txid tx SlotNo m a
    -&gt; ClientStAcquired txid' tx' SlotNo m a)
-&gt; (SlotNo -&gt; m (ClientStAcquired txid tx SlotNo m a))
-&gt; SlotNo
-&gt; m (ClientStAcquired txid' tx' SlotNo m a)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(ClientStAcquired txid tx SlotNo m a
 -&gt; ClientStAcquired txid' tx' SlotNo m a)
-&gt; m (ClientStAcquired txid tx SlotNo m a)
-&gt; m (ClientStAcquired txid' tx' SlotNo m a)
forall a b. (a -&gt; b) -&gt; m a -&gt; m b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Base.html#fmap"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">ClientStAcquired txid tx SlotNo m a
-&gt; ClientStAcquired txid' tx' SlotNo m a
</span><a href="#local-6989586621681168880"><span class="hs-identifier hs-var">convClientStateAcquired</span></a></span><span> </span><span class="annot"><span class="annottext">SlotNo -&gt; m (ClientStAcquired txid tx SlotNo m a)
</span><a href="#local-6989586621681168892"><span class="hs-identifier hs-var">f</span></a></span><span>
</span><span id="line-511"></span><span>   </span><span class="annot"><a href="#local-6989586621681168880"><span class="hs-identifier hs-var">convClientStateAcquired</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">CTxMon.SendMsgRelease</span></span><span> </span><span id="local-6989586621681168894"><span class="annot"><span class="annottext">m (ClientStIdle txid tx SlotNo m a)
</span><a href="#local-6989586621681168894"><span class="hs-identifier hs-var">eff</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-512"></span><span>     </span><span class="annot"><span class="annottext">m (ClientStIdle txid' tx' SlotNo m a)
-&gt; ClientStAcquired txid' tx' SlotNo m a
forall (m :: * -&gt; *) txid tx slot a.
m (ClientStIdle txid tx slot m a)
-&gt; ClientStAcquired txid tx slot m a
</span><span class="hs-identifier hs-var">CTxMon.SendMsgRelease</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ClientStIdle txid tx SlotNo m a
-&gt; ClientStIdle txid' tx' SlotNo m a
</span><a href="#local-6989586621681168877"><span class="hs-identifier hs-var">convClientStateIdle</span></a></span><span> </span><span class="annot"><span class="annottext">(ClientStIdle txid tx SlotNo m a
 -&gt; ClientStIdle txid' tx' SlotNo m a)
-&gt; m (ClientStIdle txid tx SlotNo m a)
-&gt; m (ClientStIdle txid' tx' SlotNo m a)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">m (ClientStIdle txid tx SlotNo m a)
</span><a href="#local-6989586621681168894"><span class="hs-identifier hs-var">eff</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-513"></span><span>
</span><span id="line-514"></span><span class="hs-comment">-- ----------------------------------------------------------------------------</span><span>
</span><span id="line-515"></span><span class="hs-comment">-- Wrappers for specific protocol use-cases</span><span>
</span><span id="line-516"></span><span class="hs-comment">--</span><span>
</span><span id="line-517"></span><span>
</span><span id="line-518"></span><span class="hs-comment">--TODO: change this query to be just a protocol client handler to be used with</span><span>
</span><span id="line-519"></span><span class="hs-comment">-- connectToLocalNode. This would involve changing connectToLocalNode to be</span><span>
</span><span id="line-520"></span><span class="hs-comment">-- able to return protocol handler results properly.</span><span>
</span><span id="line-521"></span><span>
</span><span id="line-522"></span><span class="hs-comment">-- | Establish a connection to a node and execute a single query using the</span><span>
</span><span id="line-523"></span><span class="hs-comment">-- local state query protocol.</span><span>
</span><span id="line-524"></span><span class="hs-comment">--</span><span>
</span><span id="line-525"></span><span>
</span><span id="line-526"></span><span class="hs-keyword">data</span><span> </span><span id="AcquiringFailure"><span class="annot"><a href="Cardano.Api.IPC.html#AcquiringFailure"><span class="hs-identifier hs-var">AcquiringFailure</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="AFPointTooOld"><span class="annot"><a href="Cardano.Api.IPC.html#AFPointTooOld"><span class="hs-identifier hs-var">AFPointTooOld</span></a></span></span><span>
</span><span id="line-527"></span><span>                      </span><span class="hs-glyph">|</span><span> </span><span id="AFPointNotOnChain"><span class="annot"><a href="Cardano.Api.IPC.html#AFPointNotOnChain"><span class="hs-identifier hs-var">AFPointNotOnChain</span></a></span></span><span>
</span><span id="line-528"></span><span>                      </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681168898"><span id="local-6989586621681168900"><span class="annot"><span class="annottext">AcquiringFailure -&gt; AcquiringFailure -&gt; Bool
(AcquiringFailure -&gt; AcquiringFailure -&gt; Bool)
-&gt; (AcquiringFailure -&gt; AcquiringFailure -&gt; Bool)
-&gt; Eq AcquiringFailure
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: AcquiringFailure -&gt; AcquiringFailure -&gt; Bool
== :: AcquiringFailure -&gt; AcquiringFailure -&gt; Bool
$c/= :: AcquiringFailure -&gt; AcquiringFailure -&gt; Bool
/= :: AcquiringFailure -&gt; AcquiringFailure -&gt; Bool
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/ghc-prim-0.10.0/src/GHC.Classes.html#Eq"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681168905"><span id="local-6989586621681168907"><span id="local-6989586621681168911"><span class="annot"><span class="annottext">Int -&gt; AcquiringFailure -&gt; ShowS
[AcquiringFailure] -&gt; ShowS
AcquiringFailure -&gt; FilePath
(Int -&gt; AcquiringFailure -&gt; ShowS)
-&gt; (AcquiringFailure -&gt; FilePath)
-&gt; ([AcquiringFailure] -&gt; ShowS)
-&gt; Show AcquiringFailure
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; FilePath) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: Int -&gt; AcquiringFailure -&gt; ShowS
showsPrec :: Int -&gt; AcquiringFailure -&gt; ShowS
$cshow :: AcquiringFailure -&gt; FilePath
show :: AcquiringFailure -&gt; FilePath
$cshowList :: [AcquiringFailure] -&gt; ShowS
showList :: [AcquiringFailure] -&gt; ShowS
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Show.html#Show"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-529"></span><span>
</span><span id="line-530"></span><span class="annot"><a href="Cardano.Api.IPC.html#toAcquiringFailure"><span class="hs-identifier hs-type">toAcquiringFailure</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Net.Query.AcquireFailure</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cardano.Api.IPC.html#AcquiringFailure"><span class="hs-identifier hs-type">AcquiringFailure</span></a></span><span>
</span><span id="line-531"></span><span id="toAcquiringFailure"><span class="annot"><span class="annottext">toAcquiringFailure :: AcquireFailure -&gt; AcquiringFailure
</span><a href="Cardano.Api.IPC.html#toAcquiringFailure"><span class="hs-identifier hs-var hs-var">toAcquiringFailure</span></a></span></span><span> </span><span class="annot"><span class="annottext">AcquireFailure
</span><span class="hs-identifier hs-var">AcquireFailurePointTooOld</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">AcquiringFailure
</span><a href="Cardano.Api.IPC.html#AFPointTooOld"><span class="hs-identifier hs-var">AFPointTooOld</span></a></span><span>
</span><span id="line-532"></span><span class="annot"><a href="Cardano.Api.IPC.html#toAcquiringFailure"><span class="hs-identifier hs-var">toAcquiringFailure</span></a></span><span> </span><span class="annot"><span class="annottext">AcquireFailure
</span><span class="hs-identifier hs-var">AcquireFailurePointNotOnChain</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">AcquiringFailure
</span><a href="Cardano.Api.IPC.html#AFPointNotOnChain"><span class="hs-identifier hs-var">AFPointNotOnChain</span></a></span><span>
</span><span id="line-533"></span><span>
</span><span id="line-534"></span><span class="annot"><a href="Cardano.Api.IPC.html#queryNodeLocalState"><span class="hs-identifier hs-type">queryNodeLocalState</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621681168312"><span class="annot"><a href="#local-6989586621681168312"><span class="hs-identifier hs-type">result</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-535"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Cardano.Api.IPC.html#LocalNodeConnectInfo"><span class="hs-identifier hs-type">LocalNodeConnectInfo</span></a></span><span>
</span><span id="line-536"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="Cardano.Api.Block.html#ChainPoint"><span class="hs-identifier hs-type">ChainPoint</span></a></span><span>
</span><span id="line-537"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cardano.Api.Query.html#QueryInMode"><span class="hs-identifier hs-type">QueryInMode</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681168312"><span class="hs-identifier hs-type">result</span></a></span><span>
</span><span id="line-538"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/Data.Either.html#Either"><span class="hs-identifier hs-type">Either</span></a></span><span> </span><span class="annot"><a href="Cardano.Api.IPC.html#AcquiringFailure"><span class="hs-identifier hs-type">AcquiringFailure</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681168312"><span class="hs-identifier hs-type">result</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-539"></span><span id="queryNodeLocalState"><span class="annot"><span class="annottext">queryNodeLocalState :: forall result.
LocalNodeConnectInfo
-&gt; Maybe ChainPoint
-&gt; QueryInMode result
-&gt; IO (Either AcquiringFailure result)
</span><a href="Cardano.Api.IPC.html#queryNodeLocalState"><span class="hs-identifier hs-var hs-var">queryNodeLocalState</span></a></span></span><span> </span><span id="local-6989586621681168925"><span class="annot"><span class="annottext">LocalNodeConnectInfo
</span><a href="#local-6989586621681168925"><span class="hs-identifier hs-var">connctInfo</span></a></span></span><span> </span><span id="local-6989586621681168926"><span class="annot"><span class="annottext">Maybe ChainPoint
</span><a href="#local-6989586621681168926"><span class="hs-identifier hs-var">mpoint</span></a></span></span><span> </span><span id="local-6989586621681168927"><span class="annot"><span class="annottext">QueryInMode result
</span><a href="#local-6989586621681168927"><span class="hs-identifier hs-var">query</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-540"></span><span>    </span><span id="local-6989586621681168928"><span class="annot"><span class="annottext">TMVar (Either AcquiringFailure result)
</span><a href="#local-6989586621681168928"><span class="hs-identifier hs-var">resultVar</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO (TMVar (Either AcquiringFailure result))
forall a. IO (TMVar a)
</span><span class="hs-identifier hs-var">newEmptyTMVarIO</span></span><span>
</span><span id="line-541"></span><span>    </span><span class="annot"><span class="annottext">LocalNodeConnectInfo -&gt; LocalNodeClientProtocolsInMode -&gt; IO ()
</span><a href="Cardano.Api.IPC.html#connectToLocalNode"><span class="hs-identifier hs-var">connectToLocalNode</span></a></span><span>
</span><span id="line-542"></span><span>      </span><span class="annot"><span class="annottext">LocalNodeConnectInfo
</span><a href="#local-6989586621681168925"><span class="hs-identifier hs-var">connctInfo</span></a></span><span>
</span><span id="line-543"></span><span>      </span><span class="annot"><a href="Cardano.Api.IPC.html#LocalNodeClientProtocols"><span class="hs-identifier hs-type">LocalNodeClientProtocols</span></a></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-544"></span><span>        </span><span class="annot"><span class="annottext">localChainSyncClient :: LocalChainSyncClient BlockInMode ChainPoint ChainTip IO
</span><a href="Cardano.Api.IPC.html#localChainSyncClient"><span class="hs-identifier hs-var">localChainSyncClient</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LocalChainSyncClient BlockInMode ChainPoint ChainTip IO
forall block point tip (m :: * -&gt; *).
LocalChainSyncClient block point tip m
</span><a href="Cardano.Api.IPC.html#NoLocalChainSyncClient"><span class="hs-identifier hs-var">NoLocalChainSyncClient</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-545"></span><span>        </span><span class="annot"><span class="annottext">localStateQueryClient :: Maybe
  (LocalStateQueryClient BlockInMode ChainPoint QueryInMode IO ())
</span><a href="Cardano.Api.IPC.html#localStateQueryClient"><span class="hs-identifier hs-var">localStateQueryClient</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LocalStateQueryClient BlockInMode ChainPoint QueryInMode IO ()
-&gt; Maybe
     (LocalStateQueryClient BlockInMode ChainPoint QueryInMode IO ())
forall a. a -&gt; Maybe a
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe ChainPoint
-&gt; TMVar (Either AcquiringFailure result)
-&gt; LocalStateQueryClient BlockInMode ChainPoint QueryInMode IO ()
</span><a href="#local-6989586621681168929"><span class="hs-identifier hs-var">singleQuery</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe ChainPoint
</span><a href="#local-6989586621681168926"><span class="hs-identifier hs-var">mpoint</span></a></span><span> </span><span class="annot"><span class="annottext">TMVar (Either AcquiringFailure result)
</span><a href="#local-6989586621681168928"><span class="hs-identifier hs-var">resultVar</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-546"></span><span>        </span><span class="annot"><span class="annottext">localTxSubmissionClient :: Maybe
  (LocalTxSubmissionClient
     TxInMode TxValidationErrorInCardanoMode IO ())
</span><a href="Cardano.Api.IPC.html#localTxSubmissionClient"><span class="hs-identifier hs-var">localTxSubmissionClient</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe
  (LocalTxSubmissionClient
     TxInMode TxValidationErrorInCardanoMode IO ())
forall a. Maybe a
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-547"></span><span>        </span><span class="annot"><span class="annottext">localTxMonitoringClient :: Maybe (LocalTxMonitorClient TxIdInMode TxInMode SlotNo IO ())
</span><a href="Cardano.Api.IPC.html#localTxMonitoringClient"><span class="hs-identifier hs-var">localTxMonitoringClient</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe (LocalTxMonitorClient TxIdInMode TxInMode SlotNo IO ())
forall a. Maybe a
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-548"></span><span>      </span><span class="hs-special">}</span><span>
</span><span id="line-549"></span><span>    </span><span class="annot"><span class="annottext">STM (Either AcquiringFailure result)
-&gt; IO (Either AcquiringFailure result)
forall a. STM a -&gt; IO a
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Conc.Sync.html#atomically"><span class="hs-identifier hs-var">atomically</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TMVar (Either AcquiringFailure result)
-&gt; STM (Either AcquiringFailure result)
forall a. TMVar a -&gt; STM a
</span><span class="hs-identifier hs-var">takeTMVar</span></span><span> </span><span class="annot"><span class="annottext">TMVar (Either AcquiringFailure result)
</span><a href="#local-6989586621681168928"><span class="hs-identifier hs-var">resultVar</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-550"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-551"></span><span>    </span><span class="annot"><a href="#local-6989586621681168929"><span class="hs-identifier hs-type">singleQuery</span></a></span><span>
</span><span id="line-552"></span><span>      </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="Cardano.Api.Block.html#ChainPoint"><span class="hs-identifier hs-type">ChainPoint</span></a></span><span>
</span><span id="line-553"></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TMVar</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/Data.Either.html#Either"><span class="hs-identifier hs-type">Either</span></a></span><span> </span><span class="annot"><a href="Cardano.Api.IPC.html#AcquiringFailure"><span class="hs-identifier hs-type">AcquiringFailure</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681168312"><span class="hs-identifier hs-type">result</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-554"></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Net.Query.LocalStateQueryClient</span></span><span> </span><span class="annot"><a href="Cardano.Api.Block.html#BlockInMode"><span class="hs-identifier hs-type">BlockInMode</span></a></span><span> </span><span class="annot"><a href="Cardano.Api.Block.html#ChainPoint"><span class="hs-identifier hs-type">ChainPoint</span></a></span><span> </span><span class="annot"><a href="Cardano.Api.Query.html#QueryInMode"><span class="hs-identifier hs-type">QueryInMode</span></a></span><span> </span><span class="annot"><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-555"></span><span>    </span><span id="local-6989586621681168929"><span class="annot"><span class="annottext">singleQuery :: Maybe ChainPoint
-&gt; TMVar (Either AcquiringFailure result)
-&gt; LocalStateQueryClient BlockInMode ChainPoint QueryInMode IO ()
</span><a href="#local-6989586621681168929"><span class="hs-identifier hs-var hs-var">singleQuery</span></a></span></span><span> </span><span id="local-6989586621681168930"><span class="annot"><span class="annottext">Maybe ChainPoint
</span><a href="#local-6989586621681168930"><span class="hs-identifier hs-var">mPointVar'</span></a></span></span><span> </span><span id="local-6989586621681168931"><span class="annot"><span class="annottext">TMVar (Either AcquiringFailure result)
</span><a href="#local-6989586621681168931"><span class="hs-identifier hs-var">resultVar'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-556"></span><span>      </span><span class="annot"><span class="annottext">IO (ClientStIdle BlockInMode ChainPoint QueryInMode IO ())
-&gt; LocalStateQueryClient BlockInMode ChainPoint QueryInMode IO ()
forall block point (query :: * -&gt; *) (m :: * -&gt; *) a.
m (ClientStIdle block point query m a)
-&gt; LocalStateQueryClient block point query m a
</span><span class="hs-identifier hs-var">LocalStateQueryClient</span></span><span> </span><span class="annot"><span class="annottext">(IO (ClientStIdle BlockInMode ChainPoint QueryInMode IO ())
 -&gt; LocalStateQueryClient BlockInMode ChainPoint QueryInMode IO ())
-&gt; IO (ClientStIdle BlockInMode ChainPoint QueryInMode IO ())
-&gt; LocalStateQueryClient BlockInMode ChainPoint QueryInMode IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-557"></span><span>      </span><span class="annot"><span class="annottext">ClientStIdle BlockInMode ChainPoint QueryInMode IO ()
-&gt; IO (ClientStIdle BlockInMode ChainPoint QueryInMode IO ())
forall a. a -&gt; IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">(ClientStIdle BlockInMode ChainPoint QueryInMode IO ()
 -&gt; IO (ClientStIdle BlockInMode ChainPoint QueryInMode IO ()))
-&gt; ClientStIdle BlockInMode ChainPoint QueryInMode IO ()
-&gt; IO (ClientStIdle BlockInMode ChainPoint QueryInMode IO ())
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-558"></span><span>        </span><span class="annot"><span class="annottext">Maybe ChainPoint
-&gt; ClientStAcquiring BlockInMode ChainPoint QueryInMode IO ()
-&gt; ClientStIdle BlockInMode ChainPoint QueryInMode IO ()
forall point block (query :: * -&gt; *) (m :: * -&gt; *) a.
Maybe point
-&gt; ClientStAcquiring block point query m a
-&gt; ClientStIdle block point query m a
</span><span class="hs-identifier hs-var">Net.Query.SendMsgAcquire</span></span><span> </span><span class="annot"><span class="annottext">Maybe ChainPoint
</span><a href="#local-6989586621681168930"><span class="hs-identifier hs-var">mPointVar'</span></a></span><span> </span><span class="annot"><span class="annottext">(ClientStAcquiring BlockInMode ChainPoint QueryInMode IO ()
 -&gt; ClientStIdle BlockInMode ChainPoint QueryInMode IO ())
-&gt; ClientStAcquiring BlockInMode ChainPoint QueryInMode IO ()
-&gt; ClientStIdle BlockInMode ChainPoint QueryInMode IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-559"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Net.Query.ClientStAcquiring</span></span><span>
</span><span id="line-560"></span><span>          </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">recvMsgAcquired :: IO (ClientStAcquired BlockInMode ChainPoint QueryInMode IO ())
</span><span class="hs-identifier hs-var">Net.Query.recvMsgAcquired</span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-561"></span><span>              </span><span class="annot"><span class="annottext">ClientStAcquired BlockInMode ChainPoint QueryInMode IO ()
-&gt; IO (ClientStAcquired BlockInMode ChainPoint QueryInMode IO ())
forall a. a -&gt; IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">(ClientStAcquired BlockInMode ChainPoint QueryInMode IO ()
 -&gt; IO (ClientStAcquired BlockInMode ChainPoint QueryInMode IO ()))
-&gt; ClientStAcquired BlockInMode ChainPoint QueryInMode IO ()
-&gt; IO (ClientStAcquired BlockInMode ChainPoint QueryInMode IO ())
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">QueryInMode result
-&gt; ClientStQuerying BlockInMode ChainPoint QueryInMode IO () result
-&gt; ClientStAcquired BlockInMode ChainPoint QueryInMode IO ()
forall (query :: * -&gt; *) result block point (m :: * -&gt; *) a.
query result
-&gt; ClientStQuerying block point query m a result
-&gt; ClientStAcquired block point query m a
</span><span class="hs-identifier hs-var">Net.Query.SendMsgQuery</span></span><span> </span><span class="annot"><span class="annottext">QueryInMode result
</span><a href="#local-6989586621681168927"><span class="hs-identifier hs-var">query</span></a></span><span> </span><span class="annot"><span class="annottext">(ClientStQuerying BlockInMode ChainPoint QueryInMode IO () result
 -&gt; ClientStAcquired BlockInMode ChainPoint QueryInMode IO ())
-&gt; ClientStQuerying BlockInMode ChainPoint QueryInMode IO () result
-&gt; ClientStAcquired BlockInMode ChainPoint QueryInMode IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-562"></span><span>                </span><span class="annot"><span class="hs-identifier hs-type">Net.Query.ClientStQuerying</span></span><span>
</span><span id="line-563"></span><span>                  </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">recvMsgResult :: result
-&gt; IO (ClientStAcquired BlockInMode ChainPoint QueryInMode IO ())
</span><span class="hs-identifier hs-var">Net.Query.recvMsgResult</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621681168939"><span class="annot"><span class="annottext">result
</span><a href="#local-6989586621681168939"><span class="hs-identifier hs-var">result</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-564"></span><span>                    </span><span class="annot"><span class="annottext">STM () -&gt; IO ()
forall a. STM a -&gt; IO a
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Conc.Sync.html#atomically"><span class="hs-identifier hs-var">atomically</span></a></span><span> </span><span class="annot"><span class="annottext">(STM () -&gt; IO ()) -&gt; STM () -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">TMVar (Either AcquiringFailure result)
-&gt; Either AcquiringFailure result -&gt; STM ()
forall a. TMVar a -&gt; a -&gt; STM ()
</span><span class="hs-identifier hs-var">putTMVar</span></span><span> </span><span class="annot"><span class="annottext">TMVar (Either AcquiringFailure result)
</span><a href="#local-6989586621681168931"><span class="hs-identifier hs-var">resultVar'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">result -&gt; Either AcquiringFailure result
forall a b. b -&gt; Either a b
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/Data.Either.html#Right"><span class="hs-identifier hs-var">Right</span></a></span><span> </span><span class="annot"><span class="annottext">result
</span><a href="#local-6989586621681168939"><span class="hs-identifier hs-var">result</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-565"></span><span>
</span><span id="line-566"></span><span>                    </span><span class="annot"><span class="annottext">ClientStAcquired BlockInMode ChainPoint QueryInMode IO ()
-&gt; IO (ClientStAcquired BlockInMode ChainPoint QueryInMode IO ())
forall a. a -&gt; IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">(ClientStAcquired BlockInMode ChainPoint QueryInMode IO ()
 -&gt; IO (ClientStAcquired BlockInMode ChainPoint QueryInMode IO ()))
-&gt; ClientStAcquired BlockInMode ChainPoint QueryInMode IO ()
-&gt; IO (ClientStAcquired BlockInMode ChainPoint QueryInMode IO ())
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">IO (ClientStIdle BlockInMode ChainPoint QueryInMode IO ())
-&gt; ClientStAcquired BlockInMode ChainPoint QueryInMode IO ()
forall (m :: * -&gt; *) block point (query :: * -&gt; *) a.
m (ClientStIdle block point query m a)
-&gt; ClientStAcquired block point query m a
</span><span class="hs-identifier hs-var">Net.Query.SendMsgRelease</span></span><span> </span><span class="annot"><span class="annottext">(IO (ClientStIdle BlockInMode ChainPoint QueryInMode IO ())
 -&gt; ClientStAcquired BlockInMode ChainPoint QueryInMode IO ())
-&gt; IO (ClientStIdle BlockInMode ChainPoint QueryInMode IO ())
-&gt; ClientStAcquired BlockInMode ChainPoint QueryInMode IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-567"></span><span>                      </span><span class="annot"><span class="annottext">ClientStIdle BlockInMode ChainPoint QueryInMode IO ()
-&gt; IO (ClientStIdle BlockInMode ChainPoint QueryInMode IO ())
forall a. a -&gt; IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">(ClientStIdle BlockInMode ChainPoint QueryInMode IO ()
 -&gt; IO (ClientStIdle BlockInMode ChainPoint QueryInMode IO ()))
-&gt; ClientStIdle BlockInMode ChainPoint QueryInMode IO ()
-&gt; IO (ClientStIdle BlockInMode ChainPoint QueryInMode IO ())
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">() -&gt; ClientStIdle BlockInMode ChainPoint QueryInMode IO ()
forall a block point (query :: * -&gt; *) (m :: * -&gt; *).
a -&gt; ClientStIdle block point query m a
</span><span class="hs-identifier hs-var">Net.Query.SendMsgDone</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-568"></span><span>                  </span><span class="hs-special">}</span><span>
</span><span id="line-569"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">recvMsgFailure :: AcquireFailure
-&gt; IO (ClientStIdle BlockInMode ChainPoint QueryInMode IO ())
</span><span class="hs-identifier hs-var">Net.Query.recvMsgFailure</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621681168943"><span class="annot"><span class="annottext">AcquireFailure
</span><a href="#local-6989586621681168943"><span class="hs-identifier hs-var">failure</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-570"></span><span>              </span><span class="annot"><span class="annottext">STM () -&gt; IO ()
forall a. STM a -&gt; IO a
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Conc.Sync.html#atomically"><span class="hs-identifier hs-var">atomically</span></a></span><span> </span><span class="annot"><span class="annottext">(STM () -&gt; IO ()) -&gt; STM () -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">TMVar (Either AcquiringFailure result)
-&gt; Either AcquiringFailure result -&gt; STM ()
forall a. TMVar a -&gt; a -&gt; STM ()
</span><span class="hs-identifier hs-var">putTMVar</span></span><span> </span><span class="annot"><span class="annottext">TMVar (Either AcquiringFailure result)
</span><a href="#local-6989586621681168931"><span class="hs-identifier hs-var">resultVar'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">AcquiringFailure -&gt; Either AcquiringFailure result
forall a b. a -&gt; Either a b
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/Data.Either.html#Left"><span class="hs-identifier hs-var">Left</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">AcquireFailure -&gt; AcquiringFailure
</span><a href="Cardano.Api.IPC.html#toAcquiringFailure"><span class="hs-identifier hs-var">toAcquiringFailure</span></a></span><span> </span><span class="annot"><span class="annottext">AcquireFailure
</span><a href="#local-6989586621681168943"><span class="hs-identifier hs-var">failure</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-571"></span><span>              </span><span class="annot"><span class="annottext">ClientStIdle BlockInMode ChainPoint QueryInMode IO ()
-&gt; IO (ClientStIdle BlockInMode ChainPoint QueryInMode IO ())
forall a. a -&gt; IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">(ClientStIdle BlockInMode ChainPoint QueryInMode IO ()
 -&gt; IO (ClientStIdle BlockInMode ChainPoint QueryInMode IO ()))
-&gt; ClientStIdle BlockInMode ChainPoint QueryInMode IO ()
-&gt; IO (ClientStIdle BlockInMode ChainPoint QueryInMode IO ())
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">() -&gt; ClientStIdle BlockInMode ChainPoint QueryInMode IO ()
forall a block point (query :: * -&gt; *) (m :: * -&gt; *).
a -&gt; ClientStIdle block point query m a
</span><span class="hs-identifier hs-var">Net.Query.SendMsgDone</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-572"></span><span>          </span><span class="hs-special">}</span><span>
</span><span id="line-573"></span><span>
</span><span id="line-574"></span><span class="annot"><a href="Cardano.Api.IPC.html#submitTxToNodeLocal"><span class="hs-identifier hs-type">submitTxToNodeLocal</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-575"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Cardano.Api.IPC.html#LocalNodeConnectInfo"><span class="hs-identifier hs-type">LocalNodeConnectInfo</span></a></span><span>
</span><span id="line-576"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cardano.Api.InMode.html#TxInMode"><span class="hs-identifier hs-type">TxInMode</span></a></span><span>
</span><span id="line-577"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Net.Tx.SubmitResult</span></span><span> </span><span class="annot"><a href="Cardano.Api.InMode.html#TxValidationErrorInCardanoMode"><span class="hs-identifier hs-type">TxValidationErrorInCardanoMode</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-578"></span><span id="submitTxToNodeLocal"><span class="annot"><span class="annottext">submitTxToNodeLocal :: LocalNodeConnectInfo
-&gt; TxInMode -&gt; IO (SubmitResult TxValidationErrorInCardanoMode)
</span><a href="Cardano.Api.IPC.html#submitTxToNodeLocal"><span class="hs-identifier hs-var hs-var">submitTxToNodeLocal</span></a></span></span><span> </span><span id="local-6989586621681168944"><span class="annot"><span class="annottext">LocalNodeConnectInfo
</span><a href="#local-6989586621681168944"><span class="hs-identifier hs-var">connctInfo</span></a></span></span><span> </span><span id="local-6989586621681168945"><span class="annot"><span class="annottext">TxInMode
</span><a href="#local-6989586621681168945"><span class="hs-identifier hs-var">tx</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-579"></span><span>    </span><span id="local-6989586621681168946"><span class="annot"><span class="annottext">TMVar (SubmitResult TxValidationErrorInCardanoMode)
</span><a href="#local-6989586621681168946"><span class="hs-identifier hs-var">resultVar</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO (TMVar (SubmitResult TxValidationErrorInCardanoMode))
forall a. IO (TMVar a)
</span><span class="hs-identifier hs-var">newEmptyTMVarIO</span></span><span>
</span><span id="line-580"></span><span>    </span><span class="annot"><span class="annottext">LocalNodeConnectInfo -&gt; LocalNodeClientProtocolsInMode -&gt; IO ()
</span><a href="Cardano.Api.IPC.html#connectToLocalNode"><span class="hs-identifier hs-var">connectToLocalNode</span></a></span><span>
</span><span id="line-581"></span><span>      </span><span class="annot"><span class="annottext">LocalNodeConnectInfo
</span><a href="#local-6989586621681168944"><span class="hs-identifier hs-var">connctInfo</span></a></span><span>
</span><span id="line-582"></span><span>      </span><span class="annot"><a href="Cardano.Api.IPC.html#LocalNodeClientProtocols"><span class="hs-identifier hs-type">LocalNodeClientProtocols</span></a></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-583"></span><span>        </span><span class="annot"><span class="annottext">localChainSyncClient :: LocalChainSyncClient BlockInMode ChainPoint ChainTip IO
</span><a href="Cardano.Api.IPC.html#localChainSyncClient"><span class="hs-identifier hs-var">localChainSyncClient</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LocalChainSyncClient BlockInMode ChainPoint ChainTip IO
forall block point tip (m :: * -&gt; *).
LocalChainSyncClient block point tip m
</span><a href="Cardano.Api.IPC.html#NoLocalChainSyncClient"><span class="hs-identifier hs-var">NoLocalChainSyncClient</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-584"></span><span>        </span><span class="annot"><span class="annottext">localTxSubmissionClient :: Maybe
  (LocalTxSubmissionClient
     TxInMode TxValidationErrorInCardanoMode IO ())
</span><a href="Cardano.Api.IPC.html#localTxSubmissionClient"><span class="hs-identifier hs-var">localTxSubmissionClient</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LocalTxSubmissionClient
  TxInMode TxValidationErrorInCardanoMode IO ()
-&gt; Maybe
     (LocalTxSubmissionClient
        TxInMode TxValidationErrorInCardanoMode IO ())
forall a. a -&gt; Maybe a
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TMVar (SubmitResult TxValidationErrorInCardanoMode)
-&gt; LocalTxSubmissionClient
     TxInMode TxValidationErrorInCardanoMode IO ()
</span><a href="#local-6989586621681168947"><span class="hs-identifier hs-var">localTxSubmissionClientSingle</span></a></span><span> </span><span class="annot"><span class="annottext">TMVar (SubmitResult TxValidationErrorInCardanoMode)
</span><a href="#local-6989586621681168946"><span class="hs-identifier hs-var">resultVar</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-585"></span><span>        </span><span class="annot"><span class="annottext">localStateQueryClient :: Maybe
  (LocalStateQueryClient BlockInMode ChainPoint QueryInMode IO ())
</span><a href="Cardano.Api.IPC.html#localStateQueryClient"><span class="hs-identifier hs-var">localStateQueryClient</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe
  (LocalStateQueryClient BlockInMode ChainPoint QueryInMode IO ())
forall a. Maybe a
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-586"></span><span>        </span><span class="annot"><span class="annottext">localTxMonitoringClient :: Maybe (LocalTxMonitorClient TxIdInMode TxInMode SlotNo IO ())
</span><a href="Cardano.Api.IPC.html#localTxMonitoringClient"><span class="hs-identifier hs-var">localTxMonitoringClient</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe (LocalTxMonitorClient TxIdInMode TxInMode SlotNo IO ())
forall a. Maybe a
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-587"></span><span>      </span><span class="hs-special">}</span><span>
</span><span id="line-588"></span><span>    </span><span class="annot"><span class="annottext">STM (SubmitResult TxValidationErrorInCardanoMode)
-&gt; IO (SubmitResult TxValidationErrorInCardanoMode)
forall a. STM a -&gt; IO a
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Conc.Sync.html#atomically"><span class="hs-identifier hs-var">atomically</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TMVar (SubmitResult TxValidationErrorInCardanoMode)
-&gt; STM (SubmitResult TxValidationErrorInCardanoMode)
forall a. TMVar a -&gt; STM a
</span><span class="hs-identifier hs-var">takeTMVar</span></span><span> </span><span class="annot"><span class="annottext">TMVar (SubmitResult TxValidationErrorInCardanoMode)
</span><a href="#local-6989586621681168946"><span class="hs-identifier hs-var">resultVar</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-589"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-590"></span><span>    </span><span class="annot"><a href="#local-6989586621681168947"><span class="hs-identifier hs-type">localTxSubmissionClientSingle</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-591"></span><span>      </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TMVar</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Net.Tx.SubmitResult</span></span><span> </span><span class="annot"><a href="Cardano.Api.InMode.html#TxValidationErrorInCardanoMode"><span class="hs-identifier hs-type">TxValidationErrorInCardanoMode</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-592"></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Net.Tx.LocalTxSubmissionClient</span></span><span> </span><span class="annot"><a href="Cardano.Api.InMode.html#TxInMode"><span class="hs-identifier hs-type">TxInMode</span></a></span><span> </span><span class="annot"><a href="Cardano.Api.InMode.html#TxValidationErrorInCardanoMode"><span class="hs-identifier hs-type">TxValidationErrorInCardanoMode</span></a></span><span> </span><span class="annot"><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-593"></span><span>    </span><span id="local-6989586621681168947"><span class="annot"><span class="annottext">localTxSubmissionClientSingle :: TMVar (SubmitResult TxValidationErrorInCardanoMode)
-&gt; LocalTxSubmissionClient
     TxInMode TxValidationErrorInCardanoMode IO ()
</span><a href="#local-6989586621681168947"><span class="hs-identifier hs-var hs-var">localTxSubmissionClientSingle</span></a></span></span><span> </span><span id="local-6989586621681168948"><span class="annot"><span class="annottext">TMVar (SubmitResult TxValidationErrorInCardanoMode)
</span><a href="#local-6989586621681168948"><span class="hs-identifier hs-var">resultVar</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-594"></span><span>      </span><span class="annot"><span class="annottext">IO
  (LocalTxClientStIdle TxInMode TxValidationErrorInCardanoMode IO ())
-&gt; LocalTxSubmissionClient
     TxInMode TxValidationErrorInCardanoMode IO ()
forall tx reject (m :: * -&gt; *) a.
m (LocalTxClientStIdle tx reject m a)
-&gt; LocalTxSubmissionClient tx reject m a
</span><span class="hs-identifier hs-var">LocalTxSubmissionClient</span></span><span> </span><span class="annot"><span class="annottext">(IO
   (LocalTxClientStIdle TxInMode TxValidationErrorInCardanoMode IO ())
 -&gt; LocalTxSubmissionClient
      TxInMode TxValidationErrorInCardanoMode IO ())
-&gt; IO
     (LocalTxClientStIdle TxInMode TxValidationErrorInCardanoMode IO ())
-&gt; LocalTxSubmissionClient
     TxInMode TxValidationErrorInCardanoMode IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-595"></span><span>        </span><span class="annot"><span class="annottext">LocalTxClientStIdle TxInMode TxValidationErrorInCardanoMode IO ()
-&gt; IO
     (LocalTxClientStIdle TxInMode TxValidationErrorInCardanoMode IO ())
forall a. a -&gt; IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">(LocalTxClientStIdle TxInMode TxValidationErrorInCardanoMode IO ()
 -&gt; IO
      (LocalTxClientStIdle
         TxInMode TxValidationErrorInCardanoMode IO ()))
-&gt; LocalTxClientStIdle
     TxInMode TxValidationErrorInCardanoMode IO ()
-&gt; IO
     (LocalTxClientStIdle TxInMode TxValidationErrorInCardanoMode IO ())
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">TxInMode
-&gt; (SubmitResult TxValidationErrorInCardanoMode
    -&gt; IO
         (LocalTxClientStIdle
            TxInMode TxValidationErrorInCardanoMode IO ()))
-&gt; LocalTxClientStIdle
     TxInMode TxValidationErrorInCardanoMode IO ()
forall tx reject (m :: * -&gt; *) a.
tx
-&gt; (SubmitResult reject -&gt; m (LocalTxClientStIdle tx reject m a))
-&gt; LocalTxClientStIdle tx reject m a
</span><span class="hs-identifier hs-var">Net.Tx.SendMsgSubmitTx</span></span><span> </span><span class="annot"><span class="annottext">TxInMode
</span><a href="#local-6989586621681168945"><span class="hs-identifier hs-var">tx</span></a></span><span> </span><span class="annot"><span class="annottext">((SubmitResult TxValidationErrorInCardanoMode
  -&gt; IO
       (LocalTxClientStIdle
          TxInMode TxValidationErrorInCardanoMode IO ()))
 -&gt; LocalTxClientStIdle
      TxInMode TxValidationErrorInCardanoMode IO ())
-&gt; (SubmitResult TxValidationErrorInCardanoMode
    -&gt; IO
         (LocalTxClientStIdle
            TxInMode TxValidationErrorInCardanoMode IO ()))
-&gt; LocalTxClientStIdle
     TxInMode TxValidationErrorInCardanoMode IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621681168951"><span class="annot"><span class="annottext">SubmitResult TxValidationErrorInCardanoMode
</span><a href="#local-6989586621681168951"><span class="hs-identifier hs-var">result</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-596"></span><span>        </span><span class="annot"><span class="annottext">STM () -&gt; IO ()
forall a. STM a -&gt; IO a
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Conc.Sync.html#atomically"><span class="hs-identifier hs-var">atomically</span></a></span><span> </span><span class="annot"><span class="annottext">(STM () -&gt; IO ()) -&gt; STM () -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">TMVar (SubmitResult TxValidationErrorInCardanoMode)
-&gt; SubmitResult TxValidationErrorInCardanoMode -&gt; STM ()
forall a. TMVar a -&gt; a -&gt; STM ()
</span><span class="hs-identifier hs-var">putTMVar</span></span><span> </span><span class="annot"><span class="annottext">TMVar (SubmitResult TxValidationErrorInCardanoMode)
</span><a href="#local-6989586621681168948"><span class="hs-identifier hs-var">resultVar</span></a></span><span> </span><span class="annot"><span class="annottext">SubmitResult TxValidationErrorInCardanoMode
</span><a href="#local-6989586621681168951"><span class="hs-identifier hs-var">result</span></a></span><span>
</span><span id="line-597"></span><span>        </span><span class="annot"><span class="annottext">LocalTxClientStIdle TxInMode TxValidationErrorInCardanoMode IO ()
-&gt; IO
     (LocalTxClientStIdle TxInMode TxValidationErrorInCardanoMode IO ())
forall a. a -&gt; IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">()
-&gt; LocalTxClientStIdle
     TxInMode TxValidationErrorInCardanoMode IO ()
forall a tx reject (m :: * -&gt; *).
a -&gt; LocalTxClientStIdle tx reject m a
</span><span class="hs-identifier hs-var">Net.Tx.SendMsgDone</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-598"></span><span>
</span><span id="line-599"></span><span>
</span><span id="line-600"></span><span class="hs-keyword">data</span><span> </span><span id="LocalTxMonitoringResult"><span class="annot"><a href="Cardano.Api.IPC.html#LocalTxMonitoringResult"><span class="hs-identifier hs-var">LocalTxMonitoringResult</span></a></span></span><span>
</span><span id="line-601"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="LocalTxMonitoringTxExists"><span class="annot"><a href="Cardano.Api.IPC.html#LocalTxMonitoringTxExists"><span class="hs-identifier hs-var">LocalTxMonitoringTxExists</span></a></span></span><span>
</span><span id="line-602"></span><span>      </span><span class="annot"><a href="Cardano.Api.TxIn.html#TxId"><span class="hs-identifier hs-type">TxId</span></a></span><span>
</span><span id="line-603"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">SlotNo</span></span><span> </span><span class="annot"><span class="hs-comment">-- ^ Slot number at which the mempool snapshot was taken</span></span><span>
</span><span id="line-604"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="LocalTxMonitoringTxDoesNotExist"><span class="annot"><a href="Cardano.Api.IPC.html#LocalTxMonitoringTxDoesNotExist"><span class="hs-identifier hs-var">LocalTxMonitoringTxDoesNotExist</span></a></span></span><span>
</span><span id="line-605"></span><span>      </span><span class="annot"><a href="Cardano.Api.TxIn.html#TxId"><span class="hs-identifier hs-type">TxId</span></a></span><span>
</span><span id="line-606"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">SlotNo</span></span><span> </span><span class="annot"><span class="hs-comment">-- ^ Slot number at which the mempool snapshot was taken</span></span><span>
</span><span id="line-607"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="LocalTxMonitoringNextTx"><span class="annot"><a href="Cardano.Api.IPC.html#LocalTxMonitoringNextTx"><span class="hs-identifier hs-var">LocalTxMonitoringNextTx</span></a></span></span><span>
</span><span id="line-608"></span><span>      </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="Cardano.Api.InMode.html#TxInMode"><span class="hs-identifier hs-type">TxInMode</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-609"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">SlotNo</span></span><span> </span><span class="annot"><span class="hs-comment">-- ^ Slot number at which the mempool snapshot was taken</span></span><span>
</span><span id="line-610"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="LocalTxMonitoringMempoolSizeAndCapacity"><span class="annot"><a href="Cardano.Api.IPC.html#LocalTxMonitoringMempoolSizeAndCapacity"><span class="hs-identifier hs-var">LocalTxMonitoringMempoolSizeAndCapacity</span></a></span></span><span>
</span><span id="line-611"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Consensus.MempoolSizeAndCapacity</span></span><span>
</span><span id="line-612"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">SlotNo</span></span><span> </span><span class="annot"><span class="hs-comment">-- ^ Slot number at which the mempool snapshot was taken</span></span><span>
</span><span id="line-613"></span><span>
</span><span id="line-614"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621681168959"><span id="local-6989586621681168963"><span id="local-6989586621681168966"><span id="local-6989586621681168969"><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="Cardano.Api.IPC.html#LocalTxMonitoringResult"><span class="hs-identifier hs-type">LocalTxMonitoringResult</span></a></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-615"></span><span>  </span><span id="local-6989586621681169018"><span class="annot"><span class="annottext">toJSON :: LocalTxMonitoringResult -&gt; Value
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></span></span><span> </span><span id="local-6989586621681169019"><span class="annot"><span class="annottext">LocalTxMonitoringResult
</span><a href="#local-6989586621681169019"><span class="hs-identifier hs-var">result</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-616"></span><span>    </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">object</span></span><span> </span><span class="annot"><span class="annottext">([Pair] -&gt; Value) -&gt; [Pair] -&gt; Value
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">LocalTxMonitoringResult
</span><a href="#local-6989586621681169019"><span class="hs-identifier hs-var">result</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-617"></span><span>      </span><span class="annot"><a href="Cardano.Api.IPC.html#LocalTxMonitoringTxExists"><span class="hs-identifier hs-type">LocalTxMonitoringTxExists</span></a></span><span> </span><span id="local-6989586621681169020"><span class="annot"><span class="annottext">TxId
</span><a href="#local-6989586621681169020"><span class="hs-identifier hs-var">tx</span></a></span></span><span> </span><span id="local-6989586621681169021"><span class="annot"><span class="annottext">SlotNo
</span><a href="#local-6989586621681169021"><span class="hs-identifier hs-var">slot</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-618"></span><span>          </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;exists&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Bool -&gt; Pair
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#True"><span class="hs-identifier hs-var">True</span></a></span><span>
</span><span id="line-619"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;txId&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; TxId -&gt; Pair
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">TxId
</span><a href="#local-6989586621681169020"><span class="hs-identifier hs-var">tx</span></a></span><span>
</span><span id="line-620"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;slot&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; SlotNo -&gt; Pair
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">SlotNo
</span><a href="#local-6989586621681169021"><span class="hs-identifier hs-var">slot</span></a></span><span>
</span><span id="line-621"></span><span>          </span><span class="hs-special">]</span><span>
</span><span id="line-622"></span><span>      </span><span class="annot"><a href="Cardano.Api.IPC.html#LocalTxMonitoringTxDoesNotExist"><span class="hs-identifier hs-type">LocalTxMonitoringTxDoesNotExist</span></a></span><span> </span><span id="local-6989586621681169022"><span class="annot"><span class="annottext">TxId
</span><a href="#local-6989586621681169022"><span class="hs-identifier hs-var">tx</span></a></span></span><span> </span><span id="local-6989586621681169023"><span class="annot"><span class="annottext">SlotNo
</span><a href="#local-6989586621681169023"><span class="hs-identifier hs-var">slot</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-623"></span><span>          </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;exists&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Bool -&gt; Pair
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#False"><span class="hs-identifier hs-var">False</span></a></span><span>
</span><span id="line-624"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;txId&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; TxId -&gt; Pair
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">TxId
</span><a href="#local-6989586621681169022"><span class="hs-identifier hs-var">tx</span></a></span><span>
</span><span id="line-625"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;slot&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; SlotNo -&gt; Pair
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">SlotNo
</span><a href="#local-6989586621681169023"><span class="hs-identifier hs-var">slot</span></a></span><span>
</span><span id="line-626"></span><span>          </span><span class="hs-special">]</span><span>
</span><span id="line-627"></span><span>      </span><span class="annot"><a href="Cardano.Api.IPC.html#LocalTxMonitoringNextTx"><span class="hs-identifier hs-type">LocalTxMonitoringNextTx</span></a></span><span> </span><span id="local-6989586621681169024"><span class="annot"><span class="annottext">Maybe TxInMode
</span><a href="#local-6989586621681169024"><span class="hs-identifier hs-var">txInMode</span></a></span></span><span> </span><span id="local-6989586621681169025"><span class="annot"><span class="annottext">SlotNo
</span><a href="#local-6989586621681169025"><span class="hs-identifier hs-var">slot</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-628"></span><span>          </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;nextTx&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Maybe TxId -&gt; Pair
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">Maybe TxId
</span><a href="#local-6989586621681169026"><span class="hs-identifier hs-var">txId</span></a></span><span>
</span><span id="line-629"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;slot&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; SlotNo -&gt; Pair
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">SlotNo
</span><a href="#local-6989586621681169025"><span class="hs-identifier hs-var">slot</span></a></span><span>
</span><span id="line-630"></span><span>          </span><span class="hs-special">]</span><span>
</span><span id="line-631"></span><span>        </span><span class="hs-keyword">where</span><span>
</span><span id="line-632"></span><span>          </span><span id="local-6989586621681169026"><span class="annot"><span class="annottext">txId :: Maybe TxId
</span><a href="#local-6989586621681169026"><span class="hs-identifier hs-var hs-var">txId</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe TxInMode
</span><a href="#local-6989586621681169024"><span class="hs-identifier hs-var">txInMode</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-633"></span><span>            </span><span class="annot"><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Api.InMode.html#TxInMode"><span class="hs-identifier hs-type">TxInMode</span></a></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681169028"><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621681169028"><span class="hs-identifier hs-var">tx</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TxId -&gt; Maybe TxId
forall a. a -&gt; Maybe a
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">(TxId -&gt; Maybe TxId) -&gt; TxId -&gt; Maybe TxId
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">TxBody era -&gt; TxId
forall era. TxBody era -&gt; TxId
</span><a href="Cardano.Api.TxBody.html#getTxId"><span class="hs-identifier hs-var">getTxId</span></a></span><span> </span><span class="annot"><span class="annottext">(TxBody era -&gt; TxId) -&gt; TxBody era -&gt; TxId
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Tx era -&gt; TxBody era
forall era. Tx era -&gt; TxBody era
</span><a href="Cardano.Api.Tx.html#getTxBody"><span class="hs-identifier hs-var">getTxBody</span></a></span><span> </span><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621681169028"><span class="hs-identifier hs-var">tx</span></a></span><span>
</span><span id="line-634"></span><span>            </span><span class="hs-comment">-- TODO: support fetching the ID of a Byron Era transaction</span><span>
</span><span id="line-635"></span><span>            </span><span class="annot"><span class="annottext">Maybe TxInMode
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe TxId
forall a. Maybe a
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-636"></span><span>      </span><span class="annot"><a href="Cardano.Api.IPC.html#LocalTxMonitoringMempoolSizeAndCapacity"><span class="hs-identifier hs-type">LocalTxMonitoringMempoolSizeAndCapacity</span></a></span><span> </span><span id="local-6989586621681169031"><span class="annot"><span class="annottext">MempoolSizeAndCapacity
</span><a href="#local-6989586621681169031"><span class="hs-identifier hs-var">mempool</span></a></span></span><span> </span><span id="local-6989586621681169032"><span class="annot"><span class="annottext">SlotNo
</span><a href="#local-6989586621681169032"><span class="hs-identifier hs-var">slot</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-637"></span><span>          </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;capacityInBytes&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Word32 -&gt; Pair
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">MempoolSizeAndCapacity -&gt; Word32
</span><span class="hs-identifier hs-var">Consensus.capacityInBytes</span></span><span> </span><span class="annot"><span class="annottext">MempoolSizeAndCapacity
</span><a href="#local-6989586621681169031"><span class="hs-identifier hs-var">mempool</span></a></span><span>
</span><span id="line-638"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;sizeInBytes&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Word32 -&gt; Pair
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">MempoolSizeAndCapacity -&gt; Word32
</span><span class="hs-identifier hs-var">Consensus.sizeInBytes</span></span><span> </span><span class="annot"><span class="annottext">MempoolSizeAndCapacity
</span><a href="#local-6989586621681169031"><span class="hs-identifier hs-var">mempool</span></a></span><span>
</span><span id="line-639"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;numberOfTxs&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Word32 -&gt; Pair
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">MempoolSizeAndCapacity -&gt; Word32
</span><span class="hs-identifier hs-var">Consensus.numberOfTxs</span></span><span> </span><span class="annot"><span class="annottext">MempoolSizeAndCapacity
</span><a href="#local-6989586621681169031"><span class="hs-identifier hs-var">mempool</span></a></span><span>
</span><span id="line-640"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;slot&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; SlotNo -&gt; Pair
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">SlotNo
</span><a href="#local-6989586621681169032"><span class="hs-identifier hs-var">slot</span></a></span><span>
</span><span id="line-641"></span><span>          </span><span class="hs-special">]</span><span>
</span><span id="line-642"></span><span>
</span><span id="line-643"></span><span class="hs-keyword">data</span><span> </span><span id="LocalTxMonitoringQuery"><span class="annot"><a href="Cardano.Api.IPC.html#LocalTxMonitoringQuery"><span class="hs-identifier hs-var">LocalTxMonitoringQuery</span></a></span></span><span>
</span><span id="line-644"></span><span>  </span><span class="hs-comment">-- | Query if a particular tx exists in the mempool. Note that, the absence</span><span>
</span><span id="line-645"></span><span>  </span><span class="hs-comment">-- of a transaction does not imply anything about how the transaction was</span><span>
</span><span id="line-646"></span><span>  </span><span class="hs-comment">-- processed: it may have been dropped, or inserted in a block.</span><span>
</span><span id="line-647"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="LocalTxMonitoringQueryTx"><span class="annot"><a href="Cardano.Api.IPC.html#LocalTxMonitoringQueryTx"><span class="hs-identifier hs-var">LocalTxMonitoringQueryTx</span></a></span></span><span> </span><span class="annot"><a href="Cardano.Api.InMode.html#TxIdInMode"><span class="hs-identifier hs-type">TxIdInMode</span></a></span><span>
</span><span id="line-648"></span><span>  </span><span class="hs-comment">-- | The mempool is modeled as an ordered list of transactions and thus, can</span><span>
</span><span id="line-649"></span><span>  </span><span class="hs-comment">-- be traversed linearly. 'LocalTxMonitoringSendNextTx' requests the next transaction from the</span><span>
</span><span id="line-650"></span><span>  </span><span class="hs-comment">-- current list. This must be a transaction that was not previously sent to</span><span>
</span><span id="line-651"></span><span>  </span><span class="hs-comment">-- the client for this particular snapshot.</span><span>
</span><span id="line-652"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="LocalTxMonitoringSendNextTx"><span class="annot"><a href="Cardano.Api.IPC.html#LocalTxMonitoringSendNextTx"><span class="hs-identifier hs-var">LocalTxMonitoringSendNextTx</span></a></span></span><span>
</span><span id="line-653"></span><span>  </span><span class="hs-comment">-- | Ask the server about the current mempool's capacity and sizes. This is</span><span>
</span><span id="line-654"></span><span>  </span><span class="hs-comment">-- fixed in a given snapshot.</span><span>
</span><span id="line-655"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="LocalTxMonitoringMempoolInformation"><span class="annot"><a href="Cardano.Api.IPC.html#LocalTxMonitoringMempoolInformation"><span class="hs-identifier hs-var">LocalTxMonitoringMempoolInformation</span></a></span></span><span>
</span><span id="line-656"></span><span>
</span><span id="line-657"></span><span>
</span><span id="line-658"></span><span class="annot"><a href="Cardano.Api.IPC.html#queryTxMonitoringLocal"><span class="hs-identifier hs-type">queryTxMonitoringLocal</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-659"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Cardano.Api.IPC.html#LocalNodeConnectInfo"><span class="hs-identifier hs-type">LocalNodeConnectInfo</span></a></span><span>
</span><span id="line-660"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cardano.Api.IPC.html#LocalTxMonitoringQuery"><span class="hs-identifier hs-type">LocalTxMonitoringQuery</span></a></span><span>
</span><span id="line-661"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="Cardano.Api.IPC.html#LocalTxMonitoringResult"><span class="hs-identifier hs-type">LocalTxMonitoringResult</span></a></span><span>
</span><span id="line-662"></span><span id="queryTxMonitoringLocal"><span class="annot"><span class="annottext">queryTxMonitoringLocal :: LocalNodeConnectInfo
-&gt; LocalTxMonitoringQuery -&gt; IO LocalTxMonitoringResult
</span><a href="Cardano.Api.IPC.html#queryTxMonitoringLocal"><span class="hs-identifier hs-var hs-var">queryTxMonitoringLocal</span></a></span></span><span> </span><span id="local-6989586621681169039"><span class="annot"><span class="annottext">LocalNodeConnectInfo
</span><a href="#local-6989586621681169039"><span class="hs-identifier hs-var">connectInfo</span></a></span></span><span> </span><span id="local-6989586621681169040"><span class="annot"><span class="annottext">LocalTxMonitoringQuery
</span><a href="#local-6989586621681169040"><span class="hs-identifier hs-var">localTxMonitoringQuery</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-663"></span><span>  </span><span id="local-6989586621681169041"><span class="annot"><span class="annottext">TMVar LocalTxMonitoringResult
</span><a href="#local-6989586621681169041"><span class="hs-identifier hs-var">resultVar</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO (TMVar LocalTxMonitoringResult)
forall a. IO (TMVar a)
</span><span class="hs-identifier hs-var">newEmptyTMVarIO</span></span><span>
</span><span id="line-664"></span><span>
</span><span id="line-665"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681169042"><span class="annot"><span class="annottext">client :: LocalTxMonitorClient TxIdInMode TxInMode SlotNo IO ()
</span><a href="#local-6989586621681169042"><span class="hs-identifier hs-var hs-var">client</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">LocalTxMonitoringQuery
</span><a href="#local-6989586621681169040"><span class="hs-identifier hs-var">localTxMonitoringQuery</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-666"></span><span>                 </span><span class="annot"><a href="Cardano.Api.IPC.html#LocalTxMonitoringQueryTx"><span class="hs-identifier hs-type">LocalTxMonitoringQueryTx</span></a></span><span> </span><span id="local-6989586621681169043"><span class="annot"><span class="annottext">TxIdInMode
</span><a href="#local-6989586621681169043"><span class="hs-identifier hs-var">txidInMode</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-667"></span><span>                   </span><span class="annot"><span class="annottext">TxIdInMode
-&gt; TMVar LocalTxMonitoringResult
-&gt; LocalTxMonitorClient TxIdInMode TxInMode SlotNo IO ()
</span><a href="#local-6989586621681169044"><span class="hs-identifier hs-var">localTxMonitorClientTxExists</span></a></span><span> </span><span class="annot"><span class="annottext">TxIdInMode
</span><a href="#local-6989586621681169043"><span class="hs-identifier hs-var">txidInMode</span></a></span><span> </span><span class="annot"><span class="annottext">TMVar LocalTxMonitoringResult
</span><a href="#local-6989586621681169041"><span class="hs-identifier hs-var">resultVar</span></a></span><span>
</span><span id="line-668"></span><span>                 </span><span class="annot"><span class="annottext">LocalTxMonitoringQuery
</span><a href="Cardano.Api.IPC.html#LocalTxMonitoringSendNextTx"><span class="hs-identifier hs-var">LocalTxMonitoringSendNextTx</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-669"></span><span>                   </span><span class="annot"><span class="annottext">TMVar LocalTxMonitoringResult
-&gt; LocalTxMonitorClient TxIdInMode TxInMode SlotNo IO ()
</span><a href="#local-6989586621681169045"><span class="hs-identifier hs-var">localTxMonitorNextTx</span></a></span><span> </span><span class="annot"><span class="annottext">TMVar LocalTxMonitoringResult
</span><a href="#local-6989586621681169041"><span class="hs-identifier hs-var">resultVar</span></a></span><span>
</span><span id="line-670"></span><span>                 </span><span class="annot"><span class="annottext">LocalTxMonitoringQuery
</span><a href="Cardano.Api.IPC.html#LocalTxMonitoringMempoolInformation"><span class="hs-identifier hs-var">LocalTxMonitoringMempoolInformation</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-671"></span><span>                   </span><span class="annot"><span class="annottext">TMVar LocalTxMonitoringResult
-&gt; LocalTxMonitorClient TxIdInMode TxInMode SlotNo IO ()
</span><a href="#local-6989586621681169046"><span class="hs-identifier hs-var">localTxMonitorMempoolInfo</span></a></span><span> </span><span class="annot"><span class="annottext">TMVar LocalTxMonitoringResult
</span><a href="#local-6989586621681169041"><span class="hs-identifier hs-var">resultVar</span></a></span><span>
</span><span id="line-672"></span><span>
</span><span id="line-673"></span><span>  </span><span class="annot"><span class="annottext">LocalNodeConnectInfo -&gt; LocalNodeClientProtocolsInMode -&gt; IO ()
</span><a href="Cardano.Api.IPC.html#connectToLocalNode"><span class="hs-identifier hs-var">connectToLocalNode</span></a></span><span>
</span><span id="line-674"></span><span>    </span><span class="annot"><span class="annottext">LocalNodeConnectInfo
</span><a href="#local-6989586621681169039"><span class="hs-identifier hs-var">connectInfo</span></a></span><span>
</span><span id="line-675"></span><span>    </span><span class="annot"><a href="Cardano.Api.IPC.html#LocalNodeClientProtocols"><span class="hs-identifier hs-type">LocalNodeClientProtocols</span></a></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-676"></span><span>      </span><span class="annot"><span class="annottext">localChainSyncClient :: LocalChainSyncClient BlockInMode ChainPoint ChainTip IO
</span><a href="Cardano.Api.IPC.html#localChainSyncClient"><span class="hs-identifier hs-var">localChainSyncClient</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LocalChainSyncClient BlockInMode ChainPoint ChainTip IO
forall block point tip (m :: * -&gt; *).
LocalChainSyncClient block point tip m
</span><a href="Cardano.Api.IPC.html#NoLocalChainSyncClient"><span class="hs-identifier hs-var">NoLocalChainSyncClient</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-677"></span><span>      </span><span class="annot"><span class="annottext">localTxSubmissionClient :: Maybe
  (LocalTxSubmissionClient
     TxInMode TxValidationErrorInCardanoMode IO ())
</span><a href="Cardano.Api.IPC.html#localTxSubmissionClient"><span class="hs-identifier hs-var">localTxSubmissionClient</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe
  (LocalTxSubmissionClient
     TxInMode TxValidationErrorInCardanoMode IO ())
forall a. Maybe a
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-678"></span><span>      </span><span class="annot"><span class="annottext">localStateQueryClient :: Maybe
  (LocalStateQueryClient BlockInMode ChainPoint QueryInMode IO ())
</span><a href="Cardano.Api.IPC.html#localStateQueryClient"><span class="hs-identifier hs-var">localStateQueryClient</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe
  (LocalStateQueryClient BlockInMode ChainPoint QueryInMode IO ())
forall a. Maybe a
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-679"></span><span>      </span><span class="annot"><span class="annottext">localTxMonitoringClient :: Maybe (LocalTxMonitorClient TxIdInMode TxInMode SlotNo IO ())
</span><a href="Cardano.Api.IPC.html#localTxMonitoringClient"><span class="hs-identifier hs-var">localTxMonitoringClient</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LocalTxMonitorClient TxIdInMode TxInMode SlotNo IO ()
-&gt; Maybe (LocalTxMonitorClient TxIdInMode TxInMode SlotNo IO ())
forall a. a -&gt; Maybe a
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">LocalTxMonitorClient TxIdInMode TxInMode SlotNo IO ()
</span><a href="#local-6989586621681169042"><span class="hs-identifier hs-var">client</span></a></span><span>
</span><span id="line-680"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-681"></span><span>  </span><span class="annot"><span class="annottext">STM LocalTxMonitoringResult -&gt; IO LocalTxMonitoringResult
forall a. STM a -&gt; IO a
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Conc.Sync.html#atomically"><span class="hs-identifier hs-var">atomically</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TMVar LocalTxMonitoringResult -&gt; STM LocalTxMonitoringResult
forall a. TMVar a -&gt; STM a
</span><span class="hs-identifier hs-var">takeTMVar</span></span><span> </span><span class="annot"><span class="annottext">TMVar LocalTxMonitoringResult
</span><a href="#local-6989586621681169041"><span class="hs-identifier hs-var">resultVar</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-682"></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-683"></span><span>  </span><span class="annot"><a href="#local-6989586621681169044"><span class="hs-identifier hs-type">localTxMonitorClientTxExists</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-684"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Cardano.Api.InMode.html#TxIdInMode"><span class="hs-identifier hs-type">TxIdInMode</span></a></span><span>
</span><span id="line-685"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TMVar</span></span><span> </span><span class="annot"><a href="Cardano.Api.IPC.html#LocalTxMonitoringResult"><span class="hs-identifier hs-type">LocalTxMonitoringResult</span></a></span><span>
</span><span id="line-686"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">LocalTxMonitorClient</span></span><span> </span><span class="annot"><a href="Cardano.Api.InMode.html#TxIdInMode"><span class="hs-identifier hs-type">TxIdInMode</span></a></span><span> </span><span class="annot"><a href="Cardano.Api.InMode.html#TxInMode"><span class="hs-identifier hs-type">TxInMode</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">SlotNo</span></span><span> </span><span class="annot"><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-687"></span><span>  </span><span id="local-6989586621681169044"><span class="annot"><span class="annottext">localTxMonitorClientTxExists :: TxIdInMode
-&gt; TMVar LocalTxMonitoringResult
-&gt; LocalTxMonitorClient TxIdInMode TxInMode SlotNo IO ()
</span><a href="#local-6989586621681169044"><span class="hs-identifier hs-var hs-var">localTxMonitorClientTxExists</span></a></span></span><span> </span><span id="local-6989586621681169047"><span class="annot"><span class="annottext">tIdInMode :: TxIdInMode
</span><a href="#local-6989586621681169047"><span class="hs-identifier hs-var">tIdInMode</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Api.InMode.html#TxIdInMode"><span class="hs-identifier hs-type">TxIdInMode</span></a></span><span> </span><span class="annot"><span class="annottext">CardanoEra era
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681169054"><span class="annot"><span class="annottext">TxId
</span><a href="#local-6989586621681169054"><span class="hs-identifier hs-var">txid</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681169055"><span class="annot"><span class="annottext">TMVar LocalTxMonitoringResult
</span><a href="#local-6989586621681169055"><span class="hs-identifier hs-var">resultVar</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-688"></span><span>    </span><span class="annot"><span class="annottext">IO (ClientStIdle TxIdInMode TxInMode SlotNo IO ())
-&gt; LocalTxMonitorClient TxIdInMode TxInMode SlotNo IO ()
forall txid tx slot (m :: * -&gt; *) a.
m (ClientStIdle txid tx slot m a)
-&gt; LocalTxMonitorClient txid tx slot m a
</span><span class="hs-identifier hs-var">LocalTxMonitorClient</span></span><span> </span><span class="annot"><span class="annottext">(IO (ClientStIdle TxIdInMode TxInMode SlotNo IO ())
 -&gt; LocalTxMonitorClient TxIdInMode TxInMode SlotNo IO ())
-&gt; IO (ClientStIdle TxIdInMode TxInMode SlotNo IO ())
-&gt; LocalTxMonitorClient TxIdInMode TxInMode SlotNo IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ClientStIdle TxIdInMode TxInMode SlotNo IO ()
-&gt; IO (ClientStIdle TxIdInMode TxInMode SlotNo IO ())
forall a. a -&gt; IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">(ClientStIdle TxIdInMode TxInMode SlotNo IO ()
 -&gt; IO (ClientStIdle TxIdInMode TxInMode SlotNo IO ()))
-&gt; ClientStIdle TxIdInMode TxInMode SlotNo IO ()
-&gt; IO (ClientStIdle TxIdInMode TxInMode SlotNo IO ())
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-689"></span><span>      </span><span class="annot"><span class="annottext">(SlotNo -&gt; IO (ClientStAcquired TxIdInMode TxInMode SlotNo IO ()))
-&gt; ClientStIdle TxIdInMode TxInMode SlotNo IO ()
forall slot (m :: * -&gt; *) txid tx a.
(slot -&gt; m (ClientStAcquired txid tx slot m a))
-&gt; ClientStIdle txid tx slot m a
</span><span class="hs-identifier hs-var">CTxMon.SendMsgAcquire</span></span><span> </span><span class="annot"><span class="annottext">((SlotNo -&gt; IO (ClientStAcquired TxIdInMode TxInMode SlotNo IO ()))
 -&gt; ClientStIdle TxIdInMode TxInMode SlotNo IO ())
-&gt; (SlotNo
    -&gt; IO (ClientStAcquired TxIdInMode TxInMode SlotNo IO ()))
-&gt; ClientStIdle TxIdInMode TxInMode SlotNo IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621681169056"><span class="annot"><span class="annottext">SlotNo
</span><a href="#local-6989586621681169056"><span class="hs-identifier hs-var">slt</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-690"></span><span>         </span><span class="annot"><span class="annottext">ClientStAcquired TxIdInMode TxInMode SlotNo IO ()
-&gt; IO (ClientStAcquired TxIdInMode TxInMode SlotNo IO ())
forall a. a -&gt; IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">(ClientStAcquired TxIdInMode TxInMode SlotNo IO ()
 -&gt; IO (ClientStAcquired TxIdInMode TxInMode SlotNo IO ()))
-&gt; ClientStAcquired TxIdInMode TxInMode SlotNo IO ()
-&gt; IO (ClientStAcquired TxIdInMode TxInMode SlotNo IO ())
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">TxIdInMode
-&gt; (Bool -&gt; IO (ClientStAcquired TxIdInMode TxInMode SlotNo IO ()))
-&gt; ClientStAcquired TxIdInMode TxInMode SlotNo IO ()
forall txid (m :: * -&gt; *) tx slot a.
txid
-&gt; (Bool -&gt; m (ClientStAcquired txid tx slot m a))
-&gt; ClientStAcquired txid tx slot m a
</span><span class="hs-identifier hs-var">CTxMon.SendMsgHasTx</span></span><span> </span><span class="annot"><span class="annottext">TxIdInMode
</span><a href="#local-6989586621681169047"><span class="hs-identifier hs-var">tIdInMode</span></a></span><span> </span><span class="annot"><span class="annottext">((Bool -&gt; IO (ClientStAcquired TxIdInMode TxInMode SlotNo IO ()))
 -&gt; ClientStAcquired TxIdInMode TxInMode SlotNo IO ())
-&gt; (Bool -&gt; IO (ClientStAcquired TxIdInMode TxInMode SlotNo IO ()))
-&gt; ClientStAcquired TxIdInMode TxInMode SlotNo IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621681169057"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681169057"><span class="hs-identifier hs-var">txPresentBool</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-691"></span><span>           </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681169057"><span class="hs-identifier hs-var">txPresentBool</span></a></span><span>
</span><span id="line-692"></span><span>           </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">STM () -&gt; IO ()
forall a. STM a -&gt; IO a
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Conc.Sync.html#atomically"><span class="hs-identifier hs-var">atomically</span></a></span><span> </span><span class="annot"><span class="annottext">(STM () -&gt; IO ())
-&gt; (LocalTxMonitoringResult -&gt; STM ())
-&gt; LocalTxMonitoringResult
-&gt; IO ()
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">TMVar LocalTxMonitoringResult -&gt; LocalTxMonitoringResult -&gt; STM ()
forall a. TMVar a -&gt; a -&gt; STM ()
</span><span class="hs-identifier hs-var">putTMVar</span></span><span> </span><span class="annot"><span class="annottext">TMVar LocalTxMonitoringResult
</span><a href="#local-6989586621681169055"><span class="hs-identifier hs-var">resultVar</span></a></span><span> </span><span class="annot"><span class="annottext">(LocalTxMonitoringResult -&gt; IO ())
-&gt; LocalTxMonitoringResult -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">TxId -&gt; SlotNo -&gt; LocalTxMonitoringResult
</span><a href="Cardano.Api.IPC.html#LocalTxMonitoringTxExists"><span class="hs-identifier hs-var">LocalTxMonitoringTxExists</span></a></span><span> </span><span class="annot"><span class="annottext">TxId
</span><a href="#local-6989586621681169054"><span class="hs-identifier hs-var">txid</span></a></span><span> </span><span class="annot"><span class="annottext">SlotNo
</span><a href="#local-6989586621681169056"><span class="hs-identifier hs-var">slt</span></a></span><span>
</span><span id="line-693"></span><span>           </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">STM () -&gt; IO ()
forall a. STM a -&gt; IO a
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Conc.Sync.html#atomically"><span class="hs-identifier hs-var">atomically</span></a></span><span> </span><span class="annot"><span class="annottext">(STM () -&gt; IO ())
-&gt; (LocalTxMonitoringResult -&gt; STM ())
-&gt; LocalTxMonitoringResult
-&gt; IO ()
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">TMVar LocalTxMonitoringResult -&gt; LocalTxMonitoringResult -&gt; STM ()
forall a. TMVar a -&gt; a -&gt; STM ()
</span><span class="hs-identifier hs-var">putTMVar</span></span><span> </span><span class="annot"><span class="annottext">TMVar LocalTxMonitoringResult
</span><a href="#local-6989586621681169055"><span class="hs-identifier hs-var">resultVar</span></a></span><span> </span><span class="annot"><span class="annottext">(LocalTxMonitoringResult -&gt; IO ())
-&gt; LocalTxMonitoringResult -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">TxId -&gt; SlotNo -&gt; LocalTxMonitoringResult
</span><a href="Cardano.Api.IPC.html#LocalTxMonitoringTxDoesNotExist"><span class="hs-identifier hs-var">LocalTxMonitoringTxDoesNotExist</span></a></span><span> </span><span class="annot"><span class="annottext">TxId
</span><a href="#local-6989586621681169054"><span class="hs-identifier hs-var">txid</span></a></span><span> </span><span class="annot"><span class="annottext">SlotNo
</span><a href="#local-6989586621681169056"><span class="hs-identifier hs-var">slt</span></a></span><span>
</span><span id="line-694"></span><span>           </span><span class="annot"><span class="annottext">ClientStAcquired TxIdInMode TxInMode SlotNo IO ()
-&gt; IO (ClientStAcquired TxIdInMode TxInMode SlotNo IO ())
forall a. a -&gt; IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">(ClientStAcquired TxIdInMode TxInMode SlotNo IO ()
 -&gt; IO (ClientStAcquired TxIdInMode TxInMode SlotNo IO ()))
-&gt; ClientStAcquired TxIdInMode TxInMode SlotNo IO ()
-&gt; IO (ClientStAcquired TxIdInMode TxInMode SlotNo IO ())
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">IO (ClientStIdle TxIdInMode TxInMode SlotNo IO ())
-&gt; ClientStAcquired TxIdInMode TxInMode SlotNo IO ()
forall (m :: * -&gt; *) txid tx slot a.
m (ClientStIdle txid tx slot m a)
-&gt; ClientStAcquired txid tx slot m a
</span><span class="hs-identifier hs-var">CTxMon.SendMsgRelease</span></span><span> </span><span class="annot"><span class="annottext">(IO (ClientStIdle TxIdInMode TxInMode SlotNo IO ())
 -&gt; ClientStAcquired TxIdInMode TxInMode SlotNo IO ())
-&gt; IO (ClientStIdle TxIdInMode TxInMode SlotNo IO ())
-&gt; ClientStAcquired TxIdInMode TxInMode SlotNo IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ClientStIdle TxIdInMode TxInMode SlotNo IO ()
-&gt; IO (ClientStIdle TxIdInMode TxInMode SlotNo IO ())
forall a. a -&gt; IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">(ClientStIdle TxIdInMode TxInMode SlotNo IO ()
 -&gt; IO (ClientStIdle TxIdInMode TxInMode SlotNo IO ()))
-&gt; ClientStIdle TxIdInMode TxInMode SlotNo IO ()
-&gt; IO (ClientStIdle TxIdInMode TxInMode SlotNo IO ())
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">() -&gt; ClientStIdle TxIdInMode TxInMode SlotNo IO ()
forall a txid tx slot (m :: * -&gt; *).
a -&gt; ClientStIdle txid tx slot m a
</span><span class="hs-identifier hs-var">CTxMon.SendMsgDone</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-695"></span><span>
</span><span id="line-696"></span><span>  </span><span class="annot"><a href="#local-6989586621681169045"><span class="hs-identifier hs-type">localTxMonitorNextTx</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-697"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TMVar</span></span><span> </span><span class="annot"><a href="Cardano.Api.IPC.html#LocalTxMonitoringResult"><span class="hs-identifier hs-type">LocalTxMonitoringResult</span></a></span><span>
</span><span id="line-698"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">LocalTxMonitorClient</span></span><span> </span><span class="annot"><a href="Cardano.Api.InMode.html#TxIdInMode"><span class="hs-identifier hs-type">TxIdInMode</span></a></span><span> </span><span class="annot"><a href="Cardano.Api.InMode.html#TxInMode"><span class="hs-identifier hs-type">TxInMode</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">SlotNo</span></span><span> </span><span class="annot"><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-699"></span><span>  </span><span id="local-6989586621681169045"><span class="annot"><span class="annottext">localTxMonitorNextTx :: TMVar LocalTxMonitoringResult
-&gt; LocalTxMonitorClient TxIdInMode TxInMode SlotNo IO ()
</span><a href="#local-6989586621681169045"><span class="hs-identifier hs-var hs-var">localTxMonitorNextTx</span></a></span></span><span> </span><span id="local-6989586621681169058"><span class="annot"><span class="annottext">TMVar LocalTxMonitoringResult
</span><a href="#local-6989586621681169058"><span class="hs-identifier hs-var">resultVar</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-700"></span><span>    </span><span class="annot"><span class="annottext">IO (ClientStIdle TxIdInMode TxInMode SlotNo IO ())
-&gt; LocalTxMonitorClient TxIdInMode TxInMode SlotNo IO ()
forall txid tx slot (m :: * -&gt; *) a.
m (ClientStIdle txid tx slot m a)
-&gt; LocalTxMonitorClient txid tx slot m a
</span><span class="hs-identifier hs-var">LocalTxMonitorClient</span></span><span> </span><span class="annot"><span class="annottext">(IO (ClientStIdle TxIdInMode TxInMode SlotNo IO ())
 -&gt; LocalTxMonitorClient TxIdInMode TxInMode SlotNo IO ())
-&gt; IO (ClientStIdle TxIdInMode TxInMode SlotNo IO ())
-&gt; LocalTxMonitorClient TxIdInMode TxInMode SlotNo IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ClientStIdle TxIdInMode TxInMode SlotNo IO ()
-&gt; IO (ClientStIdle TxIdInMode TxInMode SlotNo IO ())
forall a. a -&gt; IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">(ClientStIdle TxIdInMode TxInMode SlotNo IO ()
 -&gt; IO (ClientStIdle TxIdInMode TxInMode SlotNo IO ()))
-&gt; ClientStIdle TxIdInMode TxInMode SlotNo IO ()
-&gt; IO (ClientStIdle TxIdInMode TxInMode SlotNo IO ())
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-701"></span><span>      </span><span class="annot"><span class="annottext">(SlotNo -&gt; IO (ClientStAcquired TxIdInMode TxInMode SlotNo IO ()))
-&gt; ClientStIdle TxIdInMode TxInMode SlotNo IO ()
forall slot (m :: * -&gt; *) txid tx a.
(slot -&gt; m (ClientStAcquired txid tx slot m a))
-&gt; ClientStIdle txid tx slot m a
</span><span class="hs-identifier hs-var">CTxMon.SendMsgAcquire</span></span><span> </span><span class="annot"><span class="annottext">((SlotNo -&gt; IO (ClientStAcquired TxIdInMode TxInMode SlotNo IO ()))
 -&gt; ClientStIdle TxIdInMode TxInMode SlotNo IO ())
-&gt; (SlotNo
    -&gt; IO (ClientStAcquired TxIdInMode TxInMode SlotNo IO ()))
-&gt; ClientStIdle TxIdInMode TxInMode SlotNo IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621681169059"><span class="annot"><span class="annottext">SlotNo
</span><a href="#local-6989586621681169059"><span class="hs-identifier hs-var">slt</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-702"></span><span>        </span><span class="annot"><span class="annottext">ClientStAcquired TxIdInMode TxInMode SlotNo IO ()
-&gt; IO (ClientStAcquired TxIdInMode TxInMode SlotNo IO ())
forall a. a -&gt; IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">(ClientStAcquired TxIdInMode TxInMode SlotNo IO ()
 -&gt; IO (ClientStAcquired TxIdInMode TxInMode SlotNo IO ()))
-&gt; ClientStAcquired TxIdInMode TxInMode SlotNo IO ()
-&gt; IO (ClientStAcquired TxIdInMode TxInMode SlotNo IO ())
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe TxInMode
 -&gt; IO (ClientStAcquired TxIdInMode TxInMode SlotNo IO ()))
-&gt; ClientStAcquired TxIdInMode TxInMode SlotNo IO ()
forall tx (m :: * -&gt; *) txid slot a.
(Maybe tx -&gt; m (ClientStAcquired txid tx slot m a))
-&gt; ClientStAcquired txid tx slot m a
</span><span class="hs-identifier hs-var">CTxMon.SendMsgNextTx</span></span><span> </span><span class="annot"><span class="annottext">((Maybe TxInMode
  -&gt; IO (ClientStAcquired TxIdInMode TxInMode SlotNo IO ()))
 -&gt; ClientStAcquired TxIdInMode TxInMode SlotNo IO ())
-&gt; (Maybe TxInMode
    -&gt; IO (ClientStAcquired TxIdInMode TxInMode SlotNo IO ()))
-&gt; ClientStAcquired TxIdInMode TxInMode SlotNo IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621681169060"><span class="annot"><span class="annottext">Maybe TxInMode
</span><a href="#local-6989586621681169060"><span class="hs-identifier hs-var">mTx</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-703"></span><span>          </span><span class="annot"><span class="annottext">STM () -&gt; IO ()
forall a. STM a -&gt; IO a
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Conc.Sync.html#atomically"><span class="hs-identifier hs-var">atomically</span></a></span><span> </span><span class="annot"><span class="annottext">(STM () -&gt; IO ()) -&gt; STM () -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">TMVar LocalTxMonitoringResult -&gt; LocalTxMonitoringResult -&gt; STM ()
forall a. TMVar a -&gt; a -&gt; STM ()
</span><span class="hs-identifier hs-var">putTMVar</span></span><span> </span><span class="annot"><span class="annottext">TMVar LocalTxMonitoringResult
</span><a href="#local-6989586621681169058"><span class="hs-identifier hs-var">resultVar</span></a></span><span> </span><span class="annot"><span class="annottext">(LocalTxMonitoringResult -&gt; STM ())
-&gt; LocalTxMonitoringResult -&gt; STM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe TxInMode -&gt; SlotNo -&gt; LocalTxMonitoringResult
</span><a href="Cardano.Api.IPC.html#LocalTxMonitoringNextTx"><span class="hs-identifier hs-var">LocalTxMonitoringNextTx</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe TxInMode
</span><a href="#local-6989586621681169060"><span class="hs-identifier hs-var">mTx</span></a></span><span> </span><span class="annot"><span class="annottext">SlotNo
</span><a href="#local-6989586621681169059"><span class="hs-identifier hs-var">slt</span></a></span><span>
</span><span id="line-704"></span><span>          </span><span class="annot"><span class="annottext">ClientStAcquired TxIdInMode TxInMode SlotNo IO ()
-&gt; IO (ClientStAcquired TxIdInMode TxInMode SlotNo IO ())
forall a. a -&gt; IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">(ClientStAcquired TxIdInMode TxInMode SlotNo IO ()
 -&gt; IO (ClientStAcquired TxIdInMode TxInMode SlotNo IO ()))
-&gt; ClientStAcquired TxIdInMode TxInMode SlotNo IO ()
-&gt; IO (ClientStAcquired TxIdInMode TxInMode SlotNo IO ())
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">IO (ClientStIdle TxIdInMode TxInMode SlotNo IO ())
-&gt; ClientStAcquired TxIdInMode TxInMode SlotNo IO ()
forall (m :: * -&gt; *) txid tx slot a.
m (ClientStIdle txid tx slot m a)
-&gt; ClientStAcquired txid tx slot m a
</span><span class="hs-identifier hs-var">CTxMon.SendMsgRelease</span></span><span> </span><span class="annot"><span class="annottext">(IO (ClientStIdle TxIdInMode TxInMode SlotNo IO ())
 -&gt; ClientStAcquired TxIdInMode TxInMode SlotNo IO ())
-&gt; IO (ClientStIdle TxIdInMode TxInMode SlotNo IO ())
-&gt; ClientStAcquired TxIdInMode TxInMode SlotNo IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ClientStIdle TxIdInMode TxInMode SlotNo IO ()
-&gt; IO (ClientStIdle TxIdInMode TxInMode SlotNo IO ())
forall a. a -&gt; IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">(ClientStIdle TxIdInMode TxInMode SlotNo IO ()
 -&gt; IO (ClientStIdle TxIdInMode TxInMode SlotNo IO ()))
-&gt; ClientStIdle TxIdInMode TxInMode SlotNo IO ()
-&gt; IO (ClientStIdle TxIdInMode TxInMode SlotNo IO ())
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">() -&gt; ClientStIdle TxIdInMode TxInMode SlotNo IO ()
forall a txid tx slot (m :: * -&gt; *).
a -&gt; ClientStIdle txid tx slot m a
</span><span class="hs-identifier hs-var">CTxMon.SendMsgDone</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-705"></span><span>
</span><span id="line-706"></span><span>  </span><span class="annot"><a href="#local-6989586621681169046"><span class="hs-identifier hs-type">localTxMonitorMempoolInfo</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-707"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TMVar</span></span><span> </span><span class="annot"><a href="Cardano.Api.IPC.html#LocalTxMonitoringResult"><span class="hs-identifier hs-type">LocalTxMonitoringResult</span></a></span><span>
</span><span id="line-708"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">LocalTxMonitorClient</span></span><span> </span><span class="annot"><a href="Cardano.Api.InMode.html#TxIdInMode"><span class="hs-identifier hs-type">TxIdInMode</span></a></span><span> </span><span class="annot"><a href="Cardano.Api.InMode.html#TxInMode"><span class="hs-identifier hs-type">TxInMode</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">SlotNo</span></span><span> </span><span class="annot"><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-709"></span><span>  </span><span id="local-6989586621681169046"><span class="annot"><span class="annottext">localTxMonitorMempoolInfo :: TMVar LocalTxMonitoringResult
-&gt; LocalTxMonitorClient TxIdInMode TxInMode SlotNo IO ()
</span><a href="#local-6989586621681169046"><span class="hs-identifier hs-var hs-var">localTxMonitorMempoolInfo</span></a></span></span><span> </span><span id="local-6989586621681169061"><span class="annot"><span class="annottext">TMVar LocalTxMonitoringResult
</span><a href="#local-6989586621681169061"><span class="hs-identifier hs-var">resultVar</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-710"></span><span>     </span><span class="annot"><span class="annottext">IO (ClientStIdle TxIdInMode TxInMode SlotNo IO ())
-&gt; LocalTxMonitorClient TxIdInMode TxInMode SlotNo IO ()
forall txid tx slot (m :: * -&gt; *) a.
m (ClientStIdle txid tx slot m a)
-&gt; LocalTxMonitorClient txid tx slot m a
</span><span class="hs-identifier hs-var">LocalTxMonitorClient</span></span><span> </span><span class="annot"><span class="annottext">(IO (ClientStIdle TxIdInMode TxInMode SlotNo IO ())
 -&gt; LocalTxMonitorClient TxIdInMode TxInMode SlotNo IO ())
-&gt; IO (ClientStIdle TxIdInMode TxInMode SlotNo IO ())
-&gt; LocalTxMonitorClient TxIdInMode TxInMode SlotNo IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ClientStIdle TxIdInMode TxInMode SlotNo IO ()
-&gt; IO (ClientStIdle TxIdInMode TxInMode SlotNo IO ())
forall a. a -&gt; IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">(ClientStIdle TxIdInMode TxInMode SlotNo IO ()
 -&gt; IO (ClientStIdle TxIdInMode TxInMode SlotNo IO ()))
-&gt; ClientStIdle TxIdInMode TxInMode SlotNo IO ()
-&gt; IO (ClientStIdle TxIdInMode TxInMode SlotNo IO ())
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-711"></span><span>      </span><span class="annot"><span class="annottext">(SlotNo -&gt; IO (ClientStAcquired TxIdInMode TxInMode SlotNo IO ()))
-&gt; ClientStIdle TxIdInMode TxInMode SlotNo IO ()
forall slot (m :: * -&gt; *) txid tx a.
(slot -&gt; m (ClientStAcquired txid tx slot m a))
-&gt; ClientStIdle txid tx slot m a
</span><span class="hs-identifier hs-var">CTxMon.SendMsgAcquire</span></span><span> </span><span class="annot"><span class="annottext">((SlotNo -&gt; IO (ClientStAcquired TxIdInMode TxInMode SlotNo IO ()))
 -&gt; ClientStIdle TxIdInMode TxInMode SlotNo IO ())
-&gt; (SlotNo
    -&gt; IO (ClientStAcquired TxIdInMode TxInMode SlotNo IO ()))
-&gt; ClientStIdle TxIdInMode TxInMode SlotNo IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621681169062"><span class="annot"><span class="annottext">SlotNo
</span><a href="#local-6989586621681169062"><span class="hs-identifier hs-var">slt</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-712"></span><span>        </span><span class="annot"><span class="annottext">ClientStAcquired TxIdInMode TxInMode SlotNo IO ()
-&gt; IO (ClientStAcquired TxIdInMode TxInMode SlotNo IO ())
forall a. a -&gt; IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span class="annot"><span class="annottext">(ClientStAcquired TxIdInMode TxInMode SlotNo IO ()
 -&gt; IO (ClientStAcquired TxIdInMode TxInMode SlotNo IO ()))
-&gt; ClientStAcquired TxIdInMode TxInMode SlotNo IO ()
-&gt; IO (ClientStAcquired TxIdInMode TxInMode SlotNo IO ())
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">(MempoolSizeAndCapacity
 -&gt; IO (ClientStAcquired TxIdInMode TxInMode SlotNo IO ()))
-&gt; ClientStAcquired TxIdInMode TxInMode SlotNo IO ()
forall (m :: * -&gt; *) txid tx slot a.
(MempoolSizeAndCapacity -&gt; m (ClientStAcquired txid tx slot m a))
-&gt; ClientStAcquired txid tx slot m a
</span><span class="hs-identifier hs-var">CTxMon.SendMsgGetSizes</span></span><span> </span><span class="annot"><span class="annottext">((MempoolSizeAndCapacity
  -&gt; IO (ClientStAcquired TxIdInMode TxInMode SlotNo IO ()))
 -&gt; ClientStAcquired TxIdInMode TxInMode SlotNo IO ())
-&gt; (MempoolSizeAndCapacity
    -&gt; IO (ClientStAcquired TxIdInMode TxInMode SlotNo IO ()))
-&gt; ClientStAcquired TxIdInMode TxInMode SlotNo IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621681169063"><span class="annot"><span class="annottext">MempoolSizeAndCapacity
</span><a href="#local-6989586621681169063"><span class="hs-identifier hs-var">mempoolCapacity</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-713"></span><span>          </span><span class="annot"><span class="annottext">STM () -&gt; IO ()
forall a. STM a -&gt; IO a
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Conc.Sync.html#atomically"><span class="hs-identifier hs-var">atomically</span></a></span><span> </span><span class="annot"><span class="annottext">(STM () -&gt; IO ()) -&gt; STM () -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">TMVar LocalTxMonitoringResult -&gt; LocalTxMonitoringResult -&gt; STM ()
forall a. TMVar a -&gt; a -&gt; STM ()
</span><span class="hs-identifier hs-var">putTMVar</span></span><span> </span><span class="annot"><span class="annottext">TMVar LocalTxMonitoringResult
</span><a href="#local-6989586621681169061"><span class="hs-identifier hs-var">resultVar</span></a></span><span> </span><span class="annot"><span class="annottext">(LocalTxMonitoringResult -&gt; STM ())
-&gt; LocalTxMonitoringResult -&gt; STM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">MempoolSizeAndCapacity -&gt; SlotNo -&gt; LocalTxMonitoringResult
</span><a href="Cardano.Api.IPC.html#LocalTxMonitoringMempoolSizeAndCapacity"><span class="hs-identifier hs-var">LocalTxMonitoringMempoolSizeAndCapacity</span></a></span><span> </span><span class="annot"><span class="annottext">MempoolSizeAndCapacity
</span><a href="#local-6989586621681169063"><span class="hs-identifier hs-var">mempoolCapacity</span></a></span><span> </span><span class="annot"><span class="annottext">SlotNo
</span><a href="#local-6989586621681169062"><span class="hs-identifier hs-var">slt</span></a></span><span>
</span><span id="line-714"></span><span>          </span><span class="annot"><span class="annottext">ClientStAcquired TxIdInMode TxInMode SlotNo IO ()
-&gt; IO (ClientStAcquired TxIdInMode TxInMode SlotNo IO ())
forall a. a -&gt; IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">(ClientStAcquired TxIdInMode TxInMode SlotNo IO ()
 -&gt; IO (ClientStAcquired TxIdInMode TxInMode SlotNo IO ()))
-&gt; ClientStAcquired TxIdInMode TxInMode SlotNo IO ()
-&gt; IO (ClientStAcquired TxIdInMode TxInMode SlotNo IO ())
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">IO (ClientStIdle TxIdInMode TxInMode SlotNo IO ())
-&gt; ClientStAcquired TxIdInMode TxInMode SlotNo IO ()
forall (m :: * -&gt; *) txid tx slot a.
m (ClientStIdle txid tx slot m a)
-&gt; ClientStAcquired txid tx slot m a
</span><span class="hs-identifier hs-var">CTxMon.SendMsgRelease</span></span><span> </span><span class="annot"><span class="annottext">(IO (ClientStIdle TxIdInMode TxInMode SlotNo IO ())
 -&gt; ClientStAcquired TxIdInMode TxInMode SlotNo IO ())
-&gt; IO (ClientStIdle TxIdInMode TxInMode SlotNo IO ())
-&gt; ClientStAcquired TxIdInMode TxInMode SlotNo IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ClientStIdle TxIdInMode TxInMode SlotNo IO ()
-&gt; IO (ClientStIdle TxIdInMode TxInMode SlotNo IO ())
forall a. a -&gt; IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">(ClientStIdle TxIdInMode TxInMode SlotNo IO ()
 -&gt; IO (ClientStIdle TxIdInMode TxInMode SlotNo IO ()))
-&gt; ClientStIdle TxIdInMode TxInMode SlotNo IO ()
-&gt; IO (ClientStIdle TxIdInMode TxInMode SlotNo IO ())
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">() -&gt; ClientStIdle TxIdInMode TxInMode SlotNo IO ()
forall a txid tx slot (m :: * -&gt; *).
a -&gt; ClientStIdle txid tx slot m a
</span><span class="hs-identifier hs-var">CTxMon.SendMsgDone</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-715"></span><span>
</span><span id="line-716"></span><span class="hs-comment">-- ----------------------------------------------------------------------------</span><span>
</span><span id="line-717"></span><span class="hs-comment">-- Get tip as 'ChainPoint'</span><span>
</span><span id="line-718"></span><span class="hs-comment">--</span><span>
</span><span id="line-719"></span><span>
</span><span id="line-720"></span><span class="annot"><a href="Cardano.Api.IPC.html#getLocalChainTip"><span class="hs-identifier hs-type">getLocalChainTip</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-721"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Cardano.Api.IPC.html#LocalNodeConnectInfo"><span class="hs-identifier hs-type">LocalNodeConnectInfo</span></a></span><span>
</span><span id="line-722"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="Cardano.Api.Block.html#ChainTip"><span class="hs-identifier hs-type">ChainTip</span></a></span><span>
</span><span id="line-723"></span><span id="getLocalChainTip"><span class="annot"><span class="annottext">getLocalChainTip :: LocalNodeConnectInfo -&gt; IO ChainTip
</span><a href="Cardano.Api.IPC.html#getLocalChainTip"><span class="hs-identifier hs-var hs-var">getLocalChainTip</span></a></span></span><span> </span><span id="local-6989586621681169064"><span class="annot"><span class="annottext">LocalNodeConnectInfo
</span><a href="#local-6989586621681169064"><span class="hs-identifier hs-var">localNodeConInfo</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-724"></span><span>    </span><span id="local-6989586621681169065"><span class="annot"><span class="annottext">TMVar ChainTip
</span><a href="#local-6989586621681169065"><span class="hs-identifier hs-var">resultVar</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO (TMVar ChainTip)
forall a. IO (TMVar a)
</span><span class="hs-identifier hs-var">newEmptyTMVarIO</span></span><span>
</span><span id="line-725"></span><span>    </span><span class="annot"><span class="annottext">LocalNodeConnectInfo -&gt; LocalNodeClientProtocolsInMode -&gt; IO ()
</span><a href="Cardano.Api.IPC.html#connectToLocalNode"><span class="hs-identifier hs-var">connectToLocalNode</span></a></span><span>
</span><span id="line-726"></span><span>      </span><span class="annot"><span class="annottext">LocalNodeConnectInfo
</span><a href="#local-6989586621681169064"><span class="hs-identifier hs-var">localNodeConInfo</span></a></span><span>
</span><span id="line-727"></span><span>      </span><span class="annot"><a href="Cardano.Api.IPC.html#LocalNodeClientProtocols"><span class="hs-identifier hs-type">LocalNodeClientProtocols</span></a></span><span>
</span><span id="line-728"></span><span>        </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">localChainSyncClient :: LocalChainSyncClient BlockInMode ChainPoint ChainTip IO
</span><a href="Cardano.Api.IPC.html#localChainSyncClient"><span class="hs-identifier hs-var">localChainSyncClient</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ChainSyncClient BlockInMode ChainPoint ChainTip IO ()
-&gt; LocalChainSyncClient BlockInMode ChainPoint ChainTip IO
forall block point tip (m :: * -&gt; *).
ChainSyncClient block point tip m ()
-&gt; LocalChainSyncClient block point tip m
</span><a href="Cardano.Api.IPC.html#LocalChainSyncClient"><span class="hs-identifier hs-var">LocalChainSyncClient</span></a></span><span> </span><span class="annot"><span class="annottext">(ChainSyncClient BlockInMode ChainPoint ChainTip IO ()
 -&gt; LocalChainSyncClient BlockInMode ChainPoint ChainTip IO)
-&gt; ChainSyncClient BlockInMode ChainPoint ChainTip IO ()
-&gt; LocalChainSyncClient BlockInMode ChainPoint ChainTip IO
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">TMVar ChainTip
-&gt; ChainSyncClient BlockInMode ChainPoint ChainTip IO ()
</span><a href="Cardano.Api.IPC.html#chainSyncGetCurrentTip"><span class="hs-identifier hs-var">chainSyncGetCurrentTip</span></a></span><span> </span><span class="annot"><span class="annottext">TMVar ChainTip
</span><a href="#local-6989586621681169065"><span class="hs-identifier hs-var">resultVar</span></a></span><span>
</span><span id="line-729"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">localTxSubmissionClient :: Maybe
  (LocalTxSubmissionClient
     TxInMode TxValidationErrorInCardanoMode IO ())
</span><a href="Cardano.Api.IPC.html#localTxSubmissionClient"><span class="hs-identifier hs-var">localTxSubmissionClient</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe
  (LocalTxSubmissionClient
     TxInMode TxValidationErrorInCardanoMode IO ())
forall a. Maybe a
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-730"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">localStateQueryClient :: Maybe
  (LocalStateQueryClient BlockInMode ChainPoint QueryInMode IO ())
</span><a href="Cardano.Api.IPC.html#localStateQueryClient"><span class="hs-identifier hs-var">localStateQueryClient</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe
  (LocalStateQueryClient BlockInMode ChainPoint QueryInMode IO ())
forall a. Maybe a
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-731"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">localTxMonitoringClient :: Maybe (LocalTxMonitorClient TxIdInMode TxInMode SlotNo IO ())
</span><a href="Cardano.Api.IPC.html#localTxMonitoringClient"><span class="hs-identifier hs-var">localTxMonitoringClient</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe (LocalTxMonitorClient TxIdInMode TxInMode SlotNo IO ())
forall a. Maybe a
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-732"></span><span>        </span><span class="hs-special">}</span><span>
</span><span id="line-733"></span><span>    </span><span class="annot"><span class="annottext">STM ChainTip -&gt; IO ChainTip
forall a. STM a -&gt; IO a
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Conc.Sync.html#atomically"><span class="hs-identifier hs-var">atomically</span></a></span><span> </span><span class="annot"><span class="annottext">(STM ChainTip -&gt; IO ChainTip) -&gt; STM ChainTip -&gt; IO ChainTip
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">TMVar ChainTip -&gt; STM ChainTip
forall a. TMVar a -&gt; STM a
</span><span class="hs-identifier hs-var">takeTMVar</span></span><span> </span><span class="annot"><span class="annottext">TMVar ChainTip
</span><a href="#local-6989586621681169065"><span class="hs-identifier hs-var">resultVar</span></a></span><span>
</span><span id="line-734"></span><span>
</span><span id="line-735"></span><span class="annot"><a href="Cardano.Api.IPC.html#chainSyncGetCurrentTip"><span class="hs-identifier hs-type">chainSyncGetCurrentTip</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-736"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TMVar</span></span><span> </span><span class="annot"><a href="Cardano.Api.Block.html#ChainTip"><span class="hs-identifier hs-type">ChainTip</span></a></span><span>
</span><span id="line-737"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ChainSyncClient</span></span><span> </span><span class="annot"><a href="Cardano.Api.Block.html#BlockInMode"><span class="hs-identifier hs-type">BlockInMode</span></a></span><span> </span><span class="annot"><a href="Cardano.Api.Block.html#ChainPoint"><span class="hs-identifier hs-type">ChainPoint</span></a></span><span> </span><span class="annot"><a href="Cardano.Api.Block.html#ChainTip"><span class="hs-identifier hs-type">ChainTip</span></a></span><span> </span><span class="annot"><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-738"></span><span id="chainSyncGetCurrentTip"><span class="annot"><span class="annottext">chainSyncGetCurrentTip :: TMVar ChainTip
-&gt; ChainSyncClient BlockInMode ChainPoint ChainTip IO ()
</span><a href="Cardano.Api.IPC.html#chainSyncGetCurrentTip"><span class="hs-identifier hs-var hs-var">chainSyncGetCurrentTip</span></a></span></span><span> </span><span id="local-6989586621681169067"><span class="annot"><span class="annottext">TMVar ChainTip
</span><a href="#local-6989586621681169067"><span class="hs-identifier hs-var">tipVar</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-739"></span><span>  </span><span class="annot"><span class="annottext">IO (ClientStIdle BlockInMode ChainPoint ChainTip IO ())
-&gt; ChainSyncClient BlockInMode ChainPoint ChainTip IO ()
forall header point tip (m :: * -&gt; *) a.
m (ClientStIdle header point tip m a)
-&gt; ChainSyncClient header point tip m a
</span><span class="hs-identifier hs-var">ChainSyncClient</span></span><span> </span><span class="annot"><span class="annottext">(IO (ClientStIdle BlockInMode ChainPoint ChainTip IO ())
 -&gt; ChainSyncClient BlockInMode ChainPoint ChainTip IO ())
-&gt; IO (ClientStIdle BlockInMode ChainPoint ChainTip IO ())
-&gt; ChainSyncClient BlockInMode ChainPoint ChainTip IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ClientStIdle BlockInMode ChainPoint ChainTip IO ()
-&gt; IO (ClientStIdle BlockInMode ChainPoint ChainTip IO ())
forall a. a -&gt; IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">ClientStIdle BlockInMode ChainPoint ChainTip IO ()
</span><a href="#local-6989586621681169069"><span class="hs-identifier hs-var">clientStIdle</span></a></span><span>
</span><span id="line-740"></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-741"></span><span>  </span><span class="annot"><a href="#local-6989586621681169069"><span class="hs-identifier hs-type">clientStIdle</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Net.Sync.ClientStIdle</span></span><span> </span><span class="annot"><a href="Cardano.Api.Block.html#BlockInMode"><span class="hs-identifier hs-type">BlockInMode</span></a></span><span> </span><span class="annot"><a href="Cardano.Api.Block.html#ChainPoint"><span class="hs-identifier hs-type">ChainPoint</span></a></span><span> </span><span class="annot"><a href="Cardano.Api.Block.html#ChainTip"><span class="hs-identifier hs-type">ChainTip</span></a></span><span> </span><span class="annot"><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-742"></span><span>  </span><span id="local-6989586621681169069"><span class="annot"><span class="annottext">clientStIdle :: ClientStIdle BlockInMode ChainPoint ChainTip IO ()
</span><a href="#local-6989586621681169069"><span class="hs-identifier hs-var hs-var">clientStIdle</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-743"></span><span>    </span><span class="annot"><span class="annottext">ClientStNext BlockInMode ChainPoint ChainTip IO ()
-&gt; IO (ClientStNext BlockInMode ChainPoint ChainTip IO ())
-&gt; ClientStIdle BlockInMode ChainPoint ChainTip IO ()
forall header point tip (m :: * -&gt; *) a.
ClientStNext header point tip m a
-&gt; m (ClientStNext header point tip m a)
-&gt; ClientStIdle header point tip m a
</span><span class="hs-identifier hs-var">Net.Sync.SendMsgRequestNext</span></span><span> </span><span class="annot"><span class="annottext">ClientStNext BlockInMode ChainPoint ChainTip IO ()
</span><a href="#local-6989586621681169071"><span class="hs-identifier hs-var">clientStNext</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ClientStNext BlockInMode ChainPoint ChainTip IO ()
-&gt; IO (ClientStNext BlockInMode ChainPoint ChainTip IO ())
forall a. a -&gt; IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">ClientStNext BlockInMode ChainPoint ChainTip IO ()
</span><a href="#local-6989586621681169071"><span class="hs-identifier hs-var">clientStNext</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-744"></span><span>
</span><span id="line-745"></span><span>  </span><span class="annot"><a href="#local-6989586621681169071"><span class="hs-identifier hs-type">clientStNext</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Net.Sync.ClientStNext</span></span><span> </span><span class="annot"><a href="Cardano.Api.Block.html#BlockInMode"><span class="hs-identifier hs-type">BlockInMode</span></a></span><span> </span><span class="annot"><a href="Cardano.Api.Block.html#ChainPoint"><span class="hs-identifier hs-type">ChainPoint</span></a></span><span> </span><span class="annot"><a href="Cardano.Api.Block.html#ChainTip"><span class="hs-identifier hs-type">ChainTip</span></a></span><span> </span><span class="annot"><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-746"></span><span>  </span><span id="local-6989586621681169071"><span class="annot"><span class="annottext">clientStNext :: ClientStNext BlockInMode ChainPoint ChainTip IO ()
</span><a href="#local-6989586621681169071"><span class="hs-identifier hs-var hs-var">clientStNext</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Net.Sync.ClientStNext</span></span><span>
</span><span id="line-747"></span><span>    </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">recvMsgRollForward :: BlockInMode
-&gt; ChainTip
-&gt; ChainSyncClient BlockInMode ChainPoint ChainTip IO ()
</span><span class="hs-identifier hs-var">Net.Sync.recvMsgRollForward</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621681169074"><span class="annot"><span class="annottext">BlockInMode
</span><a href="#local-6989586621681169074"><span class="hs-identifier hs-var">_block</span></a></span></span><span> </span><span id="local-6989586621681169075"><span class="annot"><span class="annottext">ChainTip
</span><a href="#local-6989586621681169075"><span class="hs-identifier hs-var">tip</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">IO (ClientStIdle BlockInMode ChainPoint ChainTip IO ())
-&gt; ChainSyncClient BlockInMode ChainPoint ChainTip IO ()
forall header point tip (m :: * -&gt; *) a.
m (ClientStIdle header point tip m a)
-&gt; ChainSyncClient header point tip m a
</span><span class="hs-identifier hs-var">ChainSyncClient</span></span><span> </span><span class="annot"><span class="annottext">(IO (ClientStIdle BlockInMode ChainPoint ChainTip IO ())
 -&gt; ChainSyncClient BlockInMode ChainPoint ChainTip IO ())
-&gt; IO (ClientStIdle BlockInMode ChainPoint ChainTip IO ())
-&gt; ChainSyncClient BlockInMode ChainPoint ChainTip IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-748"></span><span>        </span><span class="annot"><span class="annottext">IO Bool -&gt; IO ()
forall (f :: * -&gt; *) a. Functor f =&gt; f a -&gt; f ()
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/Data.Functor.html#void"><span class="hs-identifier hs-var">void</span></a></span><span> </span><span class="annot"><span class="annottext">(IO Bool -&gt; IO ()) -&gt; IO Bool -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">STM Bool -&gt; IO Bool
forall a. STM a -&gt; IO a
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Conc.Sync.html#atomically"><span class="hs-identifier hs-var">atomically</span></a></span><span> </span><span class="annot"><span class="annottext">(STM Bool -&gt; IO Bool) -&gt; STM Bool -&gt; IO Bool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">TMVar ChainTip -&gt; ChainTip -&gt; STM Bool
forall a. TMVar a -&gt; a -&gt; STM Bool
</span><span class="hs-identifier hs-var">tryPutTMVar</span></span><span> </span><span class="annot"><span class="annottext">TMVar ChainTip
</span><a href="#local-6989586621681169067"><span class="hs-identifier hs-var">tipVar</span></a></span><span> </span><span class="annot"><span class="annottext">ChainTip
</span><a href="#local-6989586621681169075"><span class="hs-identifier hs-var">tip</span></a></span><span>
</span><span id="line-749"></span><span>        </span><span class="annot"><span class="annottext">ClientStIdle BlockInMode ChainPoint ChainTip IO ()
-&gt; IO (ClientStIdle BlockInMode ChainPoint ChainTip IO ())
forall a. a -&gt; IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">(ClientStIdle BlockInMode ChainPoint ChainTip IO ()
 -&gt; IO (ClientStIdle BlockInMode ChainPoint ChainTip IO ()))
-&gt; ClientStIdle BlockInMode ChainPoint ChainTip IO ()
-&gt; IO (ClientStIdle BlockInMode ChainPoint ChainTip IO ())
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">() -&gt; ClientStIdle BlockInMode ChainPoint ChainTip IO ()
forall a header point tip (m :: * -&gt; *).
a -&gt; ClientStIdle header point tip m a
</span><span class="hs-identifier hs-var">Net.Sync.SendMsgDone</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-750"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">recvMsgRollBackward :: ChainPoint
-&gt; ChainTip
-&gt; ChainSyncClient BlockInMode ChainPoint ChainTip IO ()
</span><span class="hs-identifier hs-var">Net.Sync.recvMsgRollBackward</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621681169078"><span class="annot"><span class="annottext">ChainPoint
</span><a href="#local-6989586621681169078"><span class="hs-identifier hs-var">_point</span></a></span></span><span> </span><span id="local-6989586621681169079"><span class="annot"><span class="annottext">ChainTip
</span><a href="#local-6989586621681169079"><span class="hs-identifier hs-var">tip</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">IO (ClientStIdle BlockInMode ChainPoint ChainTip IO ())
-&gt; ChainSyncClient BlockInMode ChainPoint ChainTip IO ()
forall header point tip (m :: * -&gt; *) a.
m (ClientStIdle header point tip m a)
-&gt; ChainSyncClient header point tip m a
</span><span class="hs-identifier hs-var">ChainSyncClient</span></span><span> </span><span class="annot"><span class="annottext">(IO (ClientStIdle BlockInMode ChainPoint ChainTip IO ())
 -&gt; ChainSyncClient BlockInMode ChainPoint ChainTip IO ())
-&gt; IO (ClientStIdle BlockInMode ChainPoint ChainTip IO ())
-&gt; ChainSyncClient BlockInMode ChainPoint ChainTip IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-751"></span><span>        </span><span class="annot"><span class="annottext">IO Bool -&gt; IO ()
forall (f :: * -&gt; *) a. Functor f =&gt; f a -&gt; f ()
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/Data.Functor.html#void"><span class="hs-identifier hs-var">void</span></a></span><span> </span><span class="annot"><span class="annottext">(IO Bool -&gt; IO ()) -&gt; IO Bool -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">STM Bool -&gt; IO Bool
forall a. STM a -&gt; IO a
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Conc.Sync.html#atomically"><span class="hs-identifier hs-var">atomically</span></a></span><span> </span><span class="annot"><span class="annottext">(STM Bool -&gt; IO Bool) -&gt; STM Bool -&gt; IO Bool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">TMVar ChainTip -&gt; ChainTip -&gt; STM Bool
forall a. TMVar a -&gt; a -&gt; STM Bool
</span><span class="hs-identifier hs-var">tryPutTMVar</span></span><span> </span><span class="annot"><span class="annottext">TMVar ChainTip
</span><a href="#local-6989586621681169067"><span class="hs-identifier hs-var">tipVar</span></a></span><span> </span><span class="annot"><span class="annottext">ChainTip
</span><a href="#local-6989586621681169079"><span class="hs-identifier hs-var">tip</span></a></span><span>
</span><span id="line-752"></span><span>        </span><span class="annot"><span class="annottext">ClientStIdle BlockInMode ChainPoint ChainTip IO ()
-&gt; IO (ClientStIdle BlockInMode ChainPoint ChainTip IO ())
forall a. a -&gt; IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">(ClientStIdle BlockInMode ChainPoint ChainTip IO ()
 -&gt; IO (ClientStIdle BlockInMode ChainPoint ChainTip IO ()))
-&gt; ClientStIdle BlockInMode ChainPoint ChainTip IO ()
-&gt; IO (ClientStIdle BlockInMode ChainPoint ChainTip IO ())
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/2afgrvfg7h495x5v3dbkfx469phrchkg-ghc-9.6.2-doc/share/doc/ghc-9.6.2/html/libraries/base-4.18.0.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">() -&gt; ClientStIdle BlockInMode ChainPoint ChainTip IO ()
forall a header point tip (m :: * -&gt; *).
a -&gt; ClientStIdle header point tip m a
</span><span class="hs-identifier hs-var">Net.Sync.SendMsgDone</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-753"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-754"></span></pre></body></html>